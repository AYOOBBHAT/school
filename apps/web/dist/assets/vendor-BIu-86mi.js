var So=t=>{throw TypeError(t)};var Vi=(t,e,r)=>e.has(t)||So("Cannot "+r);var y=(t,e,r)=>(Vi(t,e,"read from private field"),r?r.call(t):e.get(t)),I=(t,e,r)=>e.has(t)?So("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),A=(t,e,r,n)=>(Vi(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),F=(t,e,r)=>(Vi(t,e,"access private method"),r);var Dn=(t,e,r,n)=>({set _(i){A(t,e,i,r)},get _(){return y(t,e,n)}});function xd(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Ln=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Cd(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var ac={exports:{}},oc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,U){var N=O.length;O.push(U);e:for(;0<N;){var H=N-1>>>1,ae=O[H];if(0<i(ae,U))O[H]=U,O[N]=ae,N=H;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var U=O[0],N=O.pop();if(N!==U){O[0]=N;e:for(var H=0,ae=O.length,cr=ae>>>1;H<cr;){var hr=2*(H+1)-1,tn=O[hr],et=hr+1,fr=O[et];if(0>i(tn,N))et<ae&&0>i(fr,tn)?(O[H]=fr,O[et]=N,H=et):(O[H]=tn,O[hr]=N,H=hr);else if(et<ae&&0>i(fr,N))O[H]=fr,O[et]=N,H=et;else break e}}return U}function i(O,U){var N=O.sortIndex-U.sortIndex;return N!==0?N:O.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var u=[],l=[],h=1,c=null,f=3,d=!1,v=!1,g=!1,p=!1,m=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function w(O){for(var U=r(l);U!==null;){if(U.callback===null)n(l);else if(U.startTime<=O)n(l),U.sortIndex=U.expirationTime,e(u,U);else break;U=r(l)}}function T(O){if(g=!1,w(O),!v)if(r(u)!==null)v=!0,S||(S=!0,L());else{var U=r(l);U!==null&&Oe(T,U.startTime-O)}}var S=!1,$=-1,R=5,D=-1;function Z(){return p?!0:!(t.unstable_now()-D<R)}function C(){if(p=!1,S){var O=t.unstable_now();D=O;var U=!0;try{e:{v=!1,g&&(g=!1,b($),$=-1),d=!0;var N=f;try{t:{for(w(O),c=r(u);c!==null&&!(c.expirationTime>O&&Z());){var H=c.callback;if(typeof H=="function"){c.callback=null,f=c.priorityLevel;var ae=H(c.expirationTime<=O);if(O=t.unstable_now(),typeof ae=="function"){c.callback=ae,w(O),U=!0;break t}c===r(u)&&n(u),w(O)}else n(u);c=r(u)}if(c!==null)U=!0;else{var cr=r(l);cr!==null&&Oe(T,cr.startTime-O),U=!1}}break e}finally{c=null,f=N,d=!1}U=void 0}}finally{U?L():S=!1}}}var L;if(typeof _=="function")L=function(){_(C)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ye=se.port2;se.port1.onmessage=C,L=function(){ye.postMessage(null)}}else L=function(){m(C,0)};function Oe(O,U){$=m(function(){O(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var N=f;f=U;try{return O()}finally{f=N}},t.unstable_requestPaint=function(){p=!0},t.unstable_runWithPriority=function(O,U){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var N=f;f=O;try{return U()}finally{f=N}},t.unstable_scheduleCallback=function(O,U,N){var H=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?H+N:H):N=H,O){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=N+ae,O={id:h++,callback:U,priorityLevel:O,startTime:N,expirationTime:ae,sortIndex:-1},N>H?(O.sortIndex=N,e(l,O),r(u)===null&&O===r(l)&&(g?(b($),$=-1):g=!0,Oe(T,N-H))):(O.sortIndex=ae,e(u,O),v||d||(v=!0,S||(S=!0,L()))),O},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(O){var U=f;return function(){var N=f;f=U;try{return O.apply(this,arguments)}finally{f=N}}}})(oc);ac.exports=oc;var SR=ac.exports;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dn(){return dn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dn.apply(this,arguments)}var br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(br||(br={}));const To="popstate";function TR(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return bs("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:uc(i)}return jd(e,r,null,t)}function Sr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ma(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Rd(){return Math.random().toString(36).substr(2,8)}function Eo(t,e){return{usr:t.state,key:t.key,idx:e}}function bs(t,e,r,n){return r===void 0&&(r=null),dn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$i(e):e,{state:r,key:e&&e.key||n||Rd()})}function uc(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function $i(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function jd(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=br.Pop,u=null,l=h();l==null&&(l=0,a.replaceState(dn({},a.state,{idx:l}),""));function h(){return(a.state||{idx:null}).idx}function c(){o=br.Pop;let p=h(),m=p==null?null:p-l;l=p,u&&u({action:o,location:g.location,delta:m})}function f(p,m){o=br.Push;let b=bs(g.location,p,m);l=h()+1;let _=Eo(b,l),w=g.createHref(b);try{a.pushState(_,"",w)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(w)}s&&u&&u({action:o,location:g.location,delta:1})}function d(p,m){o=br.Replace;let b=bs(g.location,p,m);l=h();let _=Eo(b,l),w=g.createHref(b);a.replaceState(_,"",w),s&&u&&u({action:o,location:g.location,delta:0})}function v(p){let m=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof p=="string"?p:uc(p);return b=b.replace(/ $/,"%20"),Sr(m,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,m)}let g={get action(){return o},get location(){return t(i,a)},listen(p){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(To,c),u=p,()=>{i.removeEventListener(To,c),u=null}},createHref(p){return e(i,p)},createURL:v,encodeLocation(p){let m=v(p);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:d,go(p){return a.go(p)}};return g}var Oo;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Oo||(Oo={}));function ER(t,e,r){return r===void 0&&(r="/"),Id(t,e,r)}function Id(t,e,r,n){let i=typeof e=="string"?$i(e):e,s=zd(i.pathname||"/",r);if(s==null)return null;let a=lc(t);Md(a);let o=null;for(let u=0;o==null&&u<a.length;++u){let l=Vd(s);o=Wd(a[u],l)}return o}function lc(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,o)=>{let u={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(Sr(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let l=ti([n,u.relativePath]),h=r.concat(u);s.children&&s.children.length>0&&(Sr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),lc(s.children,e,h,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:Bd(l,s.index),routesMeta:h})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let u of cc(s.path))i(s,a,u)}),e}function cc(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=cc(n.join("/")),o=[];return o.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&o.push(...a),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function Md(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Hd(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Nd=/^:[\w-]+$/,Ud=3,Dd=2,Ld=1,qd=10,Fd=-2,$o=t=>t==="*";function Bd(t,e){let r=t.split("/"),n=r.length;return r.some($o)&&(n+=Fd),e&&(n+=Dd),r.filter(i=>!$o(i)).reduce((i,s)=>i+(Nd.test(s)?Ud:s===""?Ld:qd),n)}function Hd(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Wd(t,e,r){let{routesMeta:n}=t,i={},s="/",a=[];for(let o=0;o<n.length;++o){let u=n[o],l=o===n.length-1,h=s==="/"?e:e.slice(s.length)||"/",c=Gd({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},h),f=u.route;if(!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:ti([s,c.pathname]),pathnameBase:Zd(ti([s,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(s=ti([s,c.pathnameBase]))}return a}function Gd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Kd(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((l,h,c)=>{let{paramName:f,isOptional:d}=h;if(f==="*"){let g=o[c]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const v=o[c];return d&&!v?l[f]=void 0:l[f]=(v||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:a,pattern:t}}function Kd(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),ma(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,u)=>(n.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Vd(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ma(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function zd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Jd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qd=t=>Jd.test(t);function Yd(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?$i(t):t,s;if(r)if(Qd(r))s=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),ma(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?s=Ao(r.substring(1),"/"):s=Ao(r,e)}else s=e;return{pathname:s,search:eg(n),hash:tg(i)}}function Ao(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function zi(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xd(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function OR(t,e){let r=Xd(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function $R(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=$i(t):(i=dn({},t),Sr(!i.pathname||!i.pathname.includes("?"),zi("?","pathname","search",i)),Sr(!i.pathname||!i.pathname.includes("#"),zi("#","pathname","hash",i)),Sr(!i.search||!i.search.includes("#"),zi("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let c=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),c-=1;i.pathname=f.join("/")}o=c>=0?e[c]:"/"}let u=Yd(i,o),l=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(l||h)&&(u.pathname+="/"),u}const ti=t=>t.join("/").replace(/\/\/+/g,"/"),Zd=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eg=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tg=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hc=["post","put","patch","delete"];new Set(hc);const rg=["get",...hc];new Set(rg);var Cn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ng={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},mt,ya,Ql,ig=(Ql=class{constructor(){I(this,mt,ng);I(this,ya,!1)}setTimeoutProvider(t){A(this,mt,t)}setTimeout(t,e){return y(this,mt).setTimeout(t,e)}clearTimeout(t){y(this,mt).clearTimeout(t)}setInterval(t,e){return y(this,mt).setInterval(t,e)}clearInterval(t){y(this,mt).clearInterval(t)}},mt=new WeakMap,ya=new WeakMap,Ql),Wt=new ig;function sg(t){setTimeout(t,0)}var Ur=typeof window>"u"||"Deno"in globalThis;function Ie(){}function ag(t,e){return typeof t=="function"?t(e):t}function Ss(t){return typeof t=="number"&&t>=0&&t!==1/0}function fc(t,e){return Math.max(t+(e||0)-Date.now(),0)}function $t(t,e){return typeof t=="function"?t(e):t}function Me(t,e){return typeof t=="function"?t(e):t}function ko(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:o}=t;if(a){if(n){if(e.queryHash!==_a(a,e.options))return!1}else if(!pn(e.queryKey,a))return!1}if(r!=="all"){const u=e.isActive();if(r==="active"&&!u||r==="inactive"&&u)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||s&&!s(e))}function Po(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(gn(e.options.mutationKey)!==gn(s))return!1}else if(!pn(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function _a(t,e){return((e==null?void 0:e.queryKeyHashFn)||gn)(t)}function gn(t){return JSON.stringify(t,(e,r)=>Es(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function pn(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>pn(t[r],e[r])):!1}var og=Object.prototype.hasOwnProperty;function dc(t,e,r=0){if(t===e)return t;if(r>500)return e;const n=xo(t)&&xo(e);if(!n&&!(Es(t)&&Es(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),o=a.length,u=n?new Array(o):{};let l=0;for(let h=0;h<o;h++){const c=n?h:a[h],f=t[c],d=e[c];if(f===d){u[c]=f,(n?h<s:og.call(t,c))&&l++;continue}if(f===null||d===null||typeof f!="object"||typeof d!="object"){u[c]=d;continue}const v=dc(f,d,r+1);u[c]=v,v===f&&l++}return s===o&&l===s?t:u}function Ts(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function xo(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Es(t){if(!Co(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Co(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Co(t){return Object.prototype.toString.call(t)==="[object Object]"}function ug(t){return new Promise(e=>{Wt.setTimeout(e,t)})}function Os(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?dc(t,e):e}function lg(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function cg(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var wa=Symbol();function gc(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===wa?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function kR(t,e){return typeof t=="function"?t(...e):!!t}function hg(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var zt,_t,Or,Yl,fg=(Yl=class extends Cn{constructor(){super();I(this,zt);I(this,_t);I(this,Or);A(this,Or,e=>{if(!Ur&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){y(this,_t)||this.setEventListener(y(this,Or))}onUnsubscribe(){var e;this.hasListeners()||((e=y(this,_t))==null||e.call(this),A(this,_t,void 0))}setEventListener(e){var r;A(this,Or,e),(r=y(this,_t))==null||r.call(this),A(this,_t,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){y(this,zt)!==e&&(A(this,zt,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof y(this,zt)=="boolean"?y(this,zt):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},zt=new WeakMap,_t=new WeakMap,Or=new WeakMap,Yl),ba=new fg;function $s(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var dg=sg;function gg(){let t=[],e=0,r=o=>{o()},n=o=>{o()},i=dg;const s=o=>{e?t.push(o):i(()=>{r(o)})},a=()=>{const o=t;t=[],o.length&&i(()=>{n(()=>{o.forEach(u=>{r(u)})})})};return{batch:o=>{let u;e++;try{u=o()}finally{e--,e||a()}return u},batchCalls:o=>(...u)=>{s(()=>{o(...u)})},schedule:s,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var ve=gg(),$r,wt,Ar,Xl,pg=(Xl=class extends Cn{constructor(){super();I(this,$r,!0);I(this,wt);I(this,Ar);A(this,Ar,e=>{if(!Ur&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){y(this,wt)||this.setEventListener(y(this,Ar))}onUnsubscribe(){var e;this.hasListeners()||((e=y(this,wt))==null||e.call(this),A(this,wt,void 0))}setEventListener(e){var r;A(this,Ar,e),(r=y(this,wt))==null||r.call(this),A(this,wt,e(this.setOnline.bind(this)))}setOnline(e){y(this,$r)!==e&&(A(this,$r,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return y(this,$r)}},$r=new WeakMap,wt=new WeakMap,Ar=new WeakMap,Xl),ri=new pg;function vg(t){return Math.min(1e3*2**t,3e4)}function pc(t){return(t??"online")==="online"?ri.isOnline():!0}var As=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function vc(t){let e=!1,r=0,n;const i=$s(),s=()=>i.status!=="pending",a=g=>{var p;if(!s()){const m=new As(g);f(m),(p=t.onCancel)==null||p.call(t,m)}},o=()=>{e=!0},u=()=>{e=!1},l=()=>ba.isFocused()&&(t.networkMode==="always"||ri.isOnline())&&t.canRun(),h=()=>pc(t.networkMode)&&t.canRun(),c=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},d=()=>new Promise(g=>{var p;n=m=>{(s()||l())&&g(m)},(p=t.onPause)==null||p.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),v=()=>{if(s())return;let g;const p=r===0?t.initialPromise:void 0;try{g=p??t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(c).catch(m=>{var S;if(s())return;const b=t.retry??(Ur?0:3),_=t.retryDelay??vg,w=typeof _=="function"?_(r,m):_,T=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,m);if(e||!T){f(m);return}r++,(S=t.onFail)==null||S.call(t,r,m),ug(w).then(()=>l()?void 0:d()).then(()=>{e?f(m):v()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(n==null||n(),i),cancelRetry:o,continueRetry:u,canStart:h,start:()=>(h()?v():d().then(v),i)}}var Jt,Zl,yc=(Zl=class{constructor(){I(this,Jt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ss(this.gcTime)&&A(this,Jt,Wt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ur?1/0:5*60*1e3))}clearGcTimeout(){y(this,Jt)&&(Wt.clearTimeout(y(this,Jt)),A(this,Jt,void 0))}},Jt=new WeakMap,Zl),Qt,kr,je,Yt,he,$n,Xt,He,tt,ec,yg=(ec=class extends yc{constructor(e){super();I(this,He);I(this,Qt);I(this,kr);I(this,je);I(this,Yt);I(this,he);I(this,$n);I(this,Xt);A(this,Xt,!1),A(this,$n,e.defaultOptions),this.setOptions(e.options),this.observers=[],A(this,Yt,e.client),A(this,je,y(this,Yt).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,A(this,Qt,jo(this.options)),this.state=e.state??y(this,Qt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=y(this,he))==null?void 0:e.promise}setOptions(e){if(this.options={...y(this,$n),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=jo(this.options);r.data!==void 0&&(this.setState(Ro(r.data,r.dataUpdatedAt)),A(this,Qt,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&y(this,je).remove(this)}setData(e,r){const n=Os(this.state.data,e,this.options);return F(this,He,tt).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){F(this,He,tt).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=y(this,he))==null?void 0:n.promise;return(i=y(this,he))==null||i.cancel(e),r?r.then(Ie).catch(Ie):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(y(this,Qt))}isActive(){return this.observers.some(e=>Me(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wa||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>$t(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!fc(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=y(this,he))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=y(this,he))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),y(this,je).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(y(this,he)&&(y(this,Xt)?y(this,he).cancel({revert:!0}):y(this,he).cancelRetry()),this.scheduleGc()),y(this,je).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||F(this,He,tt).call(this,{type:"invalidate"})}async fetch(e,r){var u,l,h,c,f,d,v,g,p,m,b,_;if(this.state.fetchStatus!=="idle"&&((u=y(this,he))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(y(this,he))return y(this,he).continueRetry(),y(this,he).promise}if(e&&this.setOptions(e),!this.options.queryFn){const w=this.observers.find(T=>T.options.queryFn);w&&this.setOptions(w.options)}const n=new AbortController,i=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(A(this,Xt,!0),n.signal)})},s=()=>{const w=gc(this.options,r),S=(()=>{const $={client:y(this,Yt),queryKey:this.queryKey,meta:this.meta};return i($),$})();return A(this,Xt,!1),this.options.persister?this.options.persister(w,S,this):w(S)},o=(()=>{const w={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:y(this,Yt),state:this.state,fetchFn:s};return i(w),w})();(l=this.options.behavior)==null||l.onFetch(o,this),A(this,kr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&F(this,He,tt).call(this,{type:"fetch",meta:(c=o.fetchOptions)==null?void 0:c.meta}),A(this,he,vc({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:w=>{w instanceof As&&w.revert&&this.setState({...y(this,kr),fetchStatus:"idle"}),n.abort()},onFail:(w,T)=>{F(this,He,tt).call(this,{type:"failed",failureCount:w,error:T})},onPause:()=>{F(this,He,tt).call(this,{type:"pause"})},onContinue:()=>{F(this,He,tt).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const w=await y(this,he).start();if(w===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(w),(d=(f=y(this,je).config).onSuccess)==null||d.call(f,w,this),(g=(v=y(this,je).config).onSettled)==null||g.call(v,w,this.state.error,this),w}catch(w){if(w instanceof As){if(w.silent)return y(this,he).promise;if(w.revert){if(this.state.data===void 0)throw w;return this.state.data}}throw F(this,He,tt).call(this,{type:"error",error:w}),(m=(p=y(this,je).config).onError)==null||m.call(p,w,this),(_=(b=y(this,je).config).onSettled)==null||_.call(b,this.state.data,w,this),w}finally{this.scheduleGc()}}},Qt=new WeakMap,kr=new WeakMap,je=new WeakMap,Yt=new WeakMap,he=new WeakMap,$n=new WeakMap,Xt=new WeakMap,He=new WeakSet,tt=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...mc(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...Ro(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return A(this,kr,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),ve.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),y(this,je).notify({query:this,type:"updated",action:e})})},ec);function mc(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pc(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Ro(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function jo(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Se,B,An,me,Zt,Pr,nt,bt,kn,xr,Cr,er,tr,St,Rr,K,ln,ks,Ps,xs,Cs,Rs,js,Is,_c,tc,PR=(tc=class extends Cn{constructor(e,r){super();I(this,K);I(this,Se);I(this,B);I(this,An);I(this,me);I(this,Zt);I(this,Pr);I(this,nt);I(this,bt);I(this,kn);I(this,xr);I(this,Cr);I(this,er);I(this,tr);I(this,St);I(this,Rr,new Set);this.options=r,A(this,Se,e),A(this,bt,null),A(this,nt,$s()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(y(this,B).addObserver(this),Io(y(this,B),this.options)?F(this,K,ln).call(this):this.updateResult(),F(this,K,Cs).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ms(y(this,B),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ms(y(this,B),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,F(this,K,Rs).call(this),F(this,K,js).call(this),y(this,B).removeObserver(this)}setOptions(e){const r=this.options,n=y(this,B);if(this.options=y(this,Se).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Me(this.options.enabled,y(this,B))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");F(this,K,Is).call(this),y(this,B).setOptions(this.options),r._defaulted&&!Ts(this.options,r)&&y(this,Se).getQueryCache().notify({type:"observerOptionsUpdated",query:y(this,B),observer:this});const i=this.hasListeners();i&&Mo(y(this,B),n,this.options,r)&&F(this,K,ln).call(this),this.updateResult(),i&&(y(this,B)!==n||Me(this.options.enabled,y(this,B))!==Me(r.enabled,y(this,B))||$t(this.options.staleTime,y(this,B))!==$t(r.staleTime,y(this,B)))&&F(this,K,ks).call(this);const s=F(this,K,Ps).call(this);i&&(y(this,B)!==n||Me(this.options.enabled,y(this,B))!==Me(r.enabled,y(this,B))||s!==y(this,St))&&F(this,K,xs).call(this,s)}getOptimisticResult(e){const r=y(this,Se).getQueryCache().build(y(this,Se),e),n=this.createResult(r,e);return _g(this,n)&&(A(this,me,n),A(this,Pr,this.options),A(this,Zt,y(this,B).state)),n}getCurrentResult(){return y(this,me)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&y(this,nt).status==="pending"&&y(this,nt).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){y(this,Rr).add(e)}getCurrentQuery(){return y(this,B)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=y(this,Se).defaultQueryOptions(e),n=y(this,Se).getQueryCache().build(y(this,Se),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return F(this,K,ln).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),y(this,me)))}createResult(e,r){var D;const n=y(this,B),i=this.options,s=y(this,me),a=y(this,Zt),o=y(this,Pr),l=e!==n?e.state:y(this,An),{state:h}=e;let c={...h},f=!1,d;if(r._optimisticResults){const Z=this.hasListeners(),C=!Z&&Io(e,r),L=Z&&Mo(e,n,r,i);(C||L)&&(c={...c,...mc(h.data,e.options)}),r._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:v,errorUpdatedAt:g,status:p}=c;d=c.data;let m=!1;if(r.placeholderData!==void 0&&d===void 0&&p==="pending"){let Z;s!=null&&s.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(Z=s.data,m=!0):Z=typeof r.placeholderData=="function"?r.placeholderData((D=y(this,Cr))==null?void 0:D.state.data,y(this,Cr)):r.placeholderData,Z!==void 0&&(p="success",d=Os(s==null?void 0:s.data,Z,r),f=!0)}if(r.select&&d!==void 0&&!m)if(s&&d===(a==null?void 0:a.data)&&r.select===y(this,kn))d=y(this,xr);else try{A(this,kn,r.select),d=r.select(d),d=Os(s==null?void 0:s.data,d,r),A(this,xr,d),A(this,bt,null)}catch(Z){A(this,bt,Z)}y(this,bt)&&(v=y(this,bt),d=y(this,xr),g=Date.now(),p="error");const b=c.fetchStatus==="fetching",_=p==="pending",w=p==="error",T=_&&b,S=d!==void 0,R={status:p,fetchStatus:c.fetchStatus,isPending:_,isSuccess:p==="success",isError:w,isInitialLoading:T,isLoading:T,data:d,dataUpdatedAt:c.dataUpdatedAt,error:v,errorUpdatedAt:g,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>l.dataUpdateCount||c.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!_,isLoadingError:w&&!S,isPaused:c.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:w&&S,isStale:Sa(e,r),refetch:this.refetch,promise:y(this,nt),isEnabled:Me(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const Z=R.data!==void 0,C=R.status==="error"&&!Z,L=Oe=>{C?Oe.reject(R.error):Z&&Oe.resolve(R.data)},se=()=>{const Oe=A(this,nt,R.promise=$s());L(Oe)},ye=y(this,nt);switch(ye.status){case"pending":e.queryHash===n.queryHash&&L(ye);break;case"fulfilled":(C||R.data!==ye.value)&&se();break;case"rejected":(!C||R.error!==ye.reason)&&se();break}}return R}updateResult(){const e=y(this,me),r=this.createResult(y(this,B),this.options);if(A(this,Zt,y(this,B).state),A(this,Pr,this.options),y(this,Zt).data!==void 0&&A(this,Cr,y(this,B)),Ts(r,e))return;A(this,me,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!y(this,Rr).size)return!0;const a=new Set(s??y(this,Rr));return this.options.throwOnError&&a.add("error"),Object.keys(y(this,me)).some(o=>{const u=o;return y(this,me)[u]!==e[u]&&a.has(u)})};F(this,K,_c).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&F(this,K,Cs).call(this)}},Se=new WeakMap,B=new WeakMap,An=new WeakMap,me=new WeakMap,Zt=new WeakMap,Pr=new WeakMap,nt=new WeakMap,bt=new WeakMap,kn=new WeakMap,xr=new WeakMap,Cr=new WeakMap,er=new WeakMap,tr=new WeakMap,St=new WeakMap,Rr=new WeakMap,K=new WeakSet,ln=function(e){F(this,K,Is).call(this);let r=y(this,B).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Ie)),r},ks=function(){F(this,K,Rs).call(this);const e=$t(this.options.staleTime,y(this,B));if(Ur||y(this,me).isStale||!Ss(e))return;const n=fc(y(this,me).dataUpdatedAt,e)+1;A(this,er,Wt.setTimeout(()=>{y(this,me).isStale||this.updateResult()},n))},Ps=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(y(this,B)):this.options.refetchInterval)??!1},xs=function(e){F(this,K,js).call(this),A(this,St,e),!(Ur||Me(this.options.enabled,y(this,B))===!1||!Ss(y(this,St))||y(this,St)===0)&&A(this,tr,Wt.setInterval(()=>{(this.options.refetchIntervalInBackground||ba.isFocused())&&F(this,K,ln).call(this)},y(this,St)))},Cs=function(){F(this,K,ks).call(this),F(this,K,xs).call(this,F(this,K,Ps).call(this))},Rs=function(){y(this,er)&&(Wt.clearTimeout(y(this,er)),A(this,er,void 0))},js=function(){y(this,tr)&&(Wt.clearInterval(y(this,tr)),A(this,tr,void 0))},Is=function(){const e=y(this,Se).getQueryCache().build(y(this,Se),this.options);if(e===y(this,B))return;const r=y(this,B);A(this,B,e),A(this,An,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},_c=function(e){ve.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(y(this,me))}),y(this,Se).getQueryCache().notify({query:y(this,B),type:"observerResultsUpdated"})})},tc);function mg(t,e){return Me(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Io(t,e){return mg(t,e)||t.state.data!==void 0&&Ms(t,e,e.refetchOnMount)}function Ms(t,e,r){if(Me(e.enabled,t)!==!1&&$t(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&Sa(t,e)}return!1}function Mo(t,e,r,n){return(t!==e||Me(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Sa(t,r)}function Sa(t,e){return Me(e.enabled,t)!==!1&&t.isStaleByTime($t(e.staleTime,t))}function _g(t,e){return!Ts(t.getCurrentResult(),e)}function No(t){return{onFetch:(e,r)=>{var h,c,f,d,v;const n=e.options,i=(f=(c=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:c.fetchMore)==null?void 0:f.direction,s=((d=e.state.data)==null?void 0:d.pages)||[],a=((v=e.state.data)==null?void 0:v.pageParams)||[];let o={pages:[],pageParams:[]},u=0;const l=async()=>{let g=!1;const p=_=>{hg(_,()=>e.signal,()=>g=!0)},m=gc(e.options,e.fetchOptions),b=async(_,w,T)=>{if(g)return Promise.reject();if(w==null&&_.pages.length)return Promise.resolve(_);const $=(()=>{const C={client:e.client,queryKey:e.queryKey,pageParam:w,direction:T?"backward":"forward",meta:e.options.meta};return p(C),C})(),R=await m($),{maxPages:D}=e.options,Z=T?cg:lg;return{pages:Z(_.pages,R,D),pageParams:Z(_.pageParams,w,D)}};if(i&&s.length){const _=i==="backward",w=_?wg:Uo,T={pages:s,pageParams:a},S=w(n,T);o=await b(T,S,_)}else{const _=t??s.length;do{const w=u===0?a[0]??n.initialPageParam:Uo(n,o);if(u>0&&w==null)break;o=await b(o,w),u++}while(u<_)}return o};e.options.persister?e.fetchFn=()=>{var g,p;return(p=(g=e.options).persister)==null?void 0:p.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=l}}}function Uo(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function wg(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Pn,Ve,pe,rr,ze,pt,rc,bg=(rc=class extends yc{constructor(e){super();I(this,ze);I(this,Pn);I(this,Ve);I(this,pe);I(this,rr);A(this,Pn,e.client),this.mutationId=e.mutationId,A(this,pe,e.mutationCache),A(this,Ve,[]),this.state=e.state||Sg(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){y(this,Ve).includes(e)||(y(this,Ve).push(e),this.clearGcTimeout(),y(this,pe).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){A(this,Ve,y(this,Ve).filter(r=>r!==e)),this.scheduleGc(),y(this,pe).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){y(this,Ve).length||(this.state.status==="pending"?this.scheduleGc():y(this,pe).remove(this))}continue(){var e;return((e=y(this,rr))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,o,u,l,h,c,f,d,v,g,p,m,b,_,w,T,S,$;const r=()=>{F(this,ze,pt).call(this,{type:"continue"})},n={client:y(this,Pn),meta:this.options.meta,mutationKey:this.options.mutationKey};A(this,rr,vc({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(R,D)=>{F(this,ze,pt).call(this,{type:"failed",failureCount:R,error:D})},onPause:()=>{F(this,ze,pt).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>y(this,pe).canRun(this)}));const i=this.state.status==="pending",s=!y(this,rr).canStart();try{if(i)r();else{F(this,ze,pt).call(this,{type:"pending",variables:e,isPaused:s}),y(this,pe).config.onMutate&&await y(this,pe).config.onMutate(e,this,n);const D=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,e,n));D!==this.state.context&&F(this,ze,pt).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const R=await y(this,rr).start();return await((l=(u=y(this,pe).config).onSuccess)==null?void 0:l.call(u,R,e,this.state.context,this,n)),await((c=(h=this.options).onSuccess)==null?void 0:c.call(h,R,e,this.state.context,n)),await((d=(f=y(this,pe).config).onSettled)==null?void 0:d.call(f,R,null,this.state.variables,this.state.context,this,n)),await((g=(v=this.options).onSettled)==null?void 0:g.call(v,R,null,e,this.state.context,n)),F(this,ze,pt).call(this,{type:"success",data:R}),R}catch(R){try{await((m=(p=y(this,pe).config).onError)==null?void 0:m.call(p,R,e,this.state.context,this,n))}catch(D){Promise.reject(D)}try{await((_=(b=this.options).onError)==null?void 0:_.call(b,R,e,this.state.context,n))}catch(D){Promise.reject(D)}try{await((T=(w=y(this,pe).config).onSettled)==null?void 0:T.call(w,void 0,R,this.state.variables,this.state.context,this,n))}catch(D){Promise.reject(D)}try{await(($=(S=this.options).onSettled)==null?void 0:$.call(S,void 0,R,e,this.state.context,n))}catch(D){Promise.reject(D)}throw F(this,ze,pt).call(this,{type:"error",error:R}),R}finally{y(this,pe).runNext(this)}}},Pn=new WeakMap,Ve=new WeakMap,pe=new WeakMap,rr=new WeakMap,ze=new WeakSet,pt=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ve.batch(()=>{y(this,Ve).forEach(n=>{n.onMutationUpdate(e)}),y(this,pe).notify({mutation:this,type:"updated",action:e})})},rc);function Sg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var it,We,xn,nc,Tg=(nc=class extends Cn{constructor(e={}){super();I(this,it);I(this,We);I(this,xn);this.config=e,A(this,it,new Set),A(this,We,new Map),A(this,xn,0)}build(e,r,n){const i=new bg({client:e,mutationCache:this,mutationId:++Dn(this,xn)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){y(this,it).add(e);const r=qn(e);if(typeof r=="string"){const n=y(this,We).get(r);n?n.push(e):y(this,We).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(y(this,it).delete(e)){const r=qn(e);if(typeof r=="string"){const n=y(this,We).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&y(this,We).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=qn(e);if(typeof r=="string"){const n=y(this,We).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=qn(e);if(typeof r=="string"){const i=(n=y(this,We).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ve.batch(()=>{y(this,it).forEach(e=>{this.notify({type:"removed",mutation:e})}),y(this,it).clear(),y(this,We).clear()})}getAll(){return Array.from(y(this,it))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Po(r,n))}findAll(e={}){return this.getAll().filter(r=>Po(e,r))}notify(e){ve.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return ve.batch(()=>Promise.all(e.map(r=>r.continue().catch(Ie))))}},it=new WeakMap,We=new WeakMap,xn=new WeakMap,nc);function qn(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Je,ic,Eg=(ic=class extends Cn{constructor(e={}){super();I(this,Je);this.config=e,A(this,Je,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??_a(i,r);let a=this.get(s);return a||(a=new yg({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){y(this,Je).has(e.queryHash)||(y(this,Je).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=y(this,Je).get(e.queryHash);r&&(e.destroy(),r===e&&y(this,Je).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ve.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return y(this,Je).get(e)}getAll(){return[...y(this,Je).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>ko(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>ko(e,n)):r}notify(e){ve.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){ve.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ve.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Je=new WeakMap,ic),ie,Tt,Et,jr,Ir,Ot,Mr,Nr,sc,xR=(sc=class{constructor(t={}){I(this,ie);I(this,Tt);I(this,Et);I(this,jr);I(this,Ir);I(this,Ot);I(this,Mr);I(this,Nr);A(this,ie,t.queryCache||new Eg),A(this,Tt,t.mutationCache||new Tg),A(this,Et,t.defaultOptions||{}),A(this,jr,new Map),A(this,Ir,new Map),A(this,Ot,0)}mount(){Dn(this,Ot)._++,y(this,Ot)===1&&(A(this,Mr,ba.subscribe(async t=>{t&&(await this.resumePausedMutations(),y(this,ie).onFocus())})),A(this,Nr,ri.subscribe(async t=>{t&&(await this.resumePausedMutations(),y(this,ie).onOnline())})))}unmount(){var t,e;Dn(this,Ot)._--,y(this,Ot)===0&&((t=y(this,Mr))==null||t.call(this),A(this,Mr,void 0),(e=y(this,Nr))==null||e.call(this),A(this,Nr,void 0))}isFetching(t){return y(this,ie).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return y(this,Tt).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=y(this,ie).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=y(this,ie).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime($t(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return y(this,ie).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=y(this,ie).get(n.queryHash),s=i==null?void 0:i.state.data,a=ag(e,s);if(a!==void 0)return y(this,ie).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return ve.batch(()=>y(this,ie).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=y(this,ie).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=y(this,ie);ve.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=y(this,ie);return ve.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=ve.batch(()=>y(this,ie).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(Ie).catch(Ie)}invalidateQueries(t,e={}){return ve.batch(()=>(y(this,ie).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=ve.batch(()=>y(this,ie).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(Ie)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(Ie)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=y(this,ie).build(this,e);return r.isStaleByTime($t(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ie).catch(Ie)}fetchInfiniteQuery(t){return t.behavior=No(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ie).catch(Ie)}ensureInfiniteQueryData(t){return t.behavior=No(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ri.isOnline()?y(this,Tt).resumePausedMutations():Promise.resolve()}getQueryCache(){return y(this,ie)}getMutationCache(){return y(this,Tt)}getDefaultOptions(){return y(this,Et)}setDefaultOptions(t){A(this,Et,t)}setQueryDefaults(t,e){y(this,jr).set(gn(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...y(this,jr).values()],r={};return e.forEach(n=>{pn(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){y(this,Ir).set(gn(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...y(this,Ir).values()],r={};return e.forEach(n=>{pn(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...y(this,Et).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=_a(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===wa&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...y(this,Et).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){y(this,ie).clear(),y(this,Tt).clear()}},ie=new WeakMap,Tt=new WeakMap,Et=new WeakMap,jr=new WeakMap,Ir=new WeakMap,Ot=new WeakMap,Mr=new WeakMap,Nr=new WeakMap,sc),Ns=function(t,e){return Ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Ns(t,e)};function wc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ns(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ni=function(){return ni=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ni.apply(this,arguments)};function Br(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function bc(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Sc(t,e){return function(r,n){e(r,n,t)}}function Tc(t,e,r,n,i,s){function a(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var o=n.kind,u=o==="getter"?"get":o==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,h=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),c,f=!1,d=r.length-1;d>=0;d--){var v={};for(var g in n)v[g]=g==="access"?{}:n[g];for(var g in n.access)v.access[g]=n.access[g];v.addInitializer=function(m){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(m||null))};var p=(0,r[d])(o==="accessor"?{get:h.get,set:h.set}:h[u],v);if(o==="accessor"){if(p===void 0)continue;if(p===null||typeof p!="object")throw new TypeError("Object expected");(c=a(p.get))&&(h.get=c),(c=a(p.set))&&(h.set=c),(c=a(p.init))&&i.unshift(c)}else(c=a(p))&&(o==="field"?i.unshift(c):h[u]=c)}l&&Object.defineProperty(l,n.name,h),f=!0}function Ec(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function Oc(t){return typeof t=="symbol"?t:"".concat(t)}function $c(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Ac(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function x(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{l(n.next(h))}catch(c){a(c)}}function u(h){try{l(n.throw(h))}catch(c){a(c)}}function l(h){h.done?s(h.value):i(h.value).then(o,u)}l((n=n.apply(t,e||[])).next())})}function kc(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(h){return u([l,h])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(h){l=[6,h],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Ai=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Pc(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ai(e,t,r)}function ii(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ta(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function xc(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ta(arguments[e]));return t}function Cc(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function Rc(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Dr(t){return this instanceof Dr?(this.v=t,this):new Dr(t)}function jc(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(d){return function(v){return Promise.resolve(v).then(d,c)}}function o(d,v){n[d]&&(i[d]=function(g){return new Promise(function(p,m){s.push([d,g,p,m])>1||u(d,g)})},v&&(i[d]=v(i[d])))}function u(d,v){try{l(n[d](v))}catch(g){f(s[0][3],g)}}function l(d){d.value instanceof Dr?Promise.resolve(d.value.v).then(h,c):f(s[0][2],d)}function h(d){u("next",d)}function c(d){u("throw",d)}function f(d,v){d(v),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Ic(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(a){return(r=!r)?{value:Dr(t[i](a)),done:!1}:s?s(a):a}:s}}function Mc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ii=="function"?ii(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(o,u){a=t[s](a),i(o,u,a.done,a.value)})}}function i(s,a,o,u){Promise.resolve(u).then(function(l){s({value:l,done:o})},a)}}function Nc(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Og=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Us=function(t){return Us=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Us(t)};function Uc(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Us(t),n=0;n<r.length;n++)r[n]!=="default"&&Ai(e,t,r[n]);return Og(e,t),e}function Dc(t){return t&&t.__esModule?t:{default:t}}function Lc(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function qc(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function Fc(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Bc(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var $g=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Hc(t){function e(s){t.error=t.hasError?new $g(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(a){return e(a),i()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Wc(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,a){return n?e?".jsx":".js":i&&(!s||!a)?r:i+s+"."+a.toLowerCase()+"js"}):t}const Ag={__extends:wc,__assign:ni,__rest:Br,__decorate:bc,__param:Sc,__esDecorate:Tc,__runInitializers:Ec,__propKey:Oc,__setFunctionName:$c,__metadata:Ac,__awaiter:x,__generator:kc,__createBinding:Ai,__exportStar:Pc,__values:ii,__read:Ta,__spread:xc,__spreadArrays:Cc,__spreadArray:Rc,__await:Dr,__asyncGenerator:jc,__asyncDelegator:Ic,__asyncValues:Mc,__makeTemplateObject:Nc,__importStar:Uc,__importDefault:Dc,__classPrivateFieldGet:Lc,__classPrivateFieldSet:qc,__classPrivateFieldIn:Fc,__addDisposableResource:Bc,__disposeResources:Hc,__rewriteRelativeImportExtension:Wc},kg=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Bc,get __assign(){return ni},__asyncDelegator:Ic,__asyncGenerator:jc,__asyncValues:Mc,__await:Dr,__awaiter:x,__classPrivateFieldGet:Lc,__classPrivateFieldIn:Fc,__classPrivateFieldSet:qc,__createBinding:Ai,__decorate:bc,__disposeResources:Hc,__esDecorate:Tc,__exportStar:Pc,__extends:wc,__generator:kc,__importDefault:Dc,__importStar:Uc,__makeTemplateObject:Nc,__metadata:Ac,__param:Sc,__propKey:Oc,__read:Ta,__rest:Br,__rewriteRelativeImportExtension:Wc,__runInitializers:Ec,__setFunctionName:$c,__spread:xc,__spreadArray:Rc,__spreadArrays:Cc,__values:ii,default:Ag},Symbol.toStringTag,{value:"Module"})),Pg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Ea extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class xg extends Ea{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Do extends Ea{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Lo extends Ea{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ds;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ds||(Ds={}));class Cg{constructor(e,{headers:r={},customFetch:n,region:i=Ds.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=Pg(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return x(this,arguments,void 0,function*(r,n={}){var i;let s,a;try{const{headers:o,method:u,body:l,signal:h,timeout:c}=n;let f={},{region:d}=n;d||(d=this.region);const v=new URL(`${this.url}/${r}`);d&&d!=="any"&&(f["x-region"]=d,v.searchParams.set("forceFunctionRegion",d));let g;l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(f["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(f["Content-Type"]="application/json",g=JSON.stringify(l)):g=l;let p=h;c&&(a=new AbortController,s=setTimeout(()=>a.abort(),c),h?(p=a.signal,h.addEventListener("abort",()=>a.abort())):p=a.signal);const m=yield this.fetch(v.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:g,signal:p}).catch(T=>{throw new xg(T)}),b=m.headers.get("x-relay-error");if(b&&b==="true")throw new Do(m);if(!m.ok)throw new Lo(m);let _=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return _==="application/json"?w=yield m.json():_==="application/octet-stream"||_==="application/pdf"?w=yield m.blob():_==="text/event-stream"?w=m:_==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(o){return{data:null,error:o,response:o instanceof Lo||o instanceof Do?o.context:void 0}}finally{s&&clearTimeout(s)}})}}var _e={};const Hr=Cd(kg);var Fn={},Bn={},Hn={},Wn={},Gn={},Kn={},qo;function Gc(){if(qo)return Kn;qo=1,Object.defineProperty(Kn,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Kn.default=t,Kn}var Fo;function Kc(){if(Fo)return Gn;Fo=1,Object.defineProperty(Gn,"__esModule",{value:!0});const e=Hr.__importDefault(Gc());class r{constructor(i){var s,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var l,h,c,f;let d=null,v=null,g=null,p=u.status,m=u.statusText;if(u.ok){if(this.method!=="HEAD"){const T=await u.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?v=T:v=JSON.parse(T))}const _=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),w=(c=u.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");_&&w&&w.length>1&&(g=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(d={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,g=null,p=406,m="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const _=await u.text();try{d=JSON.parse(_),Array.isArray(d)&&u.status===404&&(v=[],d=null,p=200,m="OK")}catch{u.status===404&&_===""?(p=204,m="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((f=d==null?void 0:d.details)===null||f===void 0)&&f.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new e.default(d)}return{error:d,data:v,count:g,status:p,statusText:m}});return this.shouldThrowOnError||(o=o.catch(u=>{var l,h,c;return{error:{message:`${(l=u==null?void 0:u.name)!==null&&l!==void 0?l:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(c=u==null?void 0:u.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),o.then(i,s)}returns(){return this}overrideTypes(){return this}}return Gn.default=r,Gn}var Bo;function Vc(){if(Bo)return Wn;Bo=1,Object.defineProperty(Wn,"__esModule",{value:!0});const e=Hr.__importDefault(Kc());class r extends e.default{select(i){let s=!1;const a=(i??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:a,foreignTable:o,referencedTable:u=o}={}){const l=u?`${u}.order`:"order",h=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,s,{foreignTable:a,referencedTable:o=a}={}){const u=typeof o>"u"?"offset":`${o}.offset`,l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(l,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:a=!1,buffers:o=!1,wal:u=!1,format:l="text"}={}){var h;const c=[i?"analyze":null,s?"verbose":null,a?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),f=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Wn.default=r,Wn}var Ho;function Oa(){if(Ho)return Hn;Ho=1,Object.defineProperty(Hn,"__esModule",{value:!0});const e=Hr.__importDefault(Vc()),r=new RegExp("[,()]");class n extends e.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const o=Array.from(new Set(a)).map(u=>typeof u=="string"&&r.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:o,type:u}={}){let l="";u==="plain"?l="pl":u==="phrase"?l="ph":u==="websearch"&&(l="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${l}fts${h}.${a}`),this}match(s){return Object.entries(s).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(s,a,o){return this.url.searchParams.append(s,`not.${a}.${o}`),this}or(s,{foreignTable:a,referencedTable:o=a}={}){const u=o?`${o}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,a,o){return this.url.searchParams.append(s,`${a}.${o}`),this}}return Hn.default=n,Hn}var Wo;function zc(){if(Wo)return Bn;Wo=1,Object.defineProperty(Bn,"__esModule",{value:!0});const e=Hr.__importDefault(Oa());class r{constructor(i,{headers:s={},schema:a,fetch:o}){this.url=i,this.headers=new Headers(s),this.schema=a,this.fetch=o}select(i,s){const{head:a=!1,count:o}=s??{},u=a?"HEAD":"GET";let l=!1;const h=(i??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",h),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:a=!0}={}){var o;const u="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const l=i.reduce((h,c)=>h.concat(Object.keys(c)),[]);if(l.length>0){const h=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:a=!1,count:o,defaultToNull:u=!0}={}){var l;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),o&&this.headers.append("Prefer",`count=${o}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(c.length>0){const f=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(i,{count:s}={}){var a;const o="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var s;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return Bn.default=r,Bn}var Go;function Rg(){if(Go)return Fn;Go=1,Object.defineProperty(Fn,"__esModule",{value:!0});const t=Hr,e=t.__importDefault(zc()),r=t.__importDefault(Oa());class n{constructor(s,{headers:a={},schema:o,fetch:u}={}){this.url=s,this.headers=new Headers(a),this.schemaName=o,this.fetch=u}from(s){const a=new URL(`${this.url}/${s}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new n(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:o=!1,get:u=!1,count:l}={}){var h;let c;const f=new URL(`${this.url}/rpc/${s}`);let d;o||u?(c=o?"HEAD":"GET",Object.entries(a).filter(([g,p])=>p!==void 0).map(([g,p])=>[g,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([g,p])=>{f.searchParams.append(g,p)})):(c="POST",d=a);const v=new Headers(this.headers);return l&&v.set("Prefer",`count=${l}`),new r.default({method:c,url:f,headers:v,schema:this.schemaName,body:d,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Fn.default=n,Fn}Object.defineProperty(_e,"__esModule",{value:!0});var Jc=_e.PostgrestError=sh=_e.PostgrestBuilder=nh=_e.PostgrestTransformBuilder=th=_e.PostgrestFilterBuilder=Zc=_e.PostgrestQueryBuilder=Yc=_e.PostgrestClient=void 0;const Wr=Hr,Qc=Wr.__importDefault(Rg());var Yc=_e.PostgrestClient=Qc.default;const Xc=Wr.__importDefault(zc());var Zc=_e.PostgrestQueryBuilder=Xc.default;const eh=Wr.__importDefault(Oa());var th=_e.PostgrestFilterBuilder=eh.default;const rh=Wr.__importDefault(Vc());var nh=_e.PostgrestTransformBuilder=rh.default;const ih=Wr.__importDefault(Kc());var sh=_e.PostgrestBuilder=ih.default;const ah=Wr.__importDefault(Gc());Jc=_e.PostgrestError=ah.default;var oh=_e.default={PostgrestClient:Qc.default,PostgrestQueryBuilder:Xc.default,PostgrestFilterBuilder:eh.default,PostgrestTransformBuilder:rh.default,PostgrestBuilder:ih.default,PostgrestError:ah.default};const jg=xd({__proto__:null,get PostgrestBuilder(){return sh},get PostgrestClient(){return Yc},get PostgrestError(){return Jc},get PostgrestFilterBuilder(){return th},get PostgrestQueryBuilder(){return Zc},get PostgrestTransformBuilder(){return nh},default:oh},[_e]),{PostgrestClient:Ig,PostgrestQueryBuilder:CR,PostgrestFilterBuilder:RR,PostgrestTransformBuilder:jR,PostgrestBuilder:IR,PostgrestError:MR}=oh||jg;class Mg{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ng="2.81.1",Ug=`realtime-js/${Ng}`,uh="1.0.0",Dg="2.0.0",Ko=uh,Ls=1e4,Lg=1e3,qg=100;var Ft;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ft||(Ft={}));var le;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(le||(le={}));var Ne;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ne||(Ne={}));var qs;(function(t){t.websocket="websocket"})(qs||(qs={}));var Bt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Bt||(Bt={}));class Fg{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,r){if(this._isArrayBuffer(e.payload))return r(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodePush(e){const{join_ref:r,ref:n,event:i,topic:s,payload:a}=e,o=this.META_LENGTH+r.length+n.length+s.length+i.length,u=new ArrayBuffer(this.HEADER_LENGTH+o);let l=new DataView(u),h=0;l.setUint8(h++,this.KINDS.push),l.setUint8(h++,r.length),l.setUint8(h++,n.length),l.setUint8(h++,s.length),l.setUint8(h++,i.length),Array.from(r,f=>l.setUint8(h++,f.charCodeAt(0))),Array.from(n,f=>l.setUint8(h++,f.charCodeAt(0))),Array.from(s,f=>l.setUint8(h++,f.charCodeAt(0))),Array.from(i,f=>l.setUint8(h++,f.charCodeAt(0)));var c=new Uint8Array(u.byteLength+a.byteLength);return c.set(new Uint8Array(u),0),c.set(new Uint8Array(a),u.byteLength),c.buffer}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const{join_ref:i,ref:s,topic:a}=e,o=e.payload.event,u=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0),l=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+s.length+a.length+o.length,h=new ArrayBuffer(this.HEADER_LENGTH+l);let c=new DataView(h),f=0;c.setUint8(f++,this.KINDS.userBroadcastPush),c.setUint8(f++,i.length),c.setUint8(f++,s.length),c.setUint8(f++,a.length),c.setUint8(f++,o.length),c.setUint8(f++,this.BINARY_ENCODING),Array.from(i,v=>c.setUint8(f++,v.charCodeAt(0))),Array.from(s,v=>c.setUint8(f++,v.charCodeAt(0))),Array.from(a,v=>c.setUint8(f++,v.charCodeAt(0))),Array.from(o,v=>c.setUint8(f++,v.charCodeAt(0)));var d=new Uint8Array(h.byteLength+u.byteLength);return d.set(new Uint8Array(h),0),d.set(new Uint8Array(u),h.byteLength),d.buffer}_encodeJsonUserBroadcastPush(e){var r,n;const{join_ref:i,ref:s,topic:a}=e,o=e.payload.event,u=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},h=new TextEncoder().encode(JSON.stringify(u)).buffer,c=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+s.length+a.length+o.length,f=new ArrayBuffer(this.HEADER_LENGTH+c);let d=new DataView(f),v=0;d.setUint8(v++,this.KINDS.userBroadcastPush),d.setUint8(v++,i.length),d.setUint8(v++,s.length),d.setUint8(v++,a.length),d.setUint8(v++,o.length),d.setUint8(v++,this.JSON_ENCODING),Array.from(i,p=>d.setUint8(v++,p.charCodeAt(0))),Array.from(s,p=>d.setUint8(v++,p.charCodeAt(0))),Array.from(a,p=>d.setUint8(v++,p.charCodeAt(0))),Array.from(o,p=>d.setUint8(v++,p.charCodeAt(0)));var g=new Uint8Array(f.byteLength+h.byteLength);return g.set(new Uint8Array(f),0),g.set(new Uint8Array(h),f.byteLength),g.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,s,a,o,u]=n;return r({join_ref:i,ref:s,topic:a,event:o,payload:u})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(e,r,i);case this.KINDS.reply:return this._decodeReply(e,r,i);case this.KINDS.broadcast:return this._decodeBroadcast(e,r,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodePush(e,r,n){const i=r.getUint8(1),s=r.getUint8(2),a=r.getUint8(3);let o=this.HEADER_LENGTH+this.META_LENGTH-1;const u=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+s));o=o+s;const h=n.decode(e.slice(o,o+a));o=o+a;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{join_ref:u,ref:null,topic:l,event:h,payload:c}}_decodeReply(e,r,n){const i=r.getUint8(1),s=r.getUint8(2),a=r.getUint8(3),o=r.getUint8(4);let u=this.HEADER_LENGTH+this.META_LENGTH;const l=n.decode(e.slice(u,u+i));u=u+i;const h=n.decode(e.slice(u,u+s));u=u+s;const c=n.decode(e.slice(u,u+a));u=u+a;const f=n.decode(e.slice(u,u+o));u=u+o;const d=JSON.parse(n.decode(e.slice(u,e.byteLength))),v={status:f,response:d};return{join_ref:l,ref:h,topic:c,event:Ne.reply,payload:v}}_decodeBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+i));a=a+i;const u=n.decode(e.slice(a,a+s));a=a+s;const l=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{join_ref:null,ref:null,topic:o,event:u,payload:l}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2),a=r.getUint8(3),o=r.getUint8(4);let u=this.HEADER_LENGTH+4;const l=n.decode(e.slice(u,u+i));u=u+i;const h=n.decode(e.slice(u,u+s));u=u+s;const c=n.decode(e.slice(u,u+a));u=u+a;const f=e.slice(u,e.byteLength),d=o===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,v={type:this.BROADCAST,event:h,payload:d};return a>0&&(v.meta=JSON.parse(c)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST,payload:v}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class lh{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Y;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Y||(Y={}));const Vo=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=Bg(a,t,e,i),s),{}):{}},Bg=(t,e,r,n)=>{const i=e.find(o=>o.name===t),s=i==null?void 0:i.type,a=r[t];return s&&!n.includes(s)?ch(s,a):Fs(a)},ch=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Kg(e,r)}switch(t){case Y.bool:return Hg(e);case Y.float4:case Y.float8:case Y.int2:case Y.int4:case Y.int8:case Y.numeric:case Y.oid:return Wg(e);case Y.json:case Y.jsonb:return Gg(e);case Y.timestamp:return Vg(e);case Y.abstime:case Y.date:case Y.daterange:case Y.int4range:case Y.int8range:case Y.money:case Y.reltime:case Y.text:case Y.time:case Y.timestamptz:case Y.timetz:case Y.tsrange:case Y.tstzrange:return Fs(e);default:return Fs(e)}},Fs=t=>t,Hg=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Wg=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Gg=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Kg=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const a=t.slice(1,r);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>ch(e,o))}return t},Vg=t=>typeof t=="string"?t.replace(" ","T"):t,hh=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ji{constructor(e,r,n={},i=Ls){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zo;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(zo||(zo={}));class hn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hn.syncState(this.state,i,s,a),this.pendingDiffs.forEach(u=>{this.state=hn.syncDiff(this.state,u,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=hn.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),a=this.transformState(r),o={},u={};return this.map(s,(l,h)=>{a[l]||(u[l]=h)}),this.map(a,(l,h)=>{const c=s[l];if(c){const f=h.map(p=>p.presence_ref),d=c.map(p=>p.presence_ref),v=h.filter(p=>d.indexOf(p.presence_ref)<0),g=c.filter(p=>f.indexOf(p.presence_ref)<0);v.length>0&&(o[l]=v),g.length>0&&(u[l]=g)}else o[l]=h}),this.syncDiff(s,{joins:o,leaves:u},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(o,u)=>{var l;const h=(l=e[o])!==null&&l!==void 0?l:[];if(e[o]=this.cloneDeep(u),h.length>0){const c=e[o].map(d=>d.presence_ref),f=h.filter(d=>c.indexOf(d.presence_ref)<0);e[o].unshift(...f)}n(o,h,u)}),this.map(a,(o,u)=>{let l=e[o];if(!l)return;const h=u.map(c=>c.presence_ref);l=l.filter(c=>h.indexOf(c.presence_ref)<0),e[o]=l,i(o,l,u),l.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jo;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jo||(Jo={}));var fn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fn||(fn={}));var rt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(rt||(rt={}));class $a{constructor(e,r={config:{}},n){var i,s;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ji(this,Ne.join,this.params,this.timeout),this.rejoinTimer=new lh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=le.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ne.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new hn(this),this.broadcastEndpointURL=hh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==le.closed){const{config:{broadcast:a,presence:o,private:u}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[fn.PRESENCE]&&this.bindings[fn.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,c={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:l,private:u};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(d=>e==null?void 0:e(rt.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(rt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var v;if(this.socket.setAuth(),d===void 0){e==null||e(rt.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,p=(v=g==null?void 0:g.length)!==null&&v!==void 0?v:0,m=[];for(let b=0;b<p;b++){const _=g[b],{filter:{event:w,schema:T,table:S,filter:$}}=_,R=d&&d[b];if(R&&R.event===w&&R.schema===T&&R.table===S&&R.filter===$)m.push(Object.assign(Object.assign({},_),{id:R.id}));else{this.unsubscribe(),this.state=le.errored,e==null||e(rt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(rt.SUBSCRIBED);return}}).receive("error",d=>{this.state=le.errored,e==null||e(rt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(rt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===le.joined&&e===fn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let u=o.statusText;try{const l=await o.json();u=l.error||l.message||u}catch{}return Promise.reject(new Error(u))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,u;const l=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),l.receive("ok",()=>s("ok")),l.receive("error",()=>s("error")),l.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=le.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ne.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Ji(this,Ne.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=le.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ji(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>qg){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:u,leave:l,join:h}=Ne;if(n&&[o,u,l,h].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(d=>{var v,g,p;return((v=d.filter)===null||v===void 0?void 0:v.event)==="*"||((p=(g=d.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===a}).map(d=>d.callback(f,n)):(s=this.bindings[a])===null||s===void 0||s.filter(d=>{var v,g,p,m,b,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in d){const w=d.id,T=(v=d.filter)===null||v===void 0?void 0:v.event;return w&&((g=r.ids)===null||g===void 0?void 0:g.includes(w))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const w=(b=(m=d==null?void 0:d.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return w==="*"||w===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return d.type.toLocaleLowerCase()===a}).map(d=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:g,table:p,commit_timestamp:m,type:b,errors:_}=v;f=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:m,eventType:b,new:{},old:{},errors:_}),this._getPayloadRecords(v))}d.callback(f,n)})}_isClosed(){return this.state===le.closed}_isJoined(){return this.state===le.joined}_isJoining(){return this.state===le.joining}_isLeaving(){return this.state===le.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&$a.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ne.close,{},e)}_onError(e){this._on(Ne.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Vo(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Vo(e.columns,e.old_record)),r}}const Qi=()=>{},Vn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zg=[1e3,2e3,5e3,1e4],Jg=1e4,Qg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Yg{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ls,this.transport=null,this.heartbeatIntervalMs=Vn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qi,this.ref=0,this.reconnectTimer=null,this.vsn=Ko,this.logger=Qi,this.conn=null,this.sendBuffer=[],this.serializer=new Fg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${qs.websocket}`,this.httpEndpoint=hh(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Mg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ft.connecting:return Bt.Connecting;case Ft.open:return Bt.Open;case Ft.closing:return Bt.Closing;default:return Bt.Closed}}isConnected(){return this.connectionState()===Bt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new $a(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var u;(u=this.conn)===null||u===void 0||u.send(o)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Lg,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Vn.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:a}=r,o=a?`(${a})`:"",u=s.status||"";this.log("receive",`${u} ${n} ${i} ${o}`.trim(),s),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(i,s,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ft.open||this.conn.readyState===Ft.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ne.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Qg],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Ug};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ne.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new lh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Vn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,a,o,u,l,h,c,f,d;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Ls,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Vn.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Qi,this.vsn=(u=e==null?void 0:e.vsn)!==null&&u!==void 0?u:Ko,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:v=>zg[v-1]||Jg,this.vsn){case uh:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(v,g)=>g(JSON.stringify(v)),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:(v,g)=>g(JSON.parse(v));break;case Dg:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Aa extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Xg extends Aa{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Bs extends Aa{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const ka=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Zg=()=>Response,Hs=t=>{if(Array.isArray(t))return t.map(r=>Hs(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Hs(n)}),e},ep=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Yi=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},tp=(t,e,r)=>x(void 0,void 0,void 0,function*(){const n=yield Zg();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const s=t.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new Xg(Yi(i),s,a))}).catch(i=>{e(new Bs(Yi(i),i))}):e(new Bs(Yi(t),t))}),rp=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(ep(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function Rn(t,e,r,n,i,s){return x(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,rp(e,n,i,s)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>tp(u,o,n))})})}function vn(t,e,r,n){return x(this,void 0,void 0,function*(){return Rn(t,"GET",e,r,n)})}function Be(t,e,r,n,i){return x(this,void 0,void 0,function*(){return Rn(t,"POST",e,n,i,r)})}function Ws(t,e,r,n,i){return x(this,void 0,void 0,function*(){return Rn(t,"PUT",e,n,i,r)})}function np(t,e,r,n){return x(this,void 0,void 0,function*(){return Rn(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Pa(t,e,r,n,i){return x(this,void 0,void 0,function*(){return Rn(t,"DELETE",e,n,i,r)})}class ip{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return x(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ne(e))return{data:null,error:e};throw e}})}}var fh;class sp{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[fh]="BlobDownloadBuilder",this.promise=null}asStream(){return new ip(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return x(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ne(e))return{data:null,error:e};throw e}})}}fh=Symbol.toStringTag;const ap={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class op{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=ka(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return x(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Qo),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),u&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(u))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,u&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const l=this._removeEmptyFolders(r),h=this._getFinalPath(l),c=yield(e=="PUT"?Ws:Be)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:l,id:c.Id,fullPath:c.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}upload(e,r,n){return x(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return x(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let u;const l=Object.assign({upsert:Qo.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",l.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",l.cacheControl)):(u=n,h["cache-control"]=`max-age=${l.cacheControl}`,h["content-type"]=l.contentType);const c=yield Ws(this.fetch,o.toString(),u,{headers:h});return{data:{path:s,fullPath:c.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(ne(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,r){return x(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const s=yield Be(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new Aa("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}update(e,r,n){return x(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return x(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}copy(e,r,n){return x(this,void 0,void 0,function*(){try{return{data:{path:(yield Be(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return x(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Be(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return x(this,void 0,void 0,function*(){try{const i=yield Be(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(e),u=()=>vn(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new sp(u,this.shouldThrowOnError)}info(e){return x(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield vn(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Hs(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}exists(e){return x(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield np(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n)&&n instanceof Bs){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&i.push(u);let l=i.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${l}`)}}}remove(e){return x(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}list(e,r,n){return x(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},ap),r),{prefix:e||""});return{data:yield Be(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}listV2(e,r){return x(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Be(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const dh="2.81.1",gh={"X-Client-Info":`storage-js/${dh}`};class up{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gh),r),this.fetch=ka(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return x(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield vn(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}getBucket(e){return x(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}createBucket(e){return x(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Be(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return x(this,void 0,void 0,function*(){try{return{data:yield Ws(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}emptyBucket(e){return x(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}deleteBucket(e){return x(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class lp{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gh),r),this.fetch=ka(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return x(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}listBuckets(e){return x(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield vn(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}deleteBucket(e){return x(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}}const xa={"X-Client-Info":`storage-js/${dh}`,"Content-Type":"application/json"};class ph extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ke(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Xi extends ph{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cp extends ph{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Yo;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Yo||(Yo={}));const Ca=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),hp=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Xo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fp=(t,e,r)=>x(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new Xi(Xo(a),i,o))}).catch(()=>{const a=i+"",o=s.statusText||`HTTP ${i} error`;e(new Xi(o,i,a))});else{const a=i+"",o=s.statusText||`HTTP ${i} error`;e(new Xi(o,i,a))}}else e(new cp(Xo(t),t))}),dp=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(hp(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function gp(t,e,r,n,i,s){return x(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,dp(e,n,i,s)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;const l=u.headers.get("content-type");return!l||!l.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>fp(u,o,n))})})}function Pe(t,e,r,n,i){return x(this,void 0,void 0,function*(){return gp(t,"POST",e,n,i,r)})}class pp{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xa),r),this.fetch=Ca(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return x(this,void 0,void 0,function*(){try{return{data:(yield Pe(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}getIndex(e,r){return x(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n))return{data:null,error:n};throw n}})}listIndexes(e){return x(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return x(this,void 0,void 0,function*(){try{return{data:(yield Pe(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ke(n))return{data:null,error:n};throw n}})}}class vp{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xa),r),this.fetch=Ca(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return x(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Pe(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}getVectors(e){return x(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}listVectors(e){return x(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Pe(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}queryVectors(e){return x(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}deleteVectors(e){return x(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Pe(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}}class yp{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xa),r),this.fetch=Ca(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return x(this,void 0,void 0,function*(){try{return{data:(yield Pe(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}getBucket(e){return x(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}listBuckets(){return x(this,arguments,void 0,function*(e={}){try{return{data:yield Pe(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}deleteBucket(e){return x(this,void 0,void 0,function*(){try{return{data:(yield Pe(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ke(r))return{data:null,error:r};throw r}})}}class mp extends yp{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new _p(this.url,this.headers,e,this.fetch)}}class _p extends pp{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return x(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return x(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return x(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return x(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new wp(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class wp extends vp{constructor(e,r,n,i,s){super(e,r,s),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return x(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return x(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return x(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return x(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return x(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class bp extends up{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new op(this.url,this.headers,e,this.fetch)}get vectors(){return new mp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lp(this.url+"/iceberg",this.headers,this.fetch)}}const Sp="2.81.1";let cn="";typeof Deno<"u"?cn="deno":typeof document<"u"?cn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cn="react-native":cn="node";const Tp={"X-Client-Info":`supabase-js-${cn}/${Sp}`},Ep={headers:Tp},Op={schema:"public"},$p={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ap={},kp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Pp=()=>Headers,xp=(t,e,r)=>{const n=kp(r),i=Pp();return async(s,a)=>{var o;const u=(o=await e())!==null&&o!==void 0?o:t;let l=new i(a==null?void 0:a.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${u}`),n(s,Object.assign(Object.assign({},a),{headers:l}))}};function Cp(t){return t.endsWith("/")?t:t+"/"}function Rp(t,e){var r,n;const{db:i,auth:s,realtime:a,global:o}=t,{db:u,auth:l,realtime:h,global:c}=e,f={db:Object.assign(Object.assign({},u),i),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},c),o),{headers:Object.assign(Object.assign({},(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function jp(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Cp(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const vh="2.81.1",_r=30*1e3,Gs=3,Zi=Gs*_r,Ip="http://localhost:9999",Mp="supabase.auth.token",Np={"X-Client-Info":`gotrue-js/${vh}`},Ks="X-Supabase-Api-Version",yh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Up=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Dp=10*60*1e3;class yn extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function j(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Lp extends yn{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function qp(t){return j(t)&&t.name==="AuthApiError"}class Ht extends yn{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class kt extends yn{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class qe extends kt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Fp(t){return j(t)&&t.name==="AuthSessionMissingError"}class dr extends kt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zn extends kt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jn extends kt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Bp(t){return j(t)&&t.name==="AuthImplicitGrantRedirectError"}class Zo extends kt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vs extends kt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function es(t){return j(t)&&t.name==="AuthRetryableFetchError"}class eu extends kt{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class zs extends kt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tu=` 	
\r=`.split(""),Hp=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<tu.length;e+=1)t[tu[e].charCodeAt(0)]=-2;for(let e=0;e<si.length;e+=1)t[si[e].charCodeAt(0)]=e;return t})();function ru(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(si[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(si[n]),e.queuedBits-=6}}function mh(t,e,r){const n=Hp[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function nu(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{Kp(a,n,r)};for(let a=0;a<t.length;a+=1)mh(t.charCodeAt(a),i,s);return e.join("")}function Wp(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Gp(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Wp(n,e)}}function Kp(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Tr(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)mh(t.charCodeAt(i),r,n);return new Uint8Array(e)}function Vp(t){const e=[];return Gp(t,r=>e.push(r)),new Uint8Array(e)}function Gt(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>ru(i,r,n)),ru(null,r,n),e.join("")}function zp(t){return Math.round(Date.now()/1e3)+t}function Jp(){return Symbol("auth-callback")}const ge=()=>typeof window<"u"&&typeof document<"u",Mt={tested:!1,writable:!1},_h=()=>{if(!ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mt.tested)return Mt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Mt.tested=!0,Mt.writable=!0}catch{Mt.tested=!0,Mt.writable=!1}return Mt.writable};function Qp(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const wh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Yp=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",wr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Nt=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},gt=async(t,e)=>{await t.removeItem(e)};class ki{constructor(){this.promise=new ki.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}ki.promiseConstructor=Promise;function ts(t){const e=t.split(".");if(e.length!==3)throw new zs("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Up.test(e[n]))throw new zs("JWT not in base64url format");return{header:JSON.parse(nu(e[0])),payload:JSON.parse(nu(e[1])),signature:Tr(e[2]),raw:{header:e[0],payload:e[1]}}}async function Xp(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Zp(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){n(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function e0(t){return("0"+t.toString(16)).substr(-2)}function t0(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,e0).join("")}async function r0(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function n0(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await r0(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gr(t,e,r=!1){const n=t0();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await wr(t,`${e}-code-verifier`,i);const s=await n0(n);return[s,n===s?"plain":"s256"]}const i0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function s0(t){const e=t.headers.get(Ks);if(!e||!e.match(i0))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function a0(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function o0(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const u0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pr(t){if(!u0.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rs(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function l0(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function iu(t){return JSON.parse(JSON.stringify(t))}const Ut=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),c0=[502,503,504];async function su(t){var e;if(!Yp(t))throw new Vs(Ut(t),0);if(c0.includes(t.status))throw new Vs(Ut(t),t.status);let r;try{r=await t.json()}catch(s){throw new Ht(Ut(s),s)}let n;const i=s0(t);if(i&&i.getTime()>=yh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new eu(Ut(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new qe}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new eu(Ut(r),t.status,r.weak_password.reasons);throw new Lp(Ut(r),t.status||500,n)}const h0=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function M(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[Ks]||(s[Ks]=yh["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await f0(t,e,r+o,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function f0(t,e,r,n,i,s){const a=h0(e,n,i,s);let o;try{o=await t(r,Object.assign({},a))}catch(u){throw console.error(u),new Vs(Ut(u),0)}if(o.ok||await su(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(u){await su(u)}}function Fe(t){var e;let r=null;p0(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=zp(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function au(t){const e=Fe(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function yt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function d0(t){return{data:t,error:null}}function g0(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,a=Br(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},u=Object.assign({},a);return{data:{properties:o,user:u},error:null}}function ou(t){return t}function p0(t){return t.access_token&&t.refresh_token&&t.expires_in}const ns=["global","local","others"];class v0{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=wh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=ns[0]){if(ns.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ns.join(", ")}`);try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(j(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:yt})}catch(n){if(j(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Br(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:g0,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(j(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yt})}catch(r){if(j(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,a,o,u;try{const l={nextPage:null,lastPage:0,total:0},h=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:ou});if(h.error)throw h.error;const c=await h.json(),f=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(u=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return d.length>0&&(d.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(v.split(";")[1].split("=")[1]);l[`${p}Page`]=g}),l.total=parseInt(f)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(l){if(j(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){pr(e);try{return await M(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yt})}catch(r){if(j(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){pr(e);try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:yt})}catch(n){if(j(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){pr(e);try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:yt})}catch(n){if(j(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){pr(e.userId);try{const{data:r,error:n}=await M(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(j(r))return{data:null,error:r};throw r}}async _deleteFactor(e){pr(e.userId),pr(e.id);try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(j(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,s,a,o,u;try{const l={nextPage:null,lastPage:0,total:0},h=await M(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:ou});if(h.error)throw h.error;const c=await h.json(),f=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(u=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return d.length>0&&(d.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(v.split(";")[1].split("=")[1]);l[`${p}Page`]=g}),l.total=parseInt(f)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(l){if(j(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await M(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(j(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await M(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(j(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await M(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(j(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await M(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(j(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await M(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(j(r))return{data:null,error:r};throw r}}}function uu(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const vr={debug:!!(globalThis&&_h()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class y0 extends bh{}async function m0(t,e,r){vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),vr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new y0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(vr.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function _0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Sh(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function w0(t){return parseInt(t,16)}function b0(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function S0(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:u,resources:l,scheme:h,uri:c,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!c)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const d=Sh(t.address),v=h?`${h}://${n}`:n,g=t.statement?`${t.statement}
`:"",p=`${v} wants you to sign in with your Ethereum account:
${d}

${g}`;let m=`URI: ${c}
Version: ${f}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(m+=`
Expiration Time: ${i.toISOString()}`),o&&(m+=`
Not Before: ${o.toISOString()}`),u&&(m+=`
Request ID: ${u}`),l){let b=`
Resources:`;for(const _ of l){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);b+=`
- ${_}`}m+=b}return`${p}
${m}`}class oe extends Error{constructor({message:e,code:r,cause:n,name:i}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class ai extends oe{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function T0({error:t,options:e}){var r,n,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new oe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new oe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new oe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new oe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new oe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new oe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new oe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new oe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Th(a)){if(s.rp.id!==a)return new oe({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new oe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new oe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function E0({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new oe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new oe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Th(n)){if(r.rpId!==n)return new oe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new oe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class O0{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const $0=new O0;function A0(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Br(t,["challenge","user","excludeCredentials"]),s=Tr(e).buffer,a=Object.assign(Object.assign({},r),{id:Tr(r.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const l=n[u];o.excludeCredentials[u]=Object.assign(Object.assign({},l),{id:Tr(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function k0(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Br(t,["challenge","allowCredentials"]),i=Tr(e).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const o=r[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Tr(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function P0(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Gt(new Uint8Array(t.response.attestationObject)),clientDataJSON:Gt(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function x0(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Gt(new Uint8Array(i.authenticatorData)),clientDataJSON:Gt(new Uint8Array(i.clientDataJSON)),signature:Gt(new Uint8Array(i.signature)),userHandle:i.userHandle?Gt(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Th(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function lu(){var t,e;return!!(ge()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function C0(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ai("Browser returned unexpected credential type",e)}:{data:null,error:new ai("Empty credential response",e)}}catch(e){return{data:null,error:T0({error:e,options:t})}}}async function R0(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ai("Browser returned unexpected credential type",e)}:{data:null,error:new ai("Empty credential response",e)}}catch(e){return{data:null,error:E0({error:e,options:t})}}}const j0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},I0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function oi(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))n[s]=a;else if(r(a))n[s]=a;else if(e(a)){const o=n[s];e(o)?n[s]=oi(o,a):n[s]=oi(a)}else n[s]=a}return n}function M0(t,e){return oi(j0,t,e||{})}function N0(t,e){return oi(I0,t,e||{})}class U0{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:o};const u=i??$0.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:l}=a.webauthn.credential_options.publicKey;l.name||(l.name=`${l.id}:${n}`),l.displayName||(l.displayName=l.name)}switch(a.webauthn.type){case"create":{const l=M0(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:h,error:c}=await C0({publicKey:l,signal:u});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:c}}case"request":{const l=N0(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:h,error:c}=await R0(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:l,signal:u}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:c}}}}catch(a){return j(a)?{data:null,error:a}:{data:null,error:new Ht("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new yn("rpId is required for WebAuthn authentication")};try{if(!lu())return{data:null,error:new Ht("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(a){return j(a)?{data:null,error:a}:{data:null,error:new Ht("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new yn("rpId is required for WebAuthn registration")};try{if(!lu())return{data:null,error:new Ht("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(h=>{var c;return(c=h.data)===null||c===void 0?void 0:c.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:o};const{data:u,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:l}}catch(a){return j(a)?{data:null,error:a}:{data:null,error:new Ht("Unexpected error in register",a)}}}}_0();const D0={url:Ip,storageKey:Mp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Np,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function cu(t,e,r){return await r()}const yr={};class mn{get jwks(){var e,r;return(r=(e=yr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){yr[this.storageKey]=Object.assign(Object.assign({},yr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=yr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){yr[this.storageKey]=Object.assign(Object.assign({},yr[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},D0),e);if(this.storageKey=s.storageKey,this.instanceID=(r=mn.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,mn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&ge()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new v0({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=wh(s.fetch),this.lock=s.lock||cu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:ge()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=m0:this.lock=cu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new U0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:_h()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=uu(this.memoryStorage)),ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${vh}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(ge()&&(r=Qp(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ge()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Bp(s)){const u=(e=s.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return j(r)?this._returnResult({error:r}):this._returnResult({error:new Ht("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Fe}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(j(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:h,password:c,options:f}=e;let d=null,v=null;this.flowType==="pkce"&&([d,v]=await gr(this.storage,this.storageKey)),s=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:c,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:d,code_challenge_method:v},xform:Fe})}else if("phone"in e){const{phone:h,password:c,options:f}=e;s=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:c,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Fe})}else throw new zn("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(j(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:a,options:o}=e;r=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:au})}else if("phone"in e){const{phone:s,password:a,options:o}=e;r=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:au})}else throw new zn("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new dr;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(j(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,s,a,o,u,l,h,c,f;let d,v;if("message"in e)d=e.message,v=e.signature;else{const{chain:g,wallet:p,statement:m,options:b}=e;let _;if(ge())if(typeof p=="object")_=p;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")_=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=p}const w=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),T=await _.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Sh(T[0]);let $=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!$){const D=await _.request({method:"eth_chainId"});$=w0(D)}const R={domain:w.host,address:S,statement:m,uri:w.href,version:"1",chainId:$,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=b==null?void 0:b.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(h=b==null?void 0:b.signInWithEthereum)===null||h===void 0?void 0:h.resources};d=S0(R),v=await _.request({method:"personal_sign",params:[b0(d),S]})}try{const{data:g,error:p}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:v},!((c=e.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Fe});if(p)throw p;if(!g||!g.session||!g.user){const m=new dr;return this._returnResult({data:{user:null,session:null},error:m})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:p})}catch(g){if(j(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var r,n,i,s,a,o,u,l,h,c,f,d;let v,g;if("message"in e)v=e.message,g=e.signature;else{const{chain:p,wallet:m,statement:b,options:_}=e;let w;if(ge())if(typeof m=="object")w=m;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))w=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const T=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const S=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),b?{statement:b}:null));let $;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")$=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)$=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)v=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),g=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${T.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((c=(h=_==null?void 0:_.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||c===void 0)&&c.length?["Resources",..._.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const S=await w.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:p,error:m}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Gt(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:Fe});if(m)throw m;if(!p||!p.session||!p.user){const b=new dr;return this._returnResult({data:{user:null,session:null},error:b})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:m})}catch(p){if(j(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async _exchangeCodeForSession(e){const r=await Nt(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:a}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Fe});if(await gt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new dr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(j(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:a}=e,o=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Fe}),{data:u,error:l}=o;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!u||!u.session||!u.user){const h=new dr;return this._returnResult({data:{user:null,session:null},error:h})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:l})}catch(r){if(j(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,s,a;try{if("email"in e){const{email:o,options:u}=e;let l=null,h=null;this.flowType==="pkce"&&([l,h]=await gr(this.storage,this.storageKey));const{error:c}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:l,code_challenge_method:h},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}if("phone"in e){const{phone:o,options:u}=e,{data:l,error:h}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=u==null?void 0:u.data)!==null&&i!==void 0?i:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:h})}throw new zn("You must provide either an email or phone number.")}catch(o){if(j(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Fe});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,l=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(i){if(j(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,s,a;try{let o=null,u=null;this.flowType==="pkce"&&([o,u]=await gr(this.storage,this.storageKey));const l=await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:d0});return!((s=l.data)===null||s===void 0)&&s.url&&ge()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(o){if(j(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new qe;const{error:i}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(j(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:a}=await M(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:a,error:o}=await M(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new zn("You must provide either an email or phone number and a type")}catch(r){if(j(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Nt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Zi:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await Nt(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=rs()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=l0(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yt}):await this._useSession(async r=>{var n,i,s;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qe}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:yt})})}catch(r){if(j(r))return Fp(r)&&(await this._removeSession(),await gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new qe;const a=i.session;let o=null,u=null;this.flowType==="pkce"&&e.email!=null&&([o,u]=await gr(this.storage,this.storageKey));const{data:l,error:h}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:u}),jwt:a.access_token,xform:yt});if(h)throw h;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(j(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qe;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:a}=ts(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{data:o,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:u}=await this._getUser(e.access_token);if(u)throw u;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(j(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:o}=r;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new qe;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(j(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!ge())throw new Jn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Zo("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zo("No code detected.");const{data:b,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:u,token_type:l}=e;if(!s||!o||!a||!l)throw new Jn("No session defined in URL");const h=Math.round(Date.now()/1e3),c=parseInt(o);let f=h+c;u&&(f=parseInt(u));const d=f-h;d*1e3<=_r&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${c}s`);const v=f-c;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,h);const{data:g,error:p}=await this._getUser(s);if(p)throw p;const m={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:c,expires_at:f,refresh_token:a,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(n){if(j(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Nt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({error:s});const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(qp(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=Jp(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await gr(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(j(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(j(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var a,o,u,l,h;const{data:c,error:f}=s;if(f)throw f;const d=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",d,{headers:this.headers,jwt:(h=(l=c.session)===null||l===void 0?void 0:l.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return ge()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(j(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:a,provider:o,token:u,access_token:l,nonce:h}=e,c=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:u,access_token:l,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Fe}),{data:f,error:d}=c;return d?this._returnResult({data:{user:null,session:null},error:d}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new dr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:d}))}catch(i){if(j(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)throw a;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(j(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Zp(async i=>(i>0&&await Xp(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Fe})),(i,s)=>{const a=200*Math.pow(2,i);return s&&es(s)&&Date.now()+a-n<_r})}catch(n){if(this._debug(r,"error",n),j(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ge()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Nt(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Nt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await wr(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:rs()}else if(i&&!i.user&&!i.user){const a=await Nt(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await gt(this.storage,this.storageKey+"-user"),await wr(this.storage,this.storageKey,i)):i.user=rs()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Zi;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Zi}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),es(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new qe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ki;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new qe;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),j(s)){const a={data:null,error:s};return es(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(u){s.push(u)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await wr(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=iu(i);await wr(this.storage,this.storageKey,s)}else{const i=iu(r);await wr(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await gt(this.storage,this.storageKey),await gt(this.storage,this.storageKey+"-code-verifier"),await gt(this.storage,this.storageKey+"-user"),this.userStorage&&await gt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ge()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_r);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/_r);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${_r}ms, refresh threshold is ${Gs} ticks`),i<=Gs&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof bh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ge()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,a]=await gr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):await M(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(j(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:l}=await M(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u==null?void 0:u.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(j(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?P0(e.webauthn.credential_response):x0(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:u}=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:u}))})}catch(r){if(j(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const a=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:A0(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:k0(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(j(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=ts(n.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const l=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await M(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new qe})})}catch(r){if(j(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new qe});const a=await M(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&ge()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new qe});const a=await M(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&ge()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Dp>i)return n;const{data:s,error:a}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(o=>o.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:d,error:v}=await this.getSession();if(v||!d.session)return this._returnResult({data:null,error:v});n=d.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:u}}=ts(n);r!=null&&r.allowExpired||a0(s.exp);const l=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!l){const{error:d}=await this.getUser(n);if(d)throw d;return{data:{claims:s,header:i,signature:a},error:null}}const h=o0(i.alg),c=await crypto.subtle.importKey("jwk",l,h,!0,["verify"]);if(!await crypto.subtle.verify(h,c,a,Vp(`${o}.${u}`)))throw new zs("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(n){if(j(n))return this._returnResult({data:null,error:n});throw n}}}mn.nextInstanceID={};const L0=mn;class q0 extends L0{constructor(e){super(e)}}class F0{constructor(e,r,n){var i,s,a;this.supabaseUrl=e,this.supabaseKey=r;const o=jp(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,l={db:Op,realtime:Ap,auth:Object.assign(Object.assign({},$p),{storageKey:u}),global:Ep},h=Rp(n??{},l);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(c,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=xp(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new Ig(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new bp(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Cg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,storageKey:a,flowType:o,lock:u,debug:l,throwOnError:h},c,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new q0({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,flowType:o,lock:u,debug:l,throwOnError:h,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Yg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const NR=(t,e,r)=>new F0(t,e,r);function B0(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}B0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function Eh(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=Eh(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function UR(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=Eh(t))&&(n&&(n+=" "),n+=e);return n}var H0=Array.isArray,Ee=H0,W0=typeof Ln=="object"&&Ln&&Ln.Object===Object&&Ln,Oh=W0,G0=Oh,K0=typeof self=="object"&&self&&self.Object===Object&&self,V0=G0||K0||Function("return this")(),Ze=V0,z0=Ze,J0=z0.Symbol,jn=J0,hu=jn,$h=Object.prototype,Q0=$h.hasOwnProperty,Y0=$h.toString,rn=hu?hu.toStringTag:void 0;function X0(t){var e=Q0.call(t,rn),r=t[rn];try{t[rn]=void 0;var n=!0}catch{}var i=Y0.call(t);return n&&(e?t[rn]=r:delete t[rn]),i}var Z0=X0,ev=Object.prototype,tv=ev.toString;function rv(t){return tv.call(t)}var nv=rv,fu=jn,iv=Z0,sv=nv,av="[object Null]",ov="[object Undefined]",du=fu?fu.toStringTag:void 0;function uv(t){return t==null?t===void 0?ov:av:du&&du in Object(t)?iv(t):sv(t)}var ht=uv;function lv(t){return t!=null&&typeof t=="object"}var ft=lv,cv=ht,hv=ft,fv="[object Symbol]";function dv(t){return typeof t=="symbol"||hv(t)&&cv(t)==fv}var Gr=dv,gv=Ee,pv=Gr,vv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yv=/^\w*$/;function mv(t,e){if(gv(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||pv(t)?!0:yv.test(t)||!vv.test(t)||e!=null&&t in Object(e)}var Ra=mv;function _v(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Pt=_v;const DR=J(Pt);var wv=ht,bv=Pt,Sv="[object AsyncFunction]",Tv="[object Function]",Ev="[object GeneratorFunction]",Ov="[object Proxy]";function $v(t){if(!bv(t))return!1;var e=wv(t);return e==Tv||e==Ev||e==Sv||e==Ov}var ja=$v;const LR=J(ja);var Av=Ze,kv=Av["__core-js_shared__"],Pv=kv,is=Pv,gu=function(){var t=/[^.]+$/.exec(is&&is.keys&&is.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function xv(t){return!!gu&&gu in t}var Cv=xv,Rv=Function.prototype,jv=Rv.toString;function Iv(t){if(t!=null){try{return jv.call(t)}catch{}try{return t+""}catch{}}return""}var Ah=Iv,Mv=ja,Nv=Cv,Uv=Pt,Dv=Ah,Lv=/[\\^$.*+?()[\]{}|]/g,qv=/^\[object .+?Constructor\]$/,Fv=Function.prototype,Bv=Object.prototype,Hv=Fv.toString,Wv=Bv.hasOwnProperty,Gv=RegExp("^"+Hv.call(Wv).replace(Lv,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Kv(t){if(!Uv(t)||Nv(t))return!1;var e=Mv(t)?Gv:qv;return e.test(Dv(t))}var Vv=Kv;function zv(t,e){return t==null?void 0:t[e]}var Jv=zv,Qv=Vv,Yv=Jv;function Xv(t,e){var r=Yv(t,e);return Qv(r)?r:void 0}var ar=Xv,Zv=ar,ey=Zv(Object,"create"),Pi=ey,pu=Pi;function ty(){this.__data__=pu?pu(null):{},this.size=0}var ry=ty;function ny(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var iy=ny,sy=Pi,ay="__lodash_hash_undefined__",oy=Object.prototype,uy=oy.hasOwnProperty;function ly(t){var e=this.__data__;if(sy){var r=e[t];return r===ay?void 0:r}return uy.call(e,t)?e[t]:void 0}var cy=ly,hy=Pi,fy=Object.prototype,dy=fy.hasOwnProperty;function gy(t){var e=this.__data__;return hy?e[t]!==void 0:dy.call(e,t)}var py=gy,vy=Pi,yy="__lodash_hash_undefined__";function my(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vy&&e===void 0?yy:e,this}var _y=my,wy=ry,by=iy,Sy=cy,Ty=py,Ey=_y;function Kr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Kr.prototype.clear=wy;Kr.prototype.delete=by;Kr.prototype.get=Sy;Kr.prototype.has=Ty;Kr.prototype.set=Ey;var Oy=Kr;function $y(){this.__data__=[],this.size=0}var Ay=$y;function ky(t,e){return t===e||t!==t&&e!==e}var Ia=ky,Py=Ia;function xy(t,e){for(var r=t.length;r--;)if(Py(t[r][0],e))return r;return-1}var xi=xy,Cy=xi,Ry=Array.prototype,jy=Ry.splice;function Iy(t){var e=this.__data__,r=Cy(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():jy.call(e,r,1),--this.size,!0}var My=Iy,Ny=xi;function Uy(t){var e=this.__data__,r=Ny(e,t);return r<0?void 0:e[r][1]}var Dy=Uy,Ly=xi;function qy(t){return Ly(this.__data__,t)>-1}var Fy=qy,By=xi;function Hy(t,e){var r=this.__data__,n=By(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var Wy=Hy,Gy=Ay,Ky=My,Vy=Dy,zy=Fy,Jy=Wy;function Vr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Vr.prototype.clear=Gy;Vr.prototype.delete=Ky;Vr.prototype.get=Vy;Vr.prototype.has=zy;Vr.prototype.set=Jy;var Ci=Vr,Qy=ar,Yy=Ze,Xy=Qy(Yy,"Map"),Ma=Xy,vu=Oy,Zy=Ci,em=Ma;function tm(){this.size=0,this.__data__={hash:new vu,map:new(em||Zy),string:new vu}}var rm=tm;function nm(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var im=nm,sm=im;function am(t,e){var r=t.__data__;return sm(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Ri=am,om=Ri;function um(t){var e=om(this,t).delete(t);return this.size-=e?1:0,e}var lm=um,cm=Ri;function hm(t){return cm(this,t).get(t)}var fm=hm,dm=Ri;function gm(t){return dm(this,t).has(t)}var pm=gm,vm=Ri;function ym(t,e){var r=vm(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var mm=ym,_m=rm,wm=lm,bm=fm,Sm=pm,Tm=mm;function zr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}zr.prototype.clear=_m;zr.prototype.delete=wm;zr.prototype.get=bm;zr.prototype.has=Sm;zr.prototype.set=Tm;var Na=zr,kh=Na,Em="Expected a function";function Ua(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Em);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=t.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(Ua.Cache||kh),r}Ua.Cache=kh;var Ph=Ua;const qR=J(Ph);var Om=Ph,$m=500;function Am(t){var e=Om(t,function(n){return r.size===$m&&r.clear(),n}),r=e.cache;return e}var km=Am,Pm=km,xm=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cm=/\\(\\)?/g,Rm=Pm(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(xm,function(r,n,i,s){e.push(i?s.replace(Cm,"$1"):n||r)}),e}),jm=Rm;function Im(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Da=Im,yu=jn,Mm=Da,Nm=Ee,Um=Gr,mu=yu?yu.prototype:void 0,_u=mu?mu.toString:void 0;function xh(t){if(typeof t=="string")return t;if(Nm(t))return Mm(t,xh)+"";if(Um(t))return _u?_u.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Dm=xh,Lm=Dm;function qm(t){return t==null?"":Lm(t)}var Ch=qm,Fm=Ee,Bm=Ra,Hm=jm,Wm=Ch;function Gm(t,e){return Fm(t)?t:Bm(t,e)?[t]:Hm(Wm(t))}var Rh=Gm,Km=Gr;function Vm(t){if(typeof t=="string"||Km(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var ji=Vm,zm=Rh,Jm=ji;function Qm(t,e){e=zm(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Jm(e[r++])];return r&&r==n?t:void 0}var La=Qm,Ym=La;function Xm(t,e,r){var n=t==null?void 0:Ym(t,e);return n===void 0?r:n}var jh=Xm;const FR=J(jh);function Zm(t){return t==null}var e_=Zm;const BR=J(e_);var t_=ht,r_=Ee,n_=ft,i_="[object String]";function s_(t){return typeof t=="string"||!r_(t)&&n_(t)&&t_(t)==i_}var a_=s_;const HR=J(a_);var o_=ht,u_=ft,l_="[object Number]";function c_(t){return typeof t=="number"||u_(t)&&o_(t)==l_}var Ih=c_;const WR=J(Ih);var h_=Ih;function f_(t){return h_(t)&&t!=+t}var d_=f_;const GR=J(d_);function g_(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=t[n+e];return s}var p_=g_,v_=p_;function y_(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:v_(t,e,r)}var m_=y_,__="\\ud800-\\udfff",w_="\\u0300-\\u036f",b_="\\ufe20-\\ufe2f",S_="\\u20d0-\\u20ff",T_=w_+b_+S_,E_="\\ufe0e\\ufe0f",O_="\\u200d",$_=RegExp("["+O_+__+T_+E_+"]");function A_(t){return $_.test(t)}var Mh=A_;function k_(t){return t.split("")}var P_=k_,Nh="\\ud800-\\udfff",x_="\\u0300-\\u036f",C_="\\ufe20-\\ufe2f",R_="\\u20d0-\\u20ff",j_=x_+C_+R_,I_="\\ufe0e\\ufe0f",M_="["+Nh+"]",Js="["+j_+"]",Qs="\\ud83c[\\udffb-\\udfff]",N_="(?:"+Js+"|"+Qs+")",Uh="[^"+Nh+"]",Dh="(?:\\ud83c[\\udde6-\\uddff]){2}",Lh="[\\ud800-\\udbff][\\udc00-\\udfff]",U_="\\u200d",qh=N_+"?",Fh="["+I_+"]?",D_="(?:"+U_+"(?:"+[Uh,Dh,Lh].join("|")+")"+Fh+qh+")*",L_=Fh+qh+D_,q_="(?:"+[Uh+Js+"?",Js,Dh,Lh,M_].join("|")+")",F_=RegExp(Qs+"(?="+Qs+")|"+q_+L_,"g");function B_(t){return t.match(F_)||[]}var H_=B_,W_=P_,G_=Mh,K_=H_;function V_(t){return G_(t)?K_(t):W_(t)}var z_=V_,J_=m_,Q_=Mh,Y_=z_,X_=Ch;function Z_(t){return function(e){e=X_(e);var r=Q_(e)?Y_(e):void 0,n=r?r[0]:e.charAt(0),i=r?J_(r,1).join(""):e.slice(1);return n[t]()+i}}var ew=Z_,tw=ew,rw=tw("toUpperCase"),nw=rw;const KR=J(nw);function X(t){return function(){return t}}const Bh=Math.cos,ui=Math.sin,Ke=Math.sqrt,li=Math.PI,Ii=2*li,Ys=Math.PI,Xs=2*Ys,Dt=1e-6,iw=Xs-Dt;function Hh(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function sw(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Hh;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class aw{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Hh:sw(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,a){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,u=n-e,l=i-r,h=a-e,c=o-r,f=h*h+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>Dt)if(!(Math.abs(c*u-l*h)>Dt)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let d=n-a,v=i-o,g=u*u+l*l,p=d*d+v*v,m=Math.sqrt(g),b=Math.sqrt(f),_=s*Math.tan((Ys-Math.acos((g+f-p)/(2*m*b)))/2),w=_/b,T=_/m;Math.abs(w-1)>Dt&&this._append`L${e+w*h},${r+w*c}`,this._append`A${s},${s},0,0,${+(c*d>h*v)},${this._x1=e+T*u},${this._y1=r+T*l}`}}arc(e,r,n,i,s,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),u=n*Math.sin(i),l=e+o,h=r+u,c=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${l},${h}`:(Math.abs(this._x1-l)>Dt||Math.abs(this._y1-h)>Dt)&&this._append`L${l},${h}`,n&&(f<0&&(f=f%Xs+Xs),f>iw?this._append`A${n},${n},0,1,${c},${e-o},${r-u}A${n},${n},0,1,${c},${this._x1=l},${this._y1=h}`:f>Dt&&this._append`A${n},${n},0,${+(f>=Ys)},${c},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function qa(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new aw(e)}function Fa(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Wh(t){this._context=t}Wh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Gh(t){return new Wh(t)}function Kh(t){return t[0]}function Vh(t){return t[1]}function ow(t,e){var r=X(!0),n=null,i=Gh,s=null,a=qa(o);t=typeof t=="function"?t:t===void 0?Kh:X(t),e=typeof e=="function"?e:e===void 0?Vh:X(e);function o(u){var l,h=(u=Fa(u)).length,c,f=!1,d;for(n==null&&(s=i(d=a())),l=0;l<=h;++l)!(l<h&&r(c=u[l],l,u))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(c,l,u),+e(c,l,u));if(d)return s=null,d+""||null}return o.x=function(u){return arguments.length?(t=typeof u=="function"?u:X(+u),o):t},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:X(+u),o):e},o.defined=function(u){return arguments.length?(r=typeof u=="function"?u:X(!!u),o):r},o.curve=function(u){return arguments.length?(i=u,n!=null&&(s=i(n)),o):i},o.context=function(u){return arguments.length?(u==null?n=s=null:s=i(n=u),o):n},o}function VR(t,e,r){var n=null,i=X(!0),s=null,a=Gh,o=null,u=qa(l);t=typeof t=="function"?t:t===void 0?Kh:X(+t),e=typeof e=="function"?e:X(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Vh:X(+r);function l(c){var f,d,v,g=(c=Fa(c)).length,p,m=!1,b,_=new Array(g),w=new Array(g);for(s==null&&(o=a(b=u())),f=0;f<=g;++f){if(!(f<g&&i(p=c[f],f,c))===m)if(m=!m)d=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=f-1;v>=d;--v)o.point(_[v],w[v]);o.lineEnd(),o.areaEnd()}m&&(_[f]=+t(p,f,c),w[f]=+e(p,f,c),o.point(n?+n(p,f,c):_[f],r?+r(p,f,c):w[f]))}if(b)return o=null,b+""||null}function h(){return ow().defined(i).curve(a).context(s)}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:X(+c),n=null,l):t},l.x0=function(c){return arguments.length?(t=typeof c=="function"?c:X(+c),l):t},l.x1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:X(+c),l):n},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:X(+c),r=null,l):e},l.y0=function(c){return arguments.length?(e=typeof c=="function"?c:X(+c),l):e},l.y1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:X(+c),l):r},l.lineX0=l.lineY0=function(){return h().x(t).y(e)},l.lineY1=function(){return h().x(t).y(r)},l.lineX1=function(){return h().x(n).y(e)},l.defined=function(c){return arguments.length?(i=typeof c=="function"?c:X(!!c),l):i},l.curve=function(c){return arguments.length?(a=c,s!=null&&(o=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=o=null:o=a(s=c),l):s},l}class zh{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function zR(t){return new zh(t,!0)}function JR(t){return new zh(t,!1)}const uw={draw(t,e){const r=Ke(e/li);t.moveTo(r,0),t.arc(0,0,r,0,Ii)}},QR={draw(t,e){const r=Ke(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Jh=Ke(1/3),lw=Jh*2,YR={draw(t,e){const r=Ke(e/lw),n=r*Jh;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},XR={draw(t,e){const r=Ke(e),n=-r/2;t.rect(n,n,r,r)}},cw=.8908130915292852,Qh=ui(li/10)/ui(7*li/10),hw=ui(Ii/10)*Qh,fw=-Bh(Ii/10)*Qh,ZR={draw(t,e){const r=Ke(e*cw),n=hw*r,i=fw*r;t.moveTo(0,-r),t.lineTo(n,i);for(let s=1;s<5;++s){const a=Ii*s/5,o=Bh(a),u=ui(a);t.lineTo(u*r,-o*r),t.lineTo(o*n-u*i,u*n+o*i)}t.closePath()}},ss=Ke(3),ej={draw(t,e){const r=-Ke(e/(ss*3));t.moveTo(0,r*2),t.lineTo(-ss*r,-r),t.lineTo(ss*r,-r),t.closePath()}},Ce=-.5,Re=Ke(3)/2,Zs=1/Ke(12),dw=(Zs/2+1)*3,tj={draw(t,e){const r=Ke(e/dw),n=r/2,i=r*Zs,s=n,a=r*Zs+r,o=-s,u=a;t.moveTo(n,i),t.lineTo(s,a),t.lineTo(o,u),t.lineTo(Ce*n-Re*i,Re*n+Ce*i),t.lineTo(Ce*s-Re*a,Re*s+Ce*a),t.lineTo(Ce*o-Re*u,Re*o+Ce*u),t.lineTo(Ce*n+Re*i,Ce*i-Re*n),t.lineTo(Ce*s+Re*a,Ce*a-Re*s),t.lineTo(Ce*o+Re*u,Ce*u-Re*o),t.closePath()}};function rj(t,e){let r=null,n=qa(i);t=typeof t=="function"?t:X(t||uw),e=typeof e=="function"?e:X(e===void 0?64:+e);function i(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:X(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:X(+s),i):e},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function ci(){}function hi(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Yh(t){this._context=t}Yh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hi(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hi(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function nj(t){return new Yh(t)}function Xh(t){this._context=t}Xh.prototype={areaStart:ci,areaEnd:ci,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:hi(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ij(t){return new Xh(t)}function Zh(t){this._context=t}Zh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:hi(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function sj(t){return new Zh(t)}function ef(t){this._context=t}ef.prototype={areaStart:ci,areaEnd:ci,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function aj(t){return new ef(t)}function wu(t){return t<0?-1:1}function bu(t,e,r){var n=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(n||i<0&&-0),a=(r-t._y1)/(i||n<0&&-0),o=(s*i+a*n)/(n+i);return(wu(s)+wu(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function Su(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function as(t,e,r){var n=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-n)/3;t._context.bezierCurveTo(n+o,i+o*e,s-o,a-o*r,s,a)}function fi(t){this._context=t}fi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:as(this,this._t0,Su(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,as(this,Su(this,r=bu(this,t,e)),r);break;default:as(this,this._t0,r=bu(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function tf(t){this._context=new rf(t)}(tf.prototype=Object.create(fi.prototype)).point=function(t,e){fi.prototype.point.call(this,e,t)};function rf(t){this._context=t}rf.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,s){this._context.bezierCurveTo(e,t,n,r,s,i)}};function oj(t){return new fi(t)}function uj(t){return new tf(t)}function nf(t){this._context=t}nf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=Tu(t),i=Tu(e),s=0,a=1;a<r;++s,++a)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Tu(t){var e,r=t.length-1,n,i=new Array(r),s=new Array(r),a=new Array(r);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function lj(t){return new nf(t)}function Mi(t,e){this._context=t,this._t=e}Mi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function cj(t){return new Mi(t,.5)}function hj(t){return new Mi(t,0)}function fj(t){return new Mi(t,1)}function _n(t,e){if((a=t.length)>1)for(var r=1,n,i,s=t[e[0]],a,o=s.length;r<a;++r)for(i=s,s=t[e[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Eu(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function gw(t,e){return t[e]}function pw(t){const e=[];return e.key=t,e}function dj(){var t=X([]),e=Eu,r=_n,n=gw;function i(s){var a=Array.from(t.apply(this,arguments),pw),o,u=a.length,l=-1,h;for(const c of s)for(o=0,++l;o<u;++o)(a[o][l]=[0,+n(c,a[o].key,l,s)]).data=c;for(o=0,h=Fa(e(a));o<u;++o)a[h[o]].index=o;return r(a,h),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:X(Array.from(s)),i):t},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:X(+s),i):n},i.order=function(s){return arguments.length?(e=s==null?Eu:typeof s=="function"?s:X(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(r=s??_n,i):r},i}function gj(t,e){if((n=t.length)>0){for(var r,n,i=0,s=t[0].length,a;i<s;++i){for(a=r=0;r<n;++r)a+=t[r][i][1]||0;if(a)for(r=0;r<n;++r)t[r][i][1]/=a}_n(t,e)}}function pj(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,s=n.length;r<s;++r){for(var a=0,o=0;a<i;++a)o+=t[a][r][1]||0;n[r][1]+=n[r][0]=-o/2}_n(t,e)}}function vj(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,s,a;n<s;++n){for(var o=0,u=0,l=0;o<a;++o){for(var h=t[e[o]],c=h[n][1]||0,f=h[n-1][1]||0,d=(c-f)/2,v=0;v<o;++v){var g=t[e[v]],p=g[n][1]||0,m=g[n-1][1]||0;d+=p-m}u+=c,l+=d*c}i[n-1][1]+=i[n-1][0]=r,u&&(r-=l/u)}i[n-1][1]+=i[n-1][0]=r,_n(t,e)}}var vw=Ci;function yw(){this.__data__=new vw,this.size=0}var mw=yw;function _w(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var ww=_w;function bw(t){return this.__data__.get(t)}var Sw=bw;function Tw(t){return this.__data__.has(t)}var Ew=Tw,Ow=Ci,$w=Ma,Aw=Na,kw=200;function Pw(t,e){var r=this.__data__;if(r instanceof Ow){var n=r.__data__;if(!$w||n.length<kw-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Aw(n)}return r.set(t,e),this.size=r.size,this}var xw=Pw,Cw=Ci,Rw=mw,jw=ww,Iw=Sw,Mw=Ew,Nw=xw;function Jr(t){var e=this.__data__=new Cw(t);this.size=e.size}Jr.prototype.clear=Rw;Jr.prototype.delete=jw;Jr.prototype.get=Iw;Jr.prototype.has=Mw;Jr.prototype.set=Nw;var sf=Jr,Uw="__lodash_hash_undefined__";function Dw(t){return this.__data__.set(t,Uw),this}var Lw=Dw;function qw(t){return this.__data__.has(t)}var Fw=qw,Bw=Na,Hw=Lw,Ww=Fw;function di(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Bw;++e<r;)this.add(t[e])}di.prototype.add=di.prototype.push=Hw;di.prototype.has=Ww;var af=di;function Gw(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var of=Gw;function Kw(t,e){return t.has(e)}var uf=Kw,Vw=af,zw=of,Jw=uf,Qw=1,Yw=2;function Xw(t,e,r,n,i,s){var a=r&Qw,o=t.length,u=e.length;if(o!=u&&!(a&&u>o))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var c=-1,f=!0,d=r&Yw?new Vw:void 0;for(s.set(t,e),s.set(e,t);++c<o;){var v=t[c],g=e[c];if(n)var p=a?n(g,v,c,e,t,s):n(v,g,c,t,e,s);if(p!==void 0){if(p)continue;f=!1;break}if(d){if(!zw(e,function(m,b){if(!Jw(d,b)&&(v===m||i(v,m,r,n,s)))return d.push(b)})){f=!1;break}}else if(!(v===g||i(v,g,r,n,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var lf=Xw,Zw=Ze,eb=Zw.Uint8Array,tb=eb;function rb(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var nb=rb;function ib(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Ba=ib,Ou=jn,$u=tb,sb=Ia,ab=lf,ob=nb,ub=Ba,lb=1,cb=2,hb="[object Boolean]",fb="[object Date]",db="[object Error]",gb="[object Map]",pb="[object Number]",vb="[object RegExp]",yb="[object Set]",mb="[object String]",_b="[object Symbol]",wb="[object ArrayBuffer]",bb="[object DataView]",Au=Ou?Ou.prototype:void 0,os=Au?Au.valueOf:void 0;function Sb(t,e,r,n,i,s,a){switch(r){case bb:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case wb:return!(t.byteLength!=e.byteLength||!s(new $u(t),new $u(e)));case hb:case fb:case pb:return sb(+t,+e);case db:return t.name==e.name&&t.message==e.message;case vb:case mb:return t==e+"";case gb:var o=ob;case yb:var u=n&lb;if(o||(o=ub),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;n|=cb,a.set(t,e);var h=ab(o(t),o(e),n,i,s,a);return a.delete(t),h;case _b:if(os)return os.call(t)==os.call(e)}return!1}var Tb=Sb;function Eb(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var cf=Eb,Ob=cf,$b=Ee;function Ab(t,e,r){var n=e(t);return $b(t)?n:Ob(n,r(t))}var kb=Ab;function Pb(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var a=t[r];e(a,r,t)&&(s[i++]=a)}return s}var xb=Pb;function Cb(){return[]}var Rb=Cb,jb=xb,Ib=Rb,Mb=Object.prototype,Nb=Mb.propertyIsEnumerable,ku=Object.getOwnPropertySymbols,Ub=ku?function(t){return t==null?[]:(t=Object(t),jb(ku(t),function(e){return Nb.call(t,e)}))}:Ib,Db=Ub;function Lb(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var qb=Lb,Fb=ht,Bb=ft,Hb="[object Arguments]";function Wb(t){return Bb(t)&&Fb(t)==Hb}var Gb=Wb,Pu=Gb,Kb=ft,hf=Object.prototype,Vb=hf.hasOwnProperty,zb=hf.propertyIsEnumerable,Jb=Pu(function(){return arguments}())?Pu:function(t){return Kb(t)&&Vb.call(t,"callee")&&!zb.call(t,"callee")},Ha=Jb,gi={exports:{}};function Qb(){return!1}var Yb=Qb;gi.exports;(function(t,e){var r=Ze,n=Yb,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?r.Buffer:void 0,u=o?o.isBuffer:void 0,l=u||n;t.exports=l})(gi,gi.exports);var ff=gi.exports,Xb=9007199254740991,Zb=/^(?:0|[1-9]\d*)$/;function e1(t,e){var r=typeof t;return e=e??Xb,!!e&&(r=="number"||r!="symbol"&&Zb.test(t))&&t>-1&&t%1==0&&t<e}var Wa=e1,t1=9007199254740991;function r1(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=t1}var Ga=r1,n1=ht,i1=Ga,s1=ft,a1="[object Arguments]",o1="[object Array]",u1="[object Boolean]",l1="[object Date]",c1="[object Error]",h1="[object Function]",f1="[object Map]",d1="[object Number]",g1="[object Object]",p1="[object RegExp]",v1="[object Set]",y1="[object String]",m1="[object WeakMap]",_1="[object ArrayBuffer]",w1="[object DataView]",b1="[object Float32Array]",S1="[object Float64Array]",T1="[object Int8Array]",E1="[object Int16Array]",O1="[object Int32Array]",$1="[object Uint8Array]",A1="[object Uint8ClampedArray]",k1="[object Uint16Array]",P1="[object Uint32Array]",ee={};ee[b1]=ee[S1]=ee[T1]=ee[E1]=ee[O1]=ee[$1]=ee[A1]=ee[k1]=ee[P1]=!0;ee[a1]=ee[o1]=ee[_1]=ee[u1]=ee[w1]=ee[l1]=ee[c1]=ee[h1]=ee[f1]=ee[d1]=ee[g1]=ee[p1]=ee[v1]=ee[y1]=ee[m1]=!1;function x1(t){return s1(t)&&i1(t.length)&&!!ee[n1(t)]}var C1=x1;function R1(t){return function(e){return t(e)}}var df=R1,pi={exports:{}};pi.exports;(function(t,e){var r=Oh,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,a=s&&r.process,o=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(pi,pi.exports);var j1=pi.exports,I1=C1,M1=df,xu=j1,Cu=xu&&xu.isTypedArray,N1=Cu?M1(Cu):I1,gf=N1,U1=qb,D1=Ha,L1=Ee,q1=ff,F1=Wa,B1=gf,H1=Object.prototype,W1=H1.hasOwnProperty;function G1(t,e){var r=L1(t),n=!r&&D1(t),i=!r&&!n&&q1(t),s=!r&&!n&&!i&&B1(t),a=r||n||i||s,o=a?U1(t.length,String):[],u=o.length;for(var l in t)(e||W1.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||F1(l,u)))&&o.push(l);return o}var K1=G1,V1=Object.prototype;function z1(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||V1;return t===r}var J1=z1;function Q1(t,e){return function(r){return t(e(r))}}var pf=Q1,Y1=pf,X1=Y1(Object.keys,Object),Z1=X1,eS=J1,tS=Z1,rS=Object.prototype,nS=rS.hasOwnProperty;function iS(t){if(!eS(t))return tS(t);var e=[];for(var r in Object(t))nS.call(t,r)&&r!="constructor"&&e.push(r);return e}var sS=iS,aS=ja,oS=Ga;function uS(t){return t!=null&&oS(t.length)&&!aS(t)}var Ni=uS,lS=K1,cS=sS,hS=Ni;function fS(t){return hS(t)?lS(t):cS(t)}var Ka=fS,dS=kb,gS=Db,pS=Ka;function vS(t){return dS(t,pS,gS)}var yS=vS,Ru=yS,mS=1,_S=Object.prototype,wS=_S.hasOwnProperty;function bS(t,e,r,n,i,s){var a=r&mS,o=Ru(t),u=o.length,l=Ru(e),h=l.length;if(u!=h&&!a)return!1;for(var c=u;c--;){var f=o[c];if(!(a?f in e:wS.call(e,f)))return!1}var d=s.get(t),v=s.get(e);if(d&&v)return d==e&&v==t;var g=!0;s.set(t,e),s.set(e,t);for(var p=a;++c<u;){f=o[c];var m=t[f],b=e[f];if(n)var _=a?n(b,m,f,e,t,s):n(m,b,f,t,e,s);if(!(_===void 0?m===b||i(m,b,r,n,s):_)){g=!1;break}p||(p=f=="constructor")}if(g&&!p){var w=t.constructor,T=e.constructor;w!=T&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof T=="function"&&T instanceof T)&&(g=!1)}return s.delete(t),s.delete(e),g}var SS=bS,TS=ar,ES=Ze,OS=TS(ES,"DataView"),$S=OS,AS=ar,kS=Ze,PS=AS(kS,"Promise"),xS=PS,CS=ar,RS=Ze,jS=CS(RS,"Set"),vf=jS,IS=ar,MS=Ze,NS=IS(MS,"WeakMap"),US=NS,ea=$S,ta=Ma,ra=xS,na=vf,ia=US,yf=ht,Qr=Ah,ju="[object Map]",DS="[object Object]",Iu="[object Promise]",Mu="[object Set]",Nu="[object WeakMap]",Uu="[object DataView]",LS=Qr(ea),qS=Qr(ta),FS=Qr(ra),BS=Qr(na),HS=Qr(ia),Lt=yf;(ea&&Lt(new ea(new ArrayBuffer(1)))!=Uu||ta&&Lt(new ta)!=ju||ra&&Lt(ra.resolve())!=Iu||na&&Lt(new na)!=Mu||ia&&Lt(new ia)!=Nu)&&(Lt=function(t){var e=yf(t),r=e==DS?t.constructor:void 0,n=r?Qr(r):"";if(n)switch(n){case LS:return Uu;case qS:return ju;case FS:return Iu;case BS:return Mu;case HS:return Nu}return e});var WS=Lt,us=sf,GS=lf,KS=Tb,VS=SS,Du=WS,Lu=Ee,qu=ff,zS=gf,JS=1,Fu="[object Arguments]",Bu="[object Array]",Qn="[object Object]",QS=Object.prototype,Hu=QS.hasOwnProperty;function YS(t,e,r,n,i,s){var a=Lu(t),o=Lu(e),u=a?Bu:Du(t),l=o?Bu:Du(e);u=u==Fu?Qn:u,l=l==Fu?Qn:l;var h=u==Qn,c=l==Qn,f=u==l;if(f&&qu(t)){if(!qu(e))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new us),a||zS(t)?GS(t,e,r,n,i,s):KS(t,e,u,r,n,i,s);if(!(r&JS)){var d=h&&Hu.call(t,"__wrapped__"),v=c&&Hu.call(e,"__wrapped__");if(d||v){var g=d?t.value():t,p=v?e.value():e;return s||(s=new us),i(g,p,r,n,s)}}return f?(s||(s=new us),VS(t,e,r,n,i,s)):!1}var XS=YS,ZS=XS,Wu=ft;function mf(t,e,r,n,i){return t===e?!0:t==null||e==null||!Wu(t)&&!Wu(e)?t!==t&&e!==e:ZS(t,e,r,n,mf,i)}var Va=mf,eT=sf,tT=Va,rT=1,nT=2;function iT(t,e,r,n){var i=r.length,s=i,a=!n;if(t==null)return!s;for(t=Object(t);i--;){var o=r[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=r[i];var u=o[0],l=t[u],h=o[1];if(a&&o[2]){if(l===void 0&&!(u in t))return!1}else{var c=new eT;if(n)var f=n(l,h,u,t,e,c);if(!(f===void 0?tT(h,l,rT|nT,n,c):f))return!1}}return!0}var sT=iT,aT=Pt;function oT(t){return t===t&&!aT(t)}var _f=oT,uT=_f,lT=Ka;function cT(t){for(var e=lT(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,uT(i)]}return e}var hT=cT;function fT(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var wf=fT,dT=sT,gT=hT,pT=wf;function vT(t){var e=gT(t);return e.length==1&&e[0][2]?pT(e[0][0],e[0][1]):function(r){return r===t||dT(r,t,e)}}var yT=vT;function mT(t,e){return t!=null&&e in Object(t)}var _T=mT,wT=Rh,bT=Ha,ST=Ee,TT=Wa,ET=Ga,OT=ji;function $T(t,e,r){e=wT(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var a=OT(e[n]);if(!(s=t!=null&&r(t,a)))break;t=t[a]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&ET(i)&&TT(a,i)&&(ST(t)||bT(t)))}var AT=$T,kT=_T,PT=AT;function xT(t,e){return t!=null&&PT(t,e,kT)}var CT=xT,RT=Va,jT=jh,IT=CT,MT=Ra,NT=_f,UT=wf,DT=ji,LT=1,qT=2;function FT(t,e){return MT(t)&&NT(e)?UT(DT(t),e):function(r){var n=jT(r,t);return n===void 0&&n===e?IT(r,t):RT(e,n,LT|qT)}}var BT=FT;function HT(t){return t}var Yr=HT;function WT(t){return function(e){return e==null?void 0:e[t]}}var GT=WT,KT=La;function VT(t){return function(e){return KT(e,t)}}var zT=VT,JT=GT,QT=zT,YT=Ra,XT=ji;function ZT(t){return YT(t)?JT(XT(t)):QT(t)}var eE=ZT,tE=yT,rE=BT,nE=Yr,iE=Ee,sE=eE;function aE(t){return typeof t=="function"?t:t==null?nE:typeof t=="object"?iE(t)?rE(t[0],t[1]):tE(t):sE(t)}var xt=aE;function oE(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var uE=oE;function lE(t){return t!==t}var cE=lE;function hE(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var fE=hE,dE=uE,gE=cE,pE=fE;function vE(t,e,r){return e===e?pE(t,e,r):dE(t,gE,r)}var yE=vE,mE=yE;function _E(t,e){var r=t==null?0:t.length;return!!r&&mE(t,e,0)>-1}var wE=_E;function bE(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var SE=bE;function TE(){}var EE=TE,ls=vf,OE=EE,$E=Ba,AE=1/0,kE=ls&&1/$E(new ls([,-0]))[1]==AE?function(t){return new ls(t)}:OE,PE=kE,xE=af,CE=wE,RE=SE,jE=uf,IE=PE,ME=Ba,NE=200;function UE(t,e,r){var n=-1,i=CE,s=t.length,a=!0,o=[],u=o;if(r)a=!1,i=RE;else if(s>=NE){var l=e?null:IE(t);if(l)return ME(l);a=!1,i=jE,u=new xE}else u=e?[]:o;e:for(;++n<s;){var h=t[n],c=e?e(h):h;if(h=r||h!==0?h:0,a&&c===c){for(var f=u.length;f--;)if(u[f]===c)continue e;e&&u.push(c),o.push(h)}else i(u,c,r)||(u!==o&&u.push(c),o.push(h))}return o}var DE=UE,LE=xt,qE=DE;function FE(t,e){return t&&t.length?qE(t,LE(e)):[]}var BE=FE;const yj=J(BE);var Gu=jn,HE=Ha,WE=Ee,Ku=Gu?Gu.isConcatSpreadable:void 0;function GE(t){return WE(t)||HE(t)||!!(Ku&&t&&t[Ku])}var KE=GE,VE=cf,zE=KE;function bf(t,e,r,n,i){var s=-1,a=t.length;for(r||(r=zE),i||(i=[]);++s<a;){var o=t[s];e>0&&r(o)?e>1?bf(o,e-1,r,n,i):VE(i,o):n||(i[i.length]=o)}return i}var Sf=bf;function JE(t){return function(e,r,n){for(var i=-1,s=Object(e),a=n(e),o=a.length;o--;){var u=a[t?o:++i];if(r(s[u],u,s)===!1)break}return e}}var QE=JE,YE=QE,XE=YE(),ZE=XE,eO=ZE,tO=Ka;function rO(t,e){return t&&eO(t,e,tO)}var Tf=rO,nO=Ni;function iO(t,e){return function(r,n){if(r==null)return r;if(!nO(r))return t(r,n);for(var i=r.length,s=e?i:-1,a=Object(r);(e?s--:++s<i)&&n(a[s],s,a)!==!1;);return r}}var sO=iO,aO=Tf,oO=sO,uO=oO(aO),za=uO,lO=za,cO=Ni;function hO(t,e){var r=-1,n=cO(t)?Array(t.length):[];return lO(t,function(i,s,a){n[++r]=e(i,s,a)}),n}var Ef=hO;function fO(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var dO=fO,Vu=Gr;function gO(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,s=Vu(t),a=e!==void 0,o=e===null,u=e===e,l=Vu(e);if(!o&&!l&&!s&&t>e||s&&a&&u&&!o&&!l||n&&a&&u||!r&&u||!i)return 1;if(!n&&!s&&!l&&t<e||l&&r&&i&&!n&&!s||o&&r&&i||!a&&i||!u)return-1}return 0}var pO=gO,vO=pO;function yO(t,e,r){for(var n=-1,i=t.criteria,s=e.criteria,a=i.length,o=r.length;++n<a;){var u=vO(i[n],s[n]);if(u){if(n>=o)return u;var l=r[n];return u*(l=="desc"?-1:1)}}return t.index-e.index}var mO=yO,cs=Da,_O=La,wO=xt,bO=Ef,SO=dO,TO=df,EO=mO,OO=Yr,$O=Ee;function AO(t,e,r){e.length?e=cs(e,function(s){return $O(s)?function(a){return _O(a,s.length===1?s[0]:s)}:s}):e=[OO];var n=-1;e=cs(e,TO(wO));var i=bO(t,function(s,a,o){var u=cs(e,function(l){return l(s)});return{criteria:u,index:++n,value:s}});return SO(i,function(s,a){return EO(s,a,r)})}var kO=AO;function PO(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var xO=PO,CO=xO,zu=Math.max;function RO(t,e,r){return e=zu(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=zu(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=r(a),CO(t,this,o)}}var jO=RO;function IO(t){return function(){return t}}var MO=IO,NO=ar,UO=function(){try{var t=NO(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Of=UO,DO=MO,Ju=Of,LO=Yr,qO=Ju?function(t,e){return Ju(t,"toString",{configurable:!0,enumerable:!1,value:DO(e),writable:!0})}:LO,FO=qO,BO=800,HO=16,WO=Date.now;function GO(t){var e=0,r=0;return function(){var n=WO(),i=HO-(n-r);if(r=n,i>0){if(++e>=BO)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var KO=GO,VO=FO,zO=KO,JO=zO(VO),QO=JO,YO=Yr,XO=jO,ZO=QO;function e$(t,e){return ZO(XO(t,e,YO),t+"")}var t$=e$,r$=Ia,n$=Ni,i$=Wa,s$=Pt;function a$(t,e,r){if(!s$(r))return!1;var n=typeof e;return(n=="number"?n$(r)&&i$(e,r.length):n=="string"&&e in r)?r$(r[e],t):!1}var Ui=a$,o$=Sf,u$=kO,l$=t$,Qu=Ui,c$=l$(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Qu(t,e[0],e[1])?e=[]:r>2&&Qu(e[0],e[1],e[2])&&(e=[e[0]]),u$(t,o$(e,1),[])}),h$=c$;const mj=J(h$);var f$=Ze,d$=function(){return f$.Date.now()},g$=d$,p$=/\s/;function v$(t){for(var e=t.length;e--&&p$.test(t.charAt(e)););return e}var y$=v$,m$=y$,_$=/^\s+/;function w$(t){return t&&t.slice(0,m$(t)+1).replace(_$,"")}var b$=w$,S$=b$,Yu=Pt,T$=Gr,Xu=NaN,E$=/^[-+]0x[0-9a-f]+$/i,O$=/^0b[01]+$/i,$$=/^0o[0-7]+$/i,A$=parseInt;function k$(t){if(typeof t=="number")return t;if(T$(t))return Xu;if(Yu(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Yu(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=S$(t);var r=O$.test(t);return r||$$.test(t)?A$(t.slice(2),r?2:8):E$.test(t)?Xu:+t}var $f=k$,P$=Pt,hs=g$,Zu=$f,x$="Expected a function",C$=Math.max,R$=Math.min;function j$(t,e,r){var n,i,s,a,o,u,l=0,h=!1,c=!1,f=!0;if(typeof t!="function")throw new TypeError(x$);e=Zu(e)||0,P$(r)&&(h=!!r.leading,c="maxWait"in r,s=c?C$(Zu(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f);function d(S){var $=n,R=i;return n=i=void 0,l=S,a=t.apply(R,$),a}function v(S){return l=S,o=setTimeout(m,e),h?d(S):a}function g(S){var $=S-u,R=S-l,D=e-$;return c?R$(D,s-R):D}function p(S){var $=S-u,R=S-l;return u===void 0||$>=e||$<0||c&&R>=s}function m(){var S=hs();if(p(S))return b(S);o=setTimeout(m,g(S))}function b(S){return o=void 0,f&&n?d(S):(n=i=void 0,a)}function _(){o!==void 0&&clearTimeout(o),l=0,n=u=i=o=void 0}function w(){return o===void 0?a:b(hs())}function T(){var S=hs(),$=p(S);if(n=arguments,i=this,u=S,$){if(o===void 0)return v(u);if(c)return clearTimeout(o),o=setTimeout(m,e),d(u)}return o===void 0&&(o=setTimeout(m,e)),a}return T.cancel=_,T.flush=w,T}var I$=j$,M$=I$,N$=Pt,U$="Expected a function";function D$(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(U$);return N$(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),M$(t,e,{leading:n,maxWait:e,trailing:i})}var L$=D$;const _j=J(L$);function At(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function q$(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ja(t){let e,r,n;t.length!==2?(e=At,r=(o,u)=>At(t(o),u),n=(o,u)=>t(o)-u):(e=t===At||t===q$?t:F$,r=t,n=t);function i(o,u,l=0,h=o.length){if(l<h){if(e(u,u)!==0)return h;do{const c=l+h>>>1;r(o[c],u)<0?l=c+1:h=c}while(l<h)}return l}function s(o,u,l=0,h=o.length){if(l<h){if(e(u,u)!==0)return h;do{const c=l+h>>>1;r(o[c],u)<=0?l=c+1:h=c}while(l<h)}return l}function a(o,u,l=0,h=o.length){const c=i(o,u,l,h-1);return c>l&&n(o[c-1],u)>-n(o[c],u)?c-1:c}return{left:i,center:a,right:s}}function F$(){return 0}function Af(t){return t===null?NaN:+t}function*B$(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const H$=Ja(At),In=H$.right;Ja(Af).center;class el extends Map{constructor(e,r=K$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(tl(this,e))}has(e){return super.has(tl(this,e))}set(e,r){return super.set(W$(this,e),r)}delete(e){return super.delete(G$(this,e))}}function tl({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function W$({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function G$({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function K$(t){return t!==null&&typeof t=="object"?t.valueOf():t}function V$(t=At){if(t===At)return kf;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function kf(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const z$=Math.sqrt(50),J$=Math.sqrt(10),Q$=Math.sqrt(2);function vi(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=z$?10:s>=J$?5:s>=Q$?2:1;let o,u,l;return i<0?(l=Math.pow(10,-i)/a,o=Math.round(t*l),u=Math.round(e*l),o/l<t&&++o,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*a,o=Math.round(t/l),u=Math.round(e/l),o*l<t&&++o,u*l>e&&--u),u<o&&.5<=r&&r<2?vi(t,e,r*2):[o,u,l]}function sa(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,s,a]=n?vi(e,t,r):vi(t,e,r);if(!(s>=i))return[];const o=s-i+1,u=new Array(o);if(n)if(a<0)for(let l=0;l<o;++l)u[l]=(s-l)/-a;else for(let l=0;l<o;++l)u[l]=(s-l)*a;else if(a<0)for(let l=0;l<o;++l)u[l]=(i+l)/-a;else for(let l=0;l<o;++l)u[l]=(i+l)*a;return u}function aa(t,e,r){return e=+e,t=+t,r=+r,vi(t,e,r)[2]}function oa(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?aa(e,t,r):aa(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function rl(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function nl(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Pf(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?kf:V$(i);n>r;){if(n-r>600){const u=n-r+1,l=e-r+1,h=Math.log(u),c=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*c*(u-c)/u)*(l-u/2<0?-1:1),d=Math.max(r,Math.floor(e-l*c/u+f)),v=Math.min(n,Math.floor(e+(u-l)*c/u+f));Pf(t,e,d,v,i)}const s=t[e];let a=r,o=n;for(nn(t,r,e),i(t[n],s)>0&&nn(t,r,n);a<o;){for(nn(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[r],s)===0?nn(t,r,o):(++o,nn(t,o,n)),o<=e&&(r=o+1),e<=o&&(n=o-1)}return t}function nn(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Y$(t,e,r){if(t=Float64Array.from(B$(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return nl(t);if(e>=1)return rl(t);var n,i=(n-1)*e,s=Math.floor(i),a=rl(Pf(t,s).subarray(0,s+1)),o=nl(t.subarray(s+1));return a+(o-a)*(i-s)}}function X$(t,e,r=Af){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,s=Math.floor(i),a=+r(t[s],s,t),o=+r(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function Z$(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(i);++n<i;)s[n]=t+n*r;return s}function Le(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function dt(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ua=Symbol("implicit");function Qa(){var t=new el,e=[],r=[],n=ua;function i(s){let a=t.get(s);if(a===void 0){if(n!==ua)return n;t.set(s,a=e.push(s)-1)}return r[a%r.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new el;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Qa(e,r).unknown(n)},Le.apply(i,arguments),i}function Ya(){var t=Qa().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,s,a,o=!1,u=0,l=0,h=.5;delete t.unknown;function c(){var f=e().length,d=i<n,v=d?i:n,g=d?n:i;s=(g-v)/Math.max(1,f-u+l*2),o&&(s=Math.floor(s)),v+=(g-v-s*(f-u))*h,a=s*(1-u),o&&(v=Math.round(v),a=Math.round(a));var p=Z$(f).map(function(m){return v+s*m});return r(d?p.reverse():p)}return t.domain=function(f){return arguments.length?(e(f),c()):e()},t.range=function(f){return arguments.length?([n,i]=f,n=+n,i=+i,c()):[n,i]},t.rangeRound=function(f){return[n,i]=f,n=+n,i=+i,o=!0,c()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(f){return arguments.length?(o=!!f,c()):o},t.padding=function(f){return arguments.length?(u=Math.min(1,l=+f),c()):u},t.paddingInner=function(f){return arguments.length?(u=Math.min(1,f),c()):u},t.paddingOuter=function(f){return arguments.length?(l=+f,c()):l},t.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),c()):h},t.copy=function(){return Ya(e(),[n,i]).round(o).paddingInner(u).paddingOuter(l).align(h)},Le.apply(c(),arguments)}function xf(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return xf(e())},t}function eA(){return xf(Ya.apply(null,arguments).paddingInner(1))}function Xa(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Cf(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Mn(){}var wn=.7,yi=1/wn,Er="\\s*([+-]?\\d+)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tA=/^#([0-9a-f]{3,8})$/,rA=new RegExp(`^rgb\\(${Er},${Er},${Er}\\)$`),nA=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),iA=new RegExp(`^rgba\\(${Er},${Er},${Er},${bn}\\)$`),sA=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${bn}\\)$`),aA=new RegExp(`^hsl\\(${bn},${Ye},${Ye}\\)$`),oA=new RegExp(`^hsla\\(${bn},${Ye},${Ye},${bn}\\)$`),il={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xa(Mn,Sn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:sl,formatHex:sl,formatHex8:uA,formatHsl:lA,formatRgb:al,toString:al});function sl(){return this.rgb().formatHex()}function uA(){return this.rgb().formatHex8()}function lA(){return Rf(this).formatHsl()}function al(){return this.rgb().formatRgb()}function Sn(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=tA.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?ol(e):r===3?new Te(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Yn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Yn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=rA.exec(t))?new Te(e[1],e[2],e[3],1):(e=nA.exec(t))?new Te(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=iA.exec(t))?Yn(e[1],e[2],e[3],e[4]):(e=sA.exec(t))?Yn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=aA.exec(t))?cl(e[1],e[2]/100,e[3]/100,1):(e=oA.exec(t))?cl(e[1],e[2]/100,e[3]/100,e[4]):il.hasOwnProperty(t)?ol(il[t]):t==="transparent"?new Te(NaN,NaN,NaN,0):null}function ol(t){return new Te(t>>16&255,t>>8&255,t&255,1)}function Yn(t,e,r,n){return n<=0&&(t=e=r=NaN),new Te(t,e,r,n)}function cA(t){return t instanceof Mn||(t=Sn(t)),t?(t=t.rgb(),new Te(t.r,t.g,t.b,t.opacity)):new Te}function la(t,e,r,n){return arguments.length===1?cA(t):new Te(t,e,r,n??1)}function Te(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Xa(Te,la,Cf(Mn,{brighter(t){return t=t==null?yi:Math.pow(yi,t),new Te(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?wn:Math.pow(wn,t),new Te(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Te(nr(this.r),nr(this.g),nr(this.b),mi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ul,formatHex:ul,formatHex8:hA,formatRgb:ll,toString:ll}));function ul(){return`#${Kt(this.r)}${Kt(this.g)}${Kt(this.b)}`}function hA(){return`#${Kt(this.r)}${Kt(this.g)}${Kt(this.b)}${Kt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ll(){const t=mi(this.opacity);return`${t===1?"rgb(":"rgba("}${nr(this.r)}, ${nr(this.g)}, ${nr(this.b)}${t===1?")":`, ${t})`}`}function mi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function nr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Kt(t){return t=nr(t),(t<16?"0":"")+t.toString(16)}function cl(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ge(t,e,r,n)}function Rf(t){if(t instanceof Ge)return new Ge(t.h,t.s,t.l,t.opacity);if(t instanceof Mn||(t=Sn(t)),!t)return new Ge;if(t instanceof Ge)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),a=NaN,o=s-i,u=(s+i)/2;return o?(e===s?a=(r-n)/o+(r<n)*6:r===s?a=(n-e)/o+2:a=(e-r)/o+4,o/=u<.5?s+i:2-s-i,a*=60):o=u>0&&u<1?0:a,new Ge(a,o,u,t.opacity)}function fA(t,e,r,n){return arguments.length===1?Rf(t):new Ge(t,e,r,n??1)}function Ge(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Xa(Ge,fA,Cf(Mn,{brighter(t){return t=t==null?yi:Math.pow(yi,t),new Ge(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?wn:Math.pow(wn,t),new Ge(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Te(fs(t>=240?t-240:t+120,i,n),fs(t,i,n),fs(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Ge(hl(this.h),Xn(this.s),Xn(this.l),mi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=mi(this.opacity);return`${t===1?"hsl(":"hsla("}${hl(this.h)}, ${Xn(this.s)*100}%, ${Xn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function hl(t){return t=(t||0)%360,t<0?t+360:t}function Xn(t){return Math.max(0,Math.min(1,t||0))}function fs(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Za=t=>()=>t;function dA(t,e){return function(r){return t+r*e}}function gA(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function pA(t){return(t=+t)==1?jf:function(e,r){return r-e?gA(e,r,t):Za(isNaN(e)?r:e)}}function jf(t,e){var r=e-t;return r?dA(t,r):Za(isNaN(t)?e:t)}const fl=function t(e){var r=pA(e);function n(i,s){var a=r((i=la(i)).r,(s=la(s)).r),o=r(i.g,s.g),u=r(i.b,s.b),l=jf(i.opacity,s.opacity);return function(h){return i.r=a(h),i.g=o(h),i.b=u(h),i.opacity=l(h),i+""}}return n.gamma=t,n}(1);function vA(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=t[i]*(1-s)+e[i]*s;return n}}function yA(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mA(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),s=new Array(r),a;for(a=0;a<n;++a)i[a]=Xr(t[a],e[a]);for(;a<r;++a)s[a]=e[a];return function(o){for(a=0;a<n;++a)s[a]=i[a](o);return s}}function _A(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function _i(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function wA(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=Xr(t[i],e[i]):n[i]=e[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var ca=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ds=new RegExp(ca.source,"g");function bA(t){return function(){return t}}function SA(t){return function(e){return t(e)+""}}function TA(t,e){var r=ca.lastIndex=ds.lastIndex=0,n,i,s,a=-1,o=[],u=[];for(t=t+"",e=e+"";(n=ca.exec(t))&&(i=ds.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,u.push({i:a,x:_i(n,i)})),r=ds.lastIndex;return r<e.length&&(s=e.slice(r),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?SA(u[0].x):bA(e):(e=u.length,function(l){for(var h=0,c;h<e;++h)o[(c=u[h]).i]=c.x(l);return o.join("")})}function Xr(t,e){var r=typeof e,n;return e==null||r==="boolean"?Za(e):(r==="number"?_i:r==="string"?(n=Sn(e))?(e=n,fl):TA:e instanceof Sn?fl:e instanceof Date?_A:yA(e)?vA:Array.isArray(e)?mA:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?wA:_i)(t,e)}function eo(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function EA(t,e){e===void 0&&(e=t,t=Xr);for(var r=0,n=e.length-1,i=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(i,i=e[++r]);return function(a){var o=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return s[o](a-o)}}function OA(t){return function(){return t}}function wi(t){return+t}var dl=[0,1];function we(t){return t}function ha(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:OA(isNaN(e)?NaN:.5)}function $A(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function AA(t,e,r){var n=t[0],i=t[1],s=e[0],a=e[1];return i<n?(n=ha(i,n),s=r(a,s)):(n=ha(n,i),s=r(s,a)),function(o){return s(n(o))}}function kA(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),s=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=ha(t[a],t[a+1]),s[a]=r(e[a],e[a+1]);return function(o){var u=In(t,o,1,n)-1;return s[u](i[u](o))}}function Nn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Di(){var t=dl,e=dl,r=Xr,n,i,s,a=we,o,u,l;function h(){var f=Math.min(t.length,e.length);return a!==we&&(a=$A(t[0],t[f-1])),o=f>2?kA:AA,u=l=null,c}function c(f){return f==null||isNaN(f=+f)?s:(u||(u=o(t.map(n),e,r)))(n(a(f)))}return c.invert=function(f){return a(i((l||(l=o(e,t.map(n),_i)))(f)))},c.domain=function(f){return arguments.length?(t=Array.from(f,wi),h()):t.slice()},c.range=function(f){return arguments.length?(e=Array.from(f),h()):e.slice()},c.rangeRound=function(f){return e=Array.from(f),r=eo,h()},c.clamp=function(f){return arguments.length?(a=f?!0:we,h()):a!==we},c.interpolate=function(f){return arguments.length?(r=f,h()):r},c.unknown=function(f){return arguments.length?(s=f,c):s},function(f,d){return n=f,i=d,h()}}function to(){return Di()(we,we)}function PA(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function bi(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Lr(t){return t=bi(Math.abs(t)),t?t[1]:NaN}function xA(t,e){return function(r,n){for(var i=r.length,s=[],a=0,o=t[0],u=0;i>0&&o>0&&(u+o+1>n&&(o=Math.max(1,n-u)),s.push(r.substring(i-=o,i+o)),!((u+=o+1)>n));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function CA(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var RA=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tn(t){if(!(e=RA.exec(t)))throw new Error("invalid format: "+t);var e;return new ro({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Tn.prototype=ro.prototype;function ro(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ro.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jA(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var If;function IA(t,e){var r=bi(t,e);if(!r)return t+"";var n=r[0],i=r[1],s=i-(If=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+bi(t,Math.max(0,e+s-1))[0]}function gl(t,e){var r=bi(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const pl={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:PA,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gl(t*100,e),r:gl,s:IA,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vl(t){return t}var yl=Array.prototype.map,ml=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MA(t){var e=t.grouping===void 0||t.thousands===void 0?vl:xA(yl.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?vl:CA(yl.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(c){c=Tn(c);var f=c.fill,d=c.align,v=c.sign,g=c.symbol,p=c.zero,m=c.width,b=c.comma,_=c.precision,w=c.trim,T=c.type;T==="n"?(b=!0,T="g"):pl[T]||(_===void 0&&(_=12),w=!0,T="g"),(p||f==="0"&&d==="=")&&(p=!0,f="0",d="=");var S=g==="$"?r:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",$=g==="$"?n:/[%p]/.test(T)?a:"",R=pl[T],D=/[defgprs%]/.test(T);_=_===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function Z(C){var L=S,se=$,ye,Oe,O;if(T==="c")se=R(C)+se,C="";else{C=+C;var U=C<0||1/C<0;if(C=isNaN(C)?u:R(Math.abs(C),_),w&&(C=jA(C)),U&&+C==0&&v!=="+"&&(U=!1),L=(U?v==="("?v:o:v==="-"||v==="("?"":v)+L,se=(T==="s"?ml[8+If/3]:"")+se+(U&&v==="("?")":""),D){for(ye=-1,Oe=C.length;++ye<Oe;)if(O=C.charCodeAt(ye),48>O||O>57){se=(O===46?i+C.slice(ye+1):C.slice(ye))+se,C=C.slice(0,ye);break}}}b&&!p&&(C=e(C,1/0));var N=L.length+C.length+se.length,H=N<m?new Array(m-N+1).join(f):"";switch(b&&p&&(C=e(H+C,H.length?m-se.length:1/0),H=""),d){case"<":C=L+C+se+H;break;case"=":C=L+H+C+se;break;case"^":C=H.slice(0,N=H.length>>1)+L+C+se+H.slice(N);break;default:C=H+L+C+se;break}return s(C)}return Z.toString=function(){return c+""},Z}function h(c,f){var d=l((c=Tn(c),c.type="f",c)),v=Math.max(-8,Math.min(8,Math.floor(Lr(f)/3)))*3,g=Math.pow(10,-v),p=ml[8+v/3];return function(m){return d(g*m)+p}}return{format:l,formatPrefix:h}}var Zn,no,Mf;NA({thousands:",",grouping:[3],currency:["$",""]});function NA(t){return Zn=MA(t),no=Zn.format,Mf=Zn.formatPrefix,Zn}function UA(t){return Math.max(0,-Lr(Math.abs(t)))}function DA(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lr(e)/3)))*3-Lr(Math.abs(t)))}function LA(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Lr(e)-Lr(t))+1}function Nf(t,e,r,n){var i=oa(t,e,r),s;switch(n=Tn(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=DA(i,a))&&(n.precision=s),Mf(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=LA(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=UA(i))&&(n.precision=s-(n.type==="%")*2);break}}return no(n)}function Ct(t){var e=t.domain;return t.ticks=function(r){var n=e();return sa(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return Nf(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,s=n.length-1,a=n[i],o=n[s],u,l,h=10;for(o<a&&(l=a,a=o,o=l,l=i,i=s,s=l);h-- >0;){if(l=aa(a,o,r),l===u)return n[i]=a,n[s]=o,e(n);if(l>0)a=Math.floor(a/l)*l,o=Math.ceil(o/l)*l;else if(l<0)a=Math.ceil(a*l)/l,o=Math.floor(o*l)/l;else break;u=l}return t},t}function Uf(){var t=to();return t.copy=function(){return Nn(t,Uf())},Le.apply(t,arguments),Ct(t)}function Df(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,wi),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return Df(t).unknown(e)},t=arguments.length?Array.from(t,wi):[0,1],Ct(r)}function Lf(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],s=t[n],a;return s<i&&(a=r,r=n,n=a,a=i,i=s,s=a),t[r]=e.floor(i),t[n]=e.ceil(s),t}function _l(t){return Math.log(t)}function wl(t){return Math.exp(t)}function qA(t){return-Math.log(-t)}function FA(t){return-Math.exp(-t)}function BA(t){return isFinite(t)?+("1e"+t):t<0?0:t}function HA(t){return t===10?BA:t===Math.E?Math.exp:e=>Math.pow(t,e)}function WA(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function bl(t){return(e,r)=>-t(-e,r)}function io(t){const e=t(_l,wl),r=e.domain;let n=10,i,s;function a(){return i=WA(n),s=HA(n),r()[0]<0?(i=bl(i),s=bl(s),t(qA,FA)):t(_l,wl),e}return e.base=function(o){return arguments.length?(n=+o,a()):n},e.domain=function(o){return arguments.length?(r(o),a()):r()},e.ticks=o=>{const u=r();let l=u[0],h=u[u.length-1];const c=h<l;c&&([l,h]=[h,l]);let f=i(l),d=i(h),v,g;const p=o==null?10:+o;let m=[];if(!(n%1)&&d-f<p){if(f=Math.floor(f),d=Math.ceil(d),l>0){for(;f<=d;++f)for(v=1;v<n;++v)if(g=f<0?v/s(-f):v*s(f),!(g<l)){if(g>h)break;m.push(g)}}else for(;f<=d;++f)for(v=n-1;v>=1;--v)if(g=f>0?v/s(-f):v*s(f),!(g<l)){if(g>h)break;m.push(g)}m.length*2<p&&(m=sa(l,h,p))}else m=sa(f,d,Math.min(d-f,p)).map(s);return c?m.reverse():m},e.tickFormat=(o,u)=>{if(o==null&&(o=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=Tn(u)).precision==null&&(u.trim=!0),u=no(u)),o===1/0)return u;const l=Math.max(1,n*o/e.ticks().length);return h=>{let c=h/s(Math.round(i(h)));return c*n<n-.5&&(c*=n),c<=l?u(h):""}},e.nice=()=>r(Lf(r(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function qf(){const t=io(Di()).domain([1,10]);return t.copy=()=>Nn(t,qf()).base(t.base()),Le.apply(t,arguments),t}function Sl(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Tl(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function so(t){var e=1,r=t(Sl(e),Tl(e));return r.constant=function(n){return arguments.length?t(Sl(e=+n),Tl(e)):e},Ct(r)}function Ff(){var t=so(Di());return t.copy=function(){return Nn(t,Ff()).constant(t.constant())},Le.apply(t,arguments)}function El(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function GA(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function KA(t){return t<0?-t*t:t*t}function ao(t){var e=t(we,we),r=1;function n(){return r===1?t(we,we):r===.5?t(GA,KA):t(El(r),El(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Ct(e)}function oo(){var t=ao(Di());return t.copy=function(){return Nn(t,oo()).exponent(t.exponent())},Le.apply(t,arguments),t}function VA(){return oo.apply(null,arguments).exponent(.5)}function Ol(t){return Math.sign(t)*t*t}function zA(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Bf(){var t=to(),e=[0,1],r=!1,n;function i(s){var a=zA(t(s));return isNaN(a)?n:r?Math.round(a):a}return i.invert=function(s){return t.invert(Ol(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,wi)).map(Ol)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Bf(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Le.apply(i,arguments),Ct(i)}function Hf(){var t=[],e=[],r=[],n;function i(){var a=0,o=Math.max(1,e.length);for(r=new Array(o-1);++a<o;)r[a-1]=X$(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?n:e[In(r,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?r[o-1]:t[0],o<r.length?r[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(At),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Hf().domain(t).range(e).unknown(n)},Le.apply(s,arguments)}function Wf(){var t=0,e=1,r=1,n=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[In(n,u,0,r)]:s}function o(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*e-(u-r)*t)/(r+1);return a}return a.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,o()):[t,e]},a.range=function(u){return arguments.length?(r=(i=Array.from(u)).length-1,o()):i.slice()},a.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[t,n[0]]:l>=r?[n[r-1],e]:[n[l-1],n[l]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return n.slice()},a.copy=function(){return Wf().domain([t,e]).range(i).unknown(s)},Le.apply(Ct(a),arguments)}function Gf(){var t=[.5],e=[0,1],r,n=1;function i(s){return s!=null&&s<=s?e[In(t,s,0,n)]:r}return i.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Gf().domain(t).range(e).unknown(r)},Le.apply(i,arguments)}const gs=new Date,ps=new Date;function ce(t,e,r,n){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const u=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return u;let l;do u.push(l=new Date(+s)),e(s,o),t(s);while(l<s&&s<a);return u},i.filter=s=>ce(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),r&&(i.count=(s,a)=>(gs.setTime(+s),ps.setTime(+a),t(gs),t(ps),Math.floor(r(gs,ps))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?a=>n(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Si=ce(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Si.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ce(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Si);Si.range;const st=1e3,Ue=st*60,at=Ue*60,ut=at*24,uo=ut*7,$l=ut*30,vs=ut*365,Vt=ce(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*st)},(t,e)=>(e-t)/st,t=>t.getUTCSeconds());Vt.range;const lo=ce(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*st)},(t,e)=>{t.setTime(+t+e*Ue)},(t,e)=>(e-t)/Ue,t=>t.getMinutes());lo.range;const co=ce(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ue)},(t,e)=>(e-t)/Ue,t=>t.getUTCMinutes());co.range;const ho=ce(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*st-t.getMinutes()*Ue)},(t,e)=>{t.setTime(+t+e*at)},(t,e)=>(e-t)/at,t=>t.getHours());ho.range;const fo=ce(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*at)},(t,e)=>(e-t)/at,t=>t.getUTCHours());fo.range;const Un=ce(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ue)/ut,t=>t.getDate()-1);Un.range;const Li=ce(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ut,t=>t.getUTCDate()-1);Li.range;const Kf=ce(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ut,t=>Math.floor(t/ut));Kf.range;function or(t){return ce(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Ue)/uo)}const qi=or(0),Ti=or(1),JA=or(2),QA=or(3),qr=or(4),YA=or(5),XA=or(6);qi.range;Ti.range;JA.range;QA.range;qr.range;YA.range;XA.range;function ur(t){return ce(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/uo)}const Fi=ur(0),Ei=ur(1),ZA=ur(2),ek=ur(3),Fr=ur(4),tk=ur(5),rk=ur(6);Fi.range;Ei.range;ZA.range;ek.range;Fr.range;tk.range;rk.range;const go=ce(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());go.range;const po=ce(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());po.range;const lt=ce(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());lt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ce(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});lt.range;const ct=ce(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ct.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ce(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});ct.range;function Vf(t,e,r,n,i,s){const a=[[Vt,1,st],[Vt,5,5*st],[Vt,15,15*st],[Vt,30,30*st],[s,1,Ue],[s,5,5*Ue],[s,15,15*Ue],[s,30,30*Ue],[i,1,at],[i,3,3*at],[i,6,6*at],[i,12,12*at],[n,1,ut],[n,2,2*ut],[r,1,uo],[e,1,$l],[e,3,3*$l],[t,1,vs]];function o(l,h,c){const f=h<l;f&&([l,h]=[h,l]);const d=c&&typeof c.range=="function"?c:u(l,h,c),v=d?d.range(l,+h+1):[];return f?v.reverse():v}function u(l,h,c){const f=Math.abs(h-l)/c,d=Ja(([,,p])=>p).right(a,f);if(d===a.length)return t.every(oa(l/vs,h/vs,c));if(d===0)return Si.every(Math.max(oa(l,h,c),1));const[v,g]=a[f/a[d-1][2]<a[d][2]/f?d-1:d];return v.every(g)}return[o,u]}const[nk,ik]=Vf(ct,po,Fi,Kf,fo,co),[sk,ak]=Vf(lt,go,qi,Un,ho,lo);function ys(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ms(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sn(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function ok(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,u=t.shortMonths,l=an(i),h=on(i),c=an(s),f=on(s),d=an(a),v=on(a),g=an(o),p=on(o),m=an(u),b=on(u),_={a:U,A:N,b:H,B:ae,c:null,d:Rl,e:Rl,f:xk,g:qk,G:Bk,H:Ak,I:kk,j:Pk,L:zf,m:Ck,M:Rk,p:cr,q:hr,Q:Ml,s:Nl,S:jk,u:Ik,U:Mk,V:Nk,w:Uk,W:Dk,x:null,X:null,y:Lk,Y:Fk,Z:Hk,"%":Il},w={a:tn,A:et,b:fr,B:Ad,c:null,d:jl,e:jl,f:Vk,g:nP,G:sP,H:Wk,I:Gk,j:Kk,L:Qf,m:zk,M:Jk,p:kd,q:Pd,Q:Ml,s:Nl,S:Qk,u:Yk,U:Xk,V:Zk,w:eP,W:tP,x:null,X:null,y:rP,Y:iP,Z:aP,"%":Il},T={a:Z,A:C,b:L,B:se,c:ye,d:xl,e:xl,f:Tk,g:Pl,G:kl,H:Cl,I:Cl,j:_k,L:Sk,m:mk,M:wk,p:D,q:yk,Q:Ok,s:$k,S:bk,u:fk,U:dk,V:gk,w:hk,W:pk,x:Oe,X:O,y:Pl,Y:kl,Z:vk,"%":Ek};_.x=S(r,_),_.X=S(n,_),_.c=S(e,_),w.x=S(r,w),w.X=S(n,w),w.c=S(e,w);function S(P,q){return function(W){var E=[],be=-1,Q=0,$e=P.length,Ae,It,bo;for(W instanceof Date||(W=new Date(+W));++be<$e;)P.charCodeAt(be)===37&&(E.push(P.slice(Q,be)),(It=Al[Ae=P.charAt(++be)])!=null?Ae=P.charAt(++be):It=Ae==="e"?" ":"0",(bo=q[Ae])&&(Ae=bo(W,It)),E.push(Ae),Q=be+1);return E.push(P.slice(Q,be)),E.join("")}}function $(P,q){return function(W){var E=sn(1900,void 0,1),be=R(E,P,W+="",0),Q,$e;if(be!=W.length)return null;if("Q"in E)return new Date(E.Q);if("s"in E)return new Date(E.s*1e3+("L"in E?E.L:0));if(q&&!("Z"in E)&&(E.Z=0),"p"in E&&(E.H=E.H%12+E.p*12),E.m===void 0&&(E.m="q"in E?E.q:0),"V"in E){if(E.V<1||E.V>53)return null;"w"in E||(E.w=1),"Z"in E?(Q=ms(sn(E.y,0,1)),$e=Q.getUTCDay(),Q=$e>4||$e===0?Ei.ceil(Q):Ei(Q),Q=Li.offset(Q,(E.V-1)*7),E.y=Q.getUTCFullYear(),E.m=Q.getUTCMonth(),E.d=Q.getUTCDate()+(E.w+6)%7):(Q=ys(sn(E.y,0,1)),$e=Q.getDay(),Q=$e>4||$e===0?Ti.ceil(Q):Ti(Q),Q=Un.offset(Q,(E.V-1)*7),E.y=Q.getFullYear(),E.m=Q.getMonth(),E.d=Q.getDate()+(E.w+6)%7)}else("W"in E||"U"in E)&&("w"in E||(E.w="u"in E?E.u%7:"W"in E?1:0),$e="Z"in E?ms(sn(E.y,0,1)).getUTCDay():ys(sn(E.y,0,1)).getDay(),E.m=0,E.d="W"in E?(E.w+6)%7+E.W*7-($e+5)%7:E.w+E.U*7-($e+6)%7);return"Z"in E?(E.H+=E.Z/100|0,E.M+=E.Z%100,ms(E)):ys(E)}}function R(P,q,W,E){for(var be=0,Q=q.length,$e=W.length,Ae,It;be<Q;){if(E>=$e)return-1;if(Ae=q.charCodeAt(be++),Ae===37){if(Ae=q.charAt(be++),It=T[Ae in Al?q.charAt(be++):Ae],!It||(E=It(P,W,E))<0)return-1}else if(Ae!=W.charCodeAt(E++))return-1}return E}function D(P,q,W){var E=l.exec(q.slice(W));return E?(P.p=h.get(E[0].toLowerCase()),W+E[0].length):-1}function Z(P,q,W){var E=d.exec(q.slice(W));return E?(P.w=v.get(E[0].toLowerCase()),W+E[0].length):-1}function C(P,q,W){var E=c.exec(q.slice(W));return E?(P.w=f.get(E[0].toLowerCase()),W+E[0].length):-1}function L(P,q,W){var E=m.exec(q.slice(W));return E?(P.m=b.get(E[0].toLowerCase()),W+E[0].length):-1}function se(P,q,W){var E=g.exec(q.slice(W));return E?(P.m=p.get(E[0].toLowerCase()),W+E[0].length):-1}function ye(P,q,W){return R(P,e,q,W)}function Oe(P,q,W){return R(P,r,q,W)}function O(P,q,W){return R(P,n,q,W)}function U(P){return a[P.getDay()]}function N(P){return s[P.getDay()]}function H(P){return u[P.getMonth()]}function ae(P){return o[P.getMonth()]}function cr(P){return i[+(P.getHours()>=12)]}function hr(P){return 1+~~(P.getMonth()/3)}function tn(P){return a[P.getUTCDay()]}function et(P){return s[P.getUTCDay()]}function fr(P){return u[P.getUTCMonth()]}function Ad(P){return o[P.getUTCMonth()]}function kd(P){return i[+(P.getUTCHours()>=12)]}function Pd(P){return 1+~~(P.getUTCMonth()/3)}return{format:function(P){var q=S(P+="",_);return q.toString=function(){return P},q},parse:function(P){var q=$(P+="",!1);return q.toString=function(){return P},q},utcFormat:function(P){var q=S(P+="",w);return q.toString=function(){return P},q},utcParse:function(P){var q=$(P+="",!0);return q.toString=function(){return P},q}}}var Al={"-":"",_:" ",0:"0"},de=/^\s*\d+/,uk=/^%/,lk=/[\\^$*+?|[\]().{}]/g;function G(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(e)+i:i)}function ck(t){return t.replace(lk,"\\$&")}function an(t){return new RegExp("^(?:"+t.map(ck).join("|")+")","i")}function on(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function hk(t,e,r){var n=de.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function fk(t,e,r){var n=de.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function dk(t,e,r){var n=de.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function gk(t,e,r){var n=de.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function pk(t,e,r){var n=de.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function kl(t,e,r){var n=de.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Pl(t,e,r){var n=de.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function vk(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function yk(t,e,r){var n=de.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function mk(t,e,r){var n=de.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function xl(t,e,r){var n=de.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function _k(t,e,r){var n=de.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function Cl(t,e,r){var n=de.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function wk(t,e,r){var n=de.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function bk(t,e,r){var n=de.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Sk(t,e,r){var n=de.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Tk(t,e,r){var n=de.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Ek(t,e,r){var n=uk.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Ok(t,e,r){var n=de.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function $k(t,e,r){var n=de.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Rl(t,e){return G(t.getDate(),e,2)}function Ak(t,e){return G(t.getHours(),e,2)}function kk(t,e){return G(t.getHours()%12||12,e,2)}function Pk(t,e){return G(1+Un.count(lt(t),t),e,3)}function zf(t,e){return G(t.getMilliseconds(),e,3)}function xk(t,e){return zf(t,e)+"000"}function Ck(t,e){return G(t.getMonth()+1,e,2)}function Rk(t,e){return G(t.getMinutes(),e,2)}function jk(t,e){return G(t.getSeconds(),e,2)}function Ik(t){var e=t.getDay();return e===0?7:e}function Mk(t,e){return G(qi.count(lt(t)-1,t),e,2)}function Jf(t){var e=t.getDay();return e>=4||e===0?qr(t):qr.ceil(t)}function Nk(t,e){return t=Jf(t),G(qr.count(lt(t),t)+(lt(t).getDay()===4),e,2)}function Uk(t){return t.getDay()}function Dk(t,e){return G(Ti.count(lt(t)-1,t),e,2)}function Lk(t,e){return G(t.getFullYear()%100,e,2)}function qk(t,e){return t=Jf(t),G(t.getFullYear()%100,e,2)}function Fk(t,e){return G(t.getFullYear()%1e4,e,4)}function Bk(t,e){var r=t.getDay();return t=r>=4||r===0?qr(t):qr.ceil(t),G(t.getFullYear()%1e4,e,4)}function Hk(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+G(e/60|0,"0",2)+G(e%60,"0",2)}function jl(t,e){return G(t.getUTCDate(),e,2)}function Wk(t,e){return G(t.getUTCHours(),e,2)}function Gk(t,e){return G(t.getUTCHours()%12||12,e,2)}function Kk(t,e){return G(1+Li.count(ct(t),t),e,3)}function Qf(t,e){return G(t.getUTCMilliseconds(),e,3)}function Vk(t,e){return Qf(t,e)+"000"}function zk(t,e){return G(t.getUTCMonth()+1,e,2)}function Jk(t,e){return G(t.getUTCMinutes(),e,2)}function Qk(t,e){return G(t.getUTCSeconds(),e,2)}function Yk(t){var e=t.getUTCDay();return e===0?7:e}function Xk(t,e){return G(Fi.count(ct(t)-1,t),e,2)}function Yf(t){var e=t.getUTCDay();return e>=4||e===0?Fr(t):Fr.ceil(t)}function Zk(t,e){return t=Yf(t),G(Fr.count(ct(t),t)+(ct(t).getUTCDay()===4),e,2)}function eP(t){return t.getUTCDay()}function tP(t,e){return G(Ei.count(ct(t)-1,t),e,2)}function rP(t,e){return G(t.getUTCFullYear()%100,e,2)}function nP(t,e){return t=Yf(t),G(t.getUTCFullYear()%100,e,2)}function iP(t,e){return G(t.getUTCFullYear()%1e4,e,4)}function sP(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Fr(t):Fr.ceil(t),G(t.getUTCFullYear()%1e4,e,4)}function aP(){return"+0000"}function Il(){return"%"}function Ml(t){return+t}function Nl(t){return Math.floor(+t/1e3)}var mr,Xf,Zf;oP({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oP(t){return mr=ok(t),Xf=mr.format,mr.parse,Zf=mr.utcFormat,mr.utcParse,mr}function uP(t){return new Date(t)}function lP(t){return t instanceof Date?+t:+new Date(+t)}function vo(t,e,r,n,i,s,a,o,u,l){var h=to(),c=h.invert,f=h.domain,d=l(".%L"),v=l(":%S"),g=l("%I:%M"),p=l("%I %p"),m=l("%a %d"),b=l("%b %d"),_=l("%B"),w=l("%Y");function T(S){return(u(S)<S?d:o(S)<S?v:a(S)<S?g:s(S)<S?p:n(S)<S?i(S)<S?m:b:r(S)<S?_:w)(S)}return h.invert=function(S){return new Date(c(S))},h.domain=function(S){return arguments.length?f(Array.from(S,lP)):f().map(uP)},h.ticks=function(S){var $=f();return t($[0],$[$.length-1],S??10)},h.tickFormat=function(S,$){return $==null?T:l($)},h.nice=function(S){var $=f();return(!S||typeof S.range!="function")&&(S=e($[0],$[$.length-1],S??10)),S?f(Lf($,S)):h},h.copy=function(){return Nn(h,vo(t,e,r,n,i,s,a,o,u,l))},h}function cP(){return Le.apply(vo(sk,ak,lt,go,qi,Un,ho,lo,Vt,Xf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hP(){return Le.apply(vo(nk,ik,ct,po,Fi,Li,fo,co,Vt,Zf).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Bi(){var t=0,e=1,r,n,i,s,a=we,o=!1,u;function l(c){return c==null||isNaN(c=+c)?u:a(i===0?.5:(c=(s(c)-r)*i,o?Math.max(0,Math.min(1,c)):c))}l.domain=function(c){return arguments.length?([t,e]=c,r=s(t=+t),n=s(e=+e),i=r===n?0:1/(n-r),l):[t,e]},l.clamp=function(c){return arguments.length?(o=!!c,l):o},l.interpolator=function(c){return arguments.length?(a=c,l):a};function h(c){return function(f){var d,v;return arguments.length?([d,v]=f,a=c(d,v),l):[a(0),a(1)]}}return l.range=h(Xr),l.rangeRound=h(eo),l.unknown=function(c){return arguments.length?(u=c,l):u},function(c){return s=c,r=c(t),n=c(e),i=r===n?0:1/(n-r),l}}function Rt(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ed(){var t=Ct(Bi()(we));return t.copy=function(){return Rt(t,ed())},dt.apply(t,arguments)}function td(){var t=io(Bi()).domain([1,10]);return t.copy=function(){return Rt(t,td()).base(t.base())},dt.apply(t,arguments)}function rd(){var t=so(Bi());return t.copy=function(){return Rt(t,rd()).constant(t.constant())},dt.apply(t,arguments)}function yo(){var t=ao(Bi());return t.copy=function(){return Rt(t,yo()).exponent(t.exponent())},dt.apply(t,arguments)}function fP(){return yo.apply(null,arguments).exponent(.5)}function nd(){var t=[],e=we;function r(n){if(n!=null&&!isNaN(n=+n))return e((In(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(At),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>Y$(t,s/n))},r.copy=function(){return nd(e).domain(t)},dt.apply(r,arguments)}function Hi(){var t=0,e=.5,r=1,n=1,i,s,a,o,u,l=we,h,c=!1,f;function d(g){return isNaN(g=+g)?f:(g=.5+((g=+h(g))-s)*(n*g<n*s?o:u),l(c?Math.max(0,Math.min(1,g)):g))}d.domain=function(g){return arguments.length?([t,e,r]=g,i=h(t=+t),s=h(e=+e),a=h(r=+r),o=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),n=s<i?-1:1,d):[t,e,r]},d.clamp=function(g){return arguments.length?(c=!!g,d):c},d.interpolator=function(g){return arguments.length?(l=g,d):l};function v(g){return function(p){var m,b,_;return arguments.length?([m,b,_]=p,l=EA(g,[m,b,_]),d):[l(0),l(.5),l(1)]}}return d.range=v(Xr),d.rangeRound=v(eo),d.unknown=function(g){return arguments.length?(f=g,d):f},function(g){return h=g,i=g(t),s=g(e),a=g(r),o=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),n=s<i?-1:1,d}}function id(){var t=Ct(Hi()(we));return t.copy=function(){return Rt(t,id())},dt.apply(t,arguments)}function sd(){var t=io(Hi()).domain([.1,1,10]);return t.copy=function(){return Rt(t,sd()).base(t.base())},dt.apply(t,arguments)}function ad(){var t=so(Hi());return t.copy=function(){return Rt(t,ad()).constant(t.constant())},dt.apply(t,arguments)}function mo(){var t=ao(Hi());return t.copy=function(){return Rt(t,mo()).exponent(t.exponent())},dt.apply(t,arguments)}function dP(){return mo.apply(null,arguments).exponent(.5)}const wj=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ya,scaleDiverging:id,scaleDivergingLog:sd,scaleDivergingPow:mo,scaleDivergingSqrt:dP,scaleDivergingSymlog:ad,scaleIdentity:Df,scaleImplicit:ua,scaleLinear:Uf,scaleLog:qf,scaleOrdinal:Qa,scalePoint:eA,scalePow:oo,scaleQuantile:Hf,scaleQuantize:Wf,scaleRadial:Bf,scaleSequential:ed,scaleSequentialLog:td,scaleSequentialPow:yo,scaleSequentialQuantile:nd,scaleSequentialSqrt:fP,scaleSequentialSymlog:rd,scaleSqrt:VA,scaleSymlog:Ff,scaleThreshold:Gf,scaleTime:cP,scaleUtc:hP,tickFormat:Nf},Symbol.toStringTag,{value:"Module"}));var gP=Gr;function pP(t,e,r){for(var n=-1,i=t.length;++n<i;){var s=t[n],a=e(s);if(a!=null&&(o===void 0?a===a&&!gP(a):r(a,o)))var o=a,u=s}return u}var Wi=pP;function vP(t,e){return t>e}var od=vP,yP=Wi,mP=od,_P=Yr;function wP(t){return t&&t.length?yP(t,_P,mP):void 0}var bP=wP;const bj=J(bP);function SP(t,e){return t<e}var ud=SP,TP=Wi,EP=ud,OP=Yr;function $P(t){return t&&t.length?TP(t,OP,EP):void 0}var AP=$P;const Sj=J(AP);var kP=Da,PP=xt,xP=Ef,CP=Ee;function RP(t,e){var r=CP(t)?kP:xP;return r(t,PP(e))}var jP=RP,IP=Sf,MP=jP;function NP(t,e){return IP(MP(t,e),1)}var UP=NP;const Tj=J(UP);var DP=Va;function LP(t,e){return DP(t,e)}var qP=LP;const Ej=J(qP);var Zr=1e9,FP={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wo,re=!0,De="[DecimalError] ",ir=De+"Invalid argument: ",_o=De+"Exponent out of range: ",en=Math.floor,qt=Math.pow,BP=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,xe,fe=1e7,te=7,ld=9007199254740991,Oi=en(ld/te),k={};k.absoluteValue=k.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};k.comparedTo=k.cmp=function(t){var e,r,n,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};k.decimalPlaces=k.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*te;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};k.dividedBy=k.div=function(t){return ot(this,new this.constructor(t))};k.dividedToIntegerBy=k.idiv=function(t){var e=this,r=e.constructor;return z(ot(e,new r(t),0,1),r.precision)};k.equals=k.eq=function(t){return!this.cmp(t)};k.exponent=function(){return ue(this)};k.greaterThan=k.gt=function(t){return this.cmp(t)>0};k.greaterThanOrEqualTo=k.gte=function(t){return this.cmp(t)>=0};k.isInteger=k.isint=function(){return this.e>this.d.length-2};k.isNegative=k.isneg=function(){return this.s<0};k.isPositive=k.ispos=function(){return this.s>0};k.isZero=function(){return this.s===0};k.lessThan=k.lt=function(t){return this.cmp(t)<0};k.lessThanOrEqualTo=k.lte=function(t){return this.cmp(t)<1};k.logarithm=k.log=function(t){var e,r=this,n=r.constructor,i=n.precision,s=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(xe))throw Error(De+"NaN");if(r.s<1)throw Error(De+(r.s?"NaN":"-Infinity"));return r.eq(xe)?new n(0):(re=!1,e=ot(En(r,s),En(t,s),s),re=!0,z(e,i))};k.minus=k.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?fd(e,t):cd(e,(t.s=-t.s,t))};k.modulo=k.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(De+"NaN");return r.s?(re=!1,e=ot(r,t,0,1).times(t),re=!0,r.minus(e)):z(new n(r),i)};k.naturalExponential=k.exp=function(){return hd(this)};k.naturalLogarithm=k.ln=function(){return En(this)};k.negated=k.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};k.plus=k.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cd(e,t):fd(e,(t.s=-t.s,t))};k.precision=k.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ir+t);if(e=ue(i)+1,n=i.d.length-1,r=n*te+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};k.squareRoot=k.sqrt=function(){var t,e,r,n,i,s,a,o=this,u=o.constructor;if(o.s<1){if(!o.s)return new u(0);throw Error(De+"NaN")}for(t=ue(o),re=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Qe(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=en((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new u(e)):n=new u(i.toString()),r=u.precision,i=a=r+3;;)if(s=n,n=s.plus(ot(o,s,a+2)).times(.5),Qe(s.d).slice(0,a)===(e=Qe(n.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(z(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(e!="9999")break;a+=4}return re=!0,z(n,r)};k.times=k.mul=function(t){var e,r,n,i,s,a,o,u,l,h=this,c=h.constructor,f=h.d,d=(t=new c(t)).d;if(!h.s||!t.s)return new c(0);for(t.s*=h.s,r=h.e+t.e,u=f.length,l=d.length,u<l&&(s=f,f=d,d=s,a=u,u=l,l=a),s=[],a=u+l,n=a;n--;)s.push(0);for(n=l;--n>=0;){for(e=0,i=u+n;i>n;)o=s[i]+d[n]*f[i-n-1]+e,s[i--]=o%fe|0,e=o/fe|0;s[i]=(s[i]+e)%fe|0}for(;!s[--a];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,re?z(t,c.precision):t};k.toDecimalPlaces=k.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Xe(t,0,Zr),e===void 0?e=n.rounding:Xe(e,0,8),z(r,t+ue(r)+1,e))};k.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=sr(n,!0):(Xe(t,0,Zr),e===void 0?e=i.rounding:Xe(e,0,8),n=z(new i(n),t+1,e),r=sr(n,!0,t+1)),r};k.toFixed=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?sr(i):(Xe(t,0,Zr),e===void 0?e=s.rounding:Xe(e,0,8),n=z(new s(i),t+ue(i)+1,e),r=sr(n.abs(),!1,t+ue(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};k.toInteger=k.toint=function(){var t=this,e=t.constructor;return z(new e(t),ue(t)+1,e.rounding)};k.toNumber=function(){return+this};k.toPower=k.pow=function(t){var e,r,n,i,s,a,o=this,u=o.constructor,l=12,h=+(t=new u(t));if(!t.s)return new u(xe);if(o=new u(o),!o.s){if(t.s<1)throw Error(De+"Infinity");return o}if(o.eq(xe))return o;if(n=u.precision,t.eq(xe))return z(o,n);if(e=t.e,r=t.d.length-1,a=e>=r,s=o.s,a){if((r=h<0?-h:h)<=ld){for(i=new u(xe),e=Math.ceil(n/te+4),re=!1;r%2&&(i=i.times(o),Dl(i.d,e)),r=en(r/2),r!==0;)o=o.times(o),Dl(o.d,e);return re=!0,t.s<0?new u(xe).div(i):z(i,n)}}else if(s<0)throw Error(De+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,o.s=1,re=!1,i=t.times(En(o,n+l)),re=!0,i=hd(i),i.s=s,i};k.toPrecision=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?(r=ue(i),n=sr(i,r<=s.toExpNeg||r>=s.toExpPos)):(Xe(t,1,Zr),e===void 0?e=s.rounding:Xe(e,0,8),i=z(new s(i),t,e),r=ue(i),n=sr(i,t<=r||r<=s.toExpNeg,t)),n};k.toSignificantDigits=k.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Xe(t,1,Zr),e===void 0?e=n.rounding:Xe(e,0,8)),z(new n(r),t,e)};k.toString=k.valueOf=k.val=k.toJSON=k[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ue(t),r=t.constructor;return sr(t,e<=r.toExpNeg||e>=r.toExpPos)};function cd(t,e){var r,n,i,s,a,o,u,l,h=t.constructor,c=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),re?z(e,c):e;if(u=t.d,l=e.d,a=t.e,i=e.e,u=u.slice(),s=a-i,s){for(s<0?(n=u,s=-s,o=l.length):(n=l,i=a,o=u.length),a=Math.ceil(c/te),o=a>o?a+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=u.length,s=l.length,o-s<0&&(s=o,n=l,l=u,u=n),r=0;s;)r=(u[--s]=u[s]+l[s]+r)/fe|0,u[s]%=fe;for(r&&(u.unshift(r),++i),o=u.length;u[--o]==0;)u.pop();return e.d=u,e.e=i,re?z(e,c):e}function Xe(t,e,r){if(t!==~~t||t<e||t>r)throw Error(ir+t)}function Qe(t){var e,r,n,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)n=t[e]+"",r=te-n.length,r&&(s+=vt(r)),s+=n;a=t[e],n=a+"",r=te-n.length,r&&(s+=vt(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var ot=function(){function t(n,i){var s,a=0,o=n.length;for(n=n.slice();o--;)s=n[o]*i+a,n[o]=s%fe|0,a=s/fe|0;return a&&n.unshift(a),n}function e(n,i,s,a){var o,u;if(s!=a)u=s>a?1:-1;else for(o=u=0;o<s;o++)if(n[o]!=i[o]){u=n[o]>i[o]?1:-1;break}return u}function r(n,i,s){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*fe+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a){var o,u,l,h,c,f,d,v,g,p,m,b,_,w,T,S,$,R,D=n.constructor,Z=n.s==i.s?1:-1,C=n.d,L=i.d;if(!n.s)return new D(n);if(!i.s)throw Error(De+"Division by zero");for(u=n.e-i.e,$=L.length,T=C.length,d=new D(Z),v=d.d=[],l=0;L[l]==(C[l]||0);)++l;if(L[l]>(C[l]||0)&&--u,s==null?b=s=D.precision:a?b=s+(ue(n)-ue(i))+1:b=s,b<0)return new D(0);if(b=b/te+2|0,l=0,$==1)for(h=0,L=L[0],b++;(l<T||h)&&b--;l++)_=h*fe+(C[l]||0),v[l]=_/L|0,h=_%L|0;else{for(h=fe/(L[0]+1)|0,h>1&&(L=t(L,h),C=t(C,h),$=L.length,T=C.length),w=$,g=C.slice(0,$),p=g.length;p<$;)g[p++]=0;R=L.slice(),R.unshift(0),S=L[0],L[1]>=fe/2&&++S;do h=0,o=e(L,g,$,p),o<0?(m=g[0],$!=p&&(m=m*fe+(g[1]||0)),h=m/S|0,h>1?(h>=fe&&(h=fe-1),c=t(L,h),f=c.length,p=g.length,o=e(c,g,f,p),o==1&&(h--,r(c,$<f?R:L,f))):(h==0&&(o=h=1),c=L.slice()),f=c.length,f<p&&c.unshift(0),r(g,c,p),o==-1&&(p=g.length,o=e(L,g,$,p),o<1&&(h++,r(g,$<p?R:L,p))),p=g.length):o===0&&(h++,g=[0]),v[l++]=h,o&&g[0]?g[p++]=C[w]||0:(g=[C[w]],p=1);while((w++<T||g[0]!==void 0)&&b--)}return v[0]||v.shift(),d.e=u,z(d,a?s+ue(d)+1:s)}}();function hd(t,e){var r,n,i,s,a,o,u=0,l=0,h=t.constructor,c=h.precision;if(ue(t)>16)throw Error(_o+ue(t));if(!t.s)return new h(xe);for(re=!1,o=c,a=new h(.03125);t.abs().gte(.1);)t=t.times(a),l+=5;for(n=Math.log(qt(2,l))/Math.LN10*2+5|0,o+=n,r=i=s=new h(xe),h.precision=o;;){if(i=z(i.times(t),o),r=r.times(++u),a=s.plus(ot(i,r,o)),Qe(a.d).slice(0,o)===Qe(s.d).slice(0,o)){for(;l--;)s=z(s.times(s),o);return h.precision=c,e==null?(re=!0,z(s,c)):s}s=a}}function ue(t){for(var e=t.e*te,r=t.d[0];r>=10;r/=10)e++;return e}function _s(t,e,r){if(e>t.LN10.sd())throw re=!0,r&&(t.precision=r),Error(De+"LN10 precision limit exceeded");return z(new t(t.LN10),e)}function vt(t){for(var e="";t--;)e+="0";return e}function En(t,e){var r,n,i,s,a,o,u,l,h,c=1,f=10,d=t,v=d.d,g=d.constructor,p=g.precision;if(d.s<1)throw Error(De+(d.s?"NaN":"-Infinity"));if(d.eq(xe))return new g(0);if(e==null?(re=!1,l=p):l=e,d.eq(10))return e==null&&(re=!0),_s(g,l);if(l+=f,g.precision=l,r=Qe(v),n=r.charAt(0),s=ue(d),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)d=d.times(t),r=Qe(d.d),n=r.charAt(0),c++;s=ue(d),n>1?(d=new g("0."+r),s++):d=new g(n+"."+r.slice(1))}else return u=_s(g,l+2,p).times(s+""),d=En(new g(n+"."+r.slice(1)),l-f).plus(u),g.precision=p,e==null?(re=!0,z(d,p)):d;for(o=a=d=ot(d.minus(xe),d.plus(xe),l),h=z(d.times(d),l),i=3;;){if(a=z(a.times(h),l),u=o.plus(ot(a,new g(i),l)),Qe(u.d).slice(0,l)===Qe(o.d).slice(0,l))return o=o.times(2),s!==0&&(o=o.plus(_s(g,l+2,p).times(s+""))),o=ot(o,new g(c),l),g.precision=p,e==null?(re=!0,z(o,p)):o;o=u,i+=2}}function Ul(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=en(r/te),t.d=[],n=(r+1)%te,r<0&&(n+=te),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=te;n<i;)t.d.push(+e.slice(n,n+=te));e=e.slice(n),n=te-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),re&&(t.e>Oi||t.e<-Oi))throw Error(_o+r)}else t.s=0,t.e=0,t.d=[0];return t}function z(t,e,r){var n,i,s,a,o,u,l,h,c=t.d;for(a=1,s=c[0];s>=10;s/=10)a++;if(n=e-a,n<0)n+=te,i=e,l=c[h=0];else{if(h=Math.ceil((n+1)/te),s=c.length,h>=s)return t;for(l=s=c[h],a=1;s>=10;s/=10)a++;n%=te,i=n-te+a}if(r!==void 0&&(s=qt(10,a-i-1),o=l/s%10|0,u=e<0||c[h+1]!==void 0||l%s,u=r<4?(o||u)&&(r==0||r==(t.s<0?3:2)):o>5||o==5&&(r==4||u||r==6&&(n>0?i>0?l/qt(10,a-i):0:c[h-1])%10&1||r==(t.s<0?8:7))),e<1||!c[0])return u?(s=ue(t),c.length=1,e=e-s-1,c[0]=qt(10,(te-e%te)%te),t.e=en(-e/te)||0):(c.length=1,c[0]=t.e=t.s=0),t;if(n==0?(c.length=h,s=1,h--):(c.length=h+1,s=qt(10,te-n),c[h]=i>0?(l/qt(10,a-i)%qt(10,i)|0)*s:0),u)for(;;)if(h==0){(c[0]+=s)==fe&&(c[0]=1,++t.e);break}else{if(c[h]+=s,c[h]!=fe)break;c[h--]=0,s=1}for(n=c.length;c[--n]===0;)c.pop();if(re&&(t.e>Oi||t.e<-Oi))throw Error(_o+ue(t));return t}function fd(t,e){var r,n,i,s,a,o,u,l,h,c,f=t.constructor,d=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),re?z(e,d):e;if(u=t.d,c=e.d,n=e.e,l=t.e,u=u.slice(),a=l-n,a){for(h=a<0,h?(r=u,a=-a,o=c.length):(r=c,n=l,o=u.length),i=Math.max(Math.ceil(d/te),o)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=u.length,o=c.length,h=i<o,h&&(o=i),i=0;i<o;i++)if(u[i]!=c[i]){h=u[i]<c[i];break}a=0}for(h&&(r=u,u=c,c=r,e.s=-e.s),o=u.length,i=c.length-o;i>0;--i)u[o++]=0;for(i=c.length;i>a;){if(u[--i]<c[i]){for(s=i;s&&u[--s]===0;)u[s]=fe-1;--u[s],u[i]+=fe}u[i]-=c[i]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=n,re?z(e,d):e):new f(0)}function sr(t,e,r){var n,i=ue(t),s=Qe(t.d),a=s.length;return e?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+vt(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+vt(-i-1)+s,r&&(n=r-a)>0&&(s+=vt(n))):i>=a?(s+=vt(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+vt(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=vt(n))),t.s<0?"-"+s:s}function Dl(t,e){if(t.length>e)return t.length=e,!0}function dd(t){var e,r,n;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ir+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return Ul(a,s.toString())}else if(typeof s!="string")throw Error(ir+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,BP.test(s))Ul(a,s);else throw Error(ir+s)}if(i.prototype=k,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=dd,i.config=i.set=HP,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function HP(t){if(!t||typeof t!="object")throw Error(De+"Object expected");var e,r,n,i=["precision",1,Zr,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(en(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(ir+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ir+r+": "+n);return this}var wo=dd(FP);xe=new wo(1);const V=wo;function WP(t){return zP(t)||VP(t)||KP(t)||GP()}function GP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KP(t,e){if(t){if(typeof t=="string")return fa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fa(t,e)}}function VP(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function zP(t){if(Array.isArray(t))return fa(t)}function fa(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var JP=function(e){return e},gd={},pd=function(e){return e===gd},Ll=function(e){return function r(){return arguments.length===0||arguments.length===1&&pd(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},QP=function t(e,r){return e===1?r:Ll(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==gd}).length;return a>=e?r.apply(void 0,i):t(e-a,Ll(function(){for(var o=arguments.length,u=new Array(o),l=0;l<o;l++)u[l]=arguments[l];var h=i.map(function(c){return pd(c)?u.shift():c});return r.apply(void 0,WP(h).concat(u))}))})},Gi=function(e){return QP(e.length,e)},da=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},YP=Gi(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),XP=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return JP;var i=r.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,u){return u(o)},s.apply(void 0,arguments))}},ga=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},vd=function(e){var r=null,n=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r&&s.every(function(o,u){return o===r[u]})||(r=s,n=e.apply(void 0,s)),n}};function ZP(t){var e;return t===0?e=1:e=Math.floor(new V(t).abs().log(10).toNumber())+1,e}function ex(t,e,r){for(var n=new V(t),i=0,s=[];n.lt(e)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var tx=Gi(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),rx=Gi(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),nx=Gi(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Ki={rangeStep:ex,getDigitCount:ZP,interpolateNumber:tx,uninterpolateNumber:rx,uninterpolateTruncation:nx};function pa(t){return ax(t)||sx(t)||yd(t)||ix()}function ix(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sx(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function ax(t){if(Array.isArray(t))return va(t)}function On(t,e){return lx(t)||ux(t,e)||yd(t,e)||ox()}function ox(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yd(t,e){if(t){if(typeof t=="string")return va(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return va(t,e)}}function va(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ux(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o;!(n=(o=a.next()).done)&&(r.push(o.value),!(e&&r.length===e));n=!0);}catch(u){i=!0,s=u}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw s}}return r}}function lx(t){if(Array.isArray(t))return t}function md(t){var e=On(t,2),r=e[0],n=e[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function _d(t,e,r){if(t.lte(0))return new V(0);var n=Ki.getDigitCount(t.toNumber()),i=new V(10).pow(n),s=t.div(i),a=n!==1?.05:.1,o=new V(Math.ceil(s.div(a).toNumber())).add(r).mul(a),u=o.mul(i);return e?u:new V(Math.ceil(u))}function cx(t,e,r){var n=1,i=new V(t);if(!i.isint()&&r){var s=Math.abs(t);s<1?(n=new V(10).pow(Ki.getDigitCount(t)-1),i=new V(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new V(Math.floor(t)))}else t===0?i=new V(Math.floor((e-1)/2)):r||(i=new V(Math.floor(t)));var a=Math.floor((e-1)/2),o=XP(YP(function(u){return i.add(new V(u-a).mul(n)).toNumber()}),da);return o(0,e)}function wd(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new V(0),tickMin:new V(0),tickMax:new V(0)};var s=_d(new V(e).sub(t).div(r-1),n,i),a;t<=0&&e>=0?a=new V(0):(a=new V(t).add(e).div(2),a=a.sub(new V(a).mod(s)));var o=Math.ceil(a.sub(t).div(s).toNumber()),u=Math.ceil(new V(e).sub(a).div(s).toNumber()),l=o+u+1;return l>r?wd(t,e,r,n,i+1):(l<r&&(u=e>0?u+(r-l):u,o=e>0?o:o+(r-l)),{step:s,tickMin:a.sub(new V(o).mul(s)),tickMax:a.add(new V(u).mul(s))})}function hx(t){var e=On(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=md([r,n]),u=On(o,2),l=u[0],h=u[1];if(l===-1/0||h===1/0){var c=h===1/0?[l].concat(pa(da(0,i-1).map(function(){return 1/0}))):[].concat(pa(da(0,i-1).map(function(){return-1/0})),[h]);return r>n?ga(c):c}if(l===h)return cx(l,i,s);var f=wd(l,h,a,s),d=f.step,v=f.tickMin,g=f.tickMax,p=Ki.rangeStep(v,g.add(new V(.1).mul(d)),d);return r>n?ga(p):p}function fx(t,e){var r=On(t,2),n=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=md([n,i]),o=On(a,2),u=o[0],l=o[1];if(u===-1/0||l===1/0)return[n,i];if(u===l)return[u];var h=Math.max(e,2),c=_d(new V(l).sub(u).div(h-1),s,0),f=[].concat(pa(Ki.rangeStep(new V(u),new V(l).sub(new V(.99).mul(c)),c)),[l]);return n>i?ga(f):f}var Oj=vd(hx),$j=vd(fx),dx="Invariant failed";function Aj(t,e){throw new Error(dx)}function gx(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var px=gx;const kj=J(px);var bd={exports:{}},vx="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yx=vx,mx=yx;function Sd(){}function Td(){}Td.resetWarningCache=Sd;var _x=function(){function t(n,i,s,a,o,u){if(u!==mx){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Td,resetWarningCache:Sd};return r.PropTypes=r,r};bd.exports=_x();var wx=bd.exports;const Pj=J(wx);var bx=Object.getOwnPropertyNames,Sx=Object.getOwnPropertySymbols,Tx=Object.prototype.hasOwnProperty;function ql(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function ei(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var s=i.cache,a=s.get(r),o=s.get(n);if(a&&o)return a===n&&o===r;s.set(r,n),s.set(n,r);var u=t(r,n,i);return s.delete(r),s.delete(n),u}}function Ex(t){return t!=null?t[Symbol.toStringTag]:void 0}function Fl(t){return bx(t).concat(Sx(t))}var Ox=Object.hasOwn||function(t,e){return Tx.call(t,e)};function lr(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var $x="__v",Ax="__o",kx="_owner",Bl=Object.getOwnPropertyDescriptor,Hl=Object.keys;function Px(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function xx(t,e){return lr(t.getTime(),e.getTime())}function Cx(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Rx(t,e){return t===e}function Wl(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=t.entries(),a,o,u=0;(a=s.next())&&!a.done;){for(var l=e.entries(),h=!1,c=0;(o=l.next())&&!o.done;){if(i[c]){c++;continue}var f=a.value,d=o.value;if(r.equals(f[0],d[0],u,c,t,e,r)&&r.equals(f[1],d[1],f[0],d[0],t,e,r)){h=i[c]=!0;break}c++}if(!h)return!1;u++}return!0}var jx=lr;function Ix(t,e,r){var n=Hl(t),i=n.length;if(Hl(e).length!==i)return!1;for(;i-- >0;)if(!Ed(t,e,r,n[i]))return!1;return!0}function un(t,e,r){var n=Fl(t),i=n.length;if(Fl(e).length!==i)return!1;for(var s,a,o;i-- >0;)if(s=n[i],!Ed(t,e,r,s)||(a=Bl(t,s),o=Bl(e,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function Mx(t,e){return lr(t.valueOf(),e.valueOf())}function Nx(t,e){return t.source===e.source&&t.flags===e.flags}function Gl(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=t.values(),a,o;(a=s.next())&&!a.done;){for(var u=e.values(),l=!1,h=0;(o=u.next())&&!o.done;){if(!i[h]&&r.equals(a.value,o.value,a.value,o.value,t,e,r)){l=i[h]=!0;break}h++}if(!l)return!1}return!0}function Ux(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Dx(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Ed(t,e,r,n){return(n===kx||n===Ax||n===$x)&&(t.$$typeof||e.$$typeof)?!0:Ox(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var Lx="[object Arguments]",qx="[object Boolean]",Fx="[object Date]",Bx="[object Error]",Hx="[object Map]",Wx="[object Number]",Gx="[object Object]",Kx="[object RegExp]",Vx="[object Set]",zx="[object String]",Jx="[object URL]",Qx=Array.isArray,Kl=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,Vl=Object.assign,Yx=Object.prototype.toString.call.bind(Object.prototype.toString);function Xx(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,a=t.areNumbersEqual,o=t.areObjectsEqual,u=t.arePrimitiveWrappersEqual,l=t.areRegExpsEqual,h=t.areSetsEqual,c=t.areTypedArraysEqual,f=t.areUrlsEqual,d=t.unknownTagComparators;return function(g,p,m){if(g===p)return!0;if(g==null||p==null)return!1;var b=typeof g;if(b!==typeof p)return!1;if(b!=="object")return b==="number"?a(g,p,m):b==="function"?i(g,p,m):!1;var _=g.constructor;if(_!==p.constructor)return!1;if(_===Object)return o(g,p,m);if(Qx(g))return e(g,p,m);if(Kl!=null&&Kl(g))return c(g,p,m);if(_===Date)return r(g,p,m);if(_===RegExp)return l(g,p,m);if(_===Map)return s(g,p,m);if(_===Set)return h(g,p,m);var w=Yx(g);if(w===Fx)return r(g,p,m);if(w===Kx)return l(g,p,m);if(w===Hx)return s(g,p,m);if(w===Vx)return h(g,p,m);if(w===Gx)return typeof g.then!="function"&&typeof p.then!="function"&&o(g,p,m);if(w===Jx)return f(g,p,m);if(w===Bx)return n(g,p,m);if(w===Lx)return o(g,p,m);if(w===qx||w===Wx||w===zx)return u(g,p,m);if(d){var T=d[w];if(!T){var S=Ex(g);S&&(T=d[S])}if(T)return T(g,p,m)}return!1}}function Zx(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?un:Px,areDatesEqual:xx,areErrorsEqual:Cx,areFunctionsEqual:Rx,areMapsEqual:n?ql(Wl,un):Wl,areNumbersEqual:jx,areObjectsEqual:n?un:Ix,arePrimitiveWrappersEqual:Mx,areRegExpsEqual:Nx,areSetsEqual:n?ql(Gl,un):Gl,areTypedArraysEqual:n?un:Ux,areUrlsEqual:Dx,unknownTagComparators:void 0};if(r&&(i=Vl({},i,r(i))),e){var s=ei(i.areArraysEqual),a=ei(i.areMapsEqual),o=ei(i.areObjectsEqual),u=ei(i.areSetsEqual);i=Vl({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:u})}return i}function eC(t){return function(e,r,n,i,s,a,o){return t(e,r,o)}}function tC(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,s=t.strict;if(n)return function(u,l){var h=n(),c=h.cache,f=c===void 0?e?new WeakMap:void 0:c,d=h.meta;return r(u,l,{cache:f,equals:i,meta:d,strict:s})};if(e)return function(u,l){return r(u,l,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(u,l){return r(u,l,a)}}var xj=jt();jt({strict:!0});jt({circular:!0});jt({circular:!0,strict:!0});jt({createInternalComparator:function(){return lr}});jt({strict:!0,createInternalComparator:function(){return lr}});jt({circular:!0,createInternalComparator:function(){return lr}});jt({circular:!0,createInternalComparator:function(){return lr},strict:!0});function jt(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,s=t.strict,a=s===void 0?!1:s,o=Zx(t),u=Xx(o),l=n?n(u):eC(u);return tC({circular:r,comparator:u,createState:i,equals:l,strict:a})}var rC=Wi,nC=od,iC=xt;function sC(t,e){return t&&t.length?rC(t,iC(e),nC):void 0}var aC=sC;const Cj=J(aC);var oC=Wi,uC=xt,lC=ud;function cC(t,e){return t&&t.length?oC(t,uC(e),lC):void 0}var hC=cC;const Rj=J(hC);var fC=pf,dC=fC(Object.getPrototypeOf,Object),gC=dC,pC=ht,vC=gC,yC=ft,mC="[object Object]",_C=Function.prototype,wC=Object.prototype,Od=_C.toString,bC=wC.hasOwnProperty,SC=Od.call(Object);function TC(t){if(!yC(t)||pC(t)!=mC)return!1;var e=vC(t);if(e===null)return!0;var r=bC.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Od.call(r)==SC}var EC=TC;const jj=J(EC);var OC=ht,$C=ft,AC="[object Boolean]";function kC(t){return t===!0||t===!1||$C(t)&&OC(t)==AC}var PC=kC;const Ij=J(PC);var xC=Math.ceil,CC=Math.max;function RC(t,e,r,n){for(var i=-1,s=CC(xC((e-t)/(r||1)),0),a=Array(s);s--;)a[n?s:++i]=t,t+=r;return a}var jC=RC,IC=$f,zl=1/0,MC=17976931348623157e292;function NC(t){if(!t)return t===0?t:0;if(t=IC(t),t===zl||t===-zl){var e=t<0?-1:1;return e*MC}return t===t?t:0}var UC=NC,DC=jC,LC=Ui,ws=UC;function qC(t){return function(e,r,n){return n&&typeof n!="number"&&LC(e,r,n)&&(r=n=void 0),e=ws(e),r===void 0?(r=e,e=0):r=ws(r),n=n===void 0?e<r?1:-1:ws(n),DC(e,r,n,t)}}var FC=qC,BC=FC,HC=BC(),WC=HC;const Mj=J(WC);var GC=za;function KC(t,e){var r;return GC(t,function(n,i,s){return r=e(n,i,s),!r}),!!r}var VC=KC,zC=of,JC=xt,QC=VC,YC=Ee,XC=Ui;function ZC(t,e,r){var n=YC(t)?zC:QC;return r&&XC(t,e,r)&&(e=void 0),n(t,JC(e))}var eR=ZC;const Nj=J(eR);var Jl=Of;function tR(t,e,r){e=="__proto__"&&Jl?Jl(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var rR=tR,nR=rR,iR=Tf,sR=xt;function aR(t,e){var r={};return e=sR(e),iR(t,function(n,i,s){nR(r,i,e(n,i,s))}),r}var oR=aR;const Uj=J(oR);function uR(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var lR=uR,cR=za;function hR(t,e){var r=!0;return cR(t,function(n,i,s){return r=!!e(n,i,s),r}),r}var fR=hR,dR=lR,gR=fR,pR=xt,vR=Ee,yR=Ui;function mR(t,e,r){var n=vR(t)?dR:gR;return r&&yR(t,e,r)&&(e=void 0),n(t,pR(e))}var _R=mR;const Dj=J(_R);var $d={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,h){this.fn=u,this.context=l,this.once=h||!1}function s(u,l,h,c,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var d=new i(h,c||u,f),v=r?r+l:l;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],d]:u._events[v].push(d):(u._events[v]=d,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],h,c;if(this._eventsCount===0)return l;for(c in h=this._events)e.call(h,c)&&l.push(r?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(h)):l},o.prototype.listeners=function(l){var h=r?r+l:l,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,d=c.length,v=new Array(d);f<d;f++)v[f]=c[f].fn;return v},o.prototype.listenerCount=function(l){var h=r?r+l:l,c=this._events[h];return c?c.fn?1:c.length:0},o.prototype.emit=function(l,h,c,f,d,v){var g=r?r+l:l;if(!this._events[g])return!1;var p=this._events[g],m=arguments.length,b,_;if(p.fn){switch(p.once&&this.removeListener(l,p.fn,void 0,!0),m){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,h),!0;case 3:return p.fn.call(p.context,h,c),!0;case 4:return p.fn.call(p.context,h,c,f),!0;case 5:return p.fn.call(p.context,h,c,f,d),!0;case 6:return p.fn.call(p.context,h,c,f,d,v),!0}for(_=1,b=new Array(m-1);_<m;_++)b[_-1]=arguments[_];p.fn.apply(p.context,b)}else{var w=p.length,T;for(_=0;_<w;_++)switch(p[_].once&&this.removeListener(l,p[_].fn,void 0,!0),m){case 1:p[_].fn.call(p[_].context);break;case 2:p[_].fn.call(p[_].context,h);break;case 3:p[_].fn.call(p[_].context,h,c);break;case 4:p[_].fn.call(p[_].context,h,c,f);break;default:if(!b)for(T=1,b=new Array(m-1);T<m;T++)b[T-1]=arguments[T];p[_].fn.apply(p[_].context,b)}}return!0},o.prototype.on=function(l,h,c){return s(this,l,h,c,!1)},o.prototype.once=function(l,h,c){return s(this,l,h,c,!0)},o.prototype.removeListener=function(l,h,c,f){var d=r?r+l:l;if(!this._events[d])return this;if(!h)return a(this,d),this;var v=this._events[d];if(v.fn)v.fn===h&&(!f||v.once)&&(!c||v.context===c)&&a(this,d);else{for(var g=0,p=[],m=v.length;g<m;g++)(v[g].fn!==h||f&&!v[g].once||c&&v[g].context!==c)&&p.push(v[g]);p.length?this._events[d]=p.length===1?p[0]:p:a(this,d)}return this},o.prototype.removeAllListeners=function(l){var h;return l?(h=r?r+l:l,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})($d);var wR=$d.exports;const Lj=J(wR);export{Oj as $,br as A,ej as B,ZR as C,XR as D,YR as E,QR as F,uw as G,yj as H,mj as I,_j as J,Aj as K,dj as L,Eu as M,vj as N,pj as O,_n as P,PR as Q,gj as R,rj as S,Tj as T,Sj as U,bj as V,Ej as W,Ya as X,Uf as Y,eA as Z,wj as _,zd as a,$j as a0,kj as a1,VR as a2,ow as a3,hj as a4,fj as a5,cj as a6,lj as a7,uj as a8,oj as a9,Gh as aa,aj as ab,JR as ac,zR as ad,nj as ae,sj as af,ij as ag,xj as ah,Pj as ai,Cj as aj,Rj as ak,jj as al,Ij as am,Mj as an,Dj as ao,Uj as ap,qR as aq,Nj as ar,Lj as as,NR as at,xR as au,OR as b,AR as c,TR as d,uc as e,kR as f,J as g,Ie as h,Sr as i,ti as j,Ur as k,HR as l,ER as m,ve as n,WR as o,$i as p,GR as q,$R as r,SR as s,FR as t,DR as u,BR as v,LR as w,UR as x,KR as y,tj as z};
