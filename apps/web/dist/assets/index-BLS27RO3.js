const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PrincipalDashboard-DgC3az13.js","assets/vendor-react-Cwbq-Nll.js","assets/vendor-BIu-86mi.js","assets/auth.service-BqRRNXX5.js","assets/UnpaidFeeAnalytics-DwfQLCOO.js","assets/clerk.service-DWxizWMb.js","assets/StudentDashboard-CptCGrWS.js","assets/TeacherDashboard-DPL4FiLg.js","assets/ClerkDashboard-24YugXKi.js"])))=>i.map(i=>d[i]);
import{u as B,r as c,j as e,L as C,R as K,a as u,c as G,b as X,Q as Z,B as ee}from"./vendor-react-Cwbq-Nll.js";import{at as se,au as te}from"./vendor-BIu-86mi.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function d(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(i){if(i.ep)return;i.ep=!0;const n=d(i);fetch(i.href,n)}})();const re="modulepreload",ae=function(t){return"/"+t},I={},$=function(s,d,l){let i=Promise.resolve();if(d&&d.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),x=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(d.map(m=>{if(m=ae(m),m in I)return;I[m]=!0;const g=m.endsWith(".css"),w=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const r=document.createElement("link");if(r.rel=g?"stylesheet":re,g||(r.as="script"),r.crossOrigin="",r.href=m,x&&r.setAttribute("nonce",x),document.head.appendChild(r),g)return new Promise((p,a)=>{r.addEventListener("load",p),r.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${m}`)))})}))}function n(o){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=o,window.dispatchEvent(x),!x.defaultPrevented)throw o}return i.then(o=>{for(const x of o||[])x.status==="rejected"&&n(x.reason);return s().catch(n)})};let H=null;function ne(){return H||(H=se("","")),H}const P=ne(),oe=()=>"http://localhost:4000".replace(/\/+$/,""),L=oe();function le(){const t=B(),[s,d]=c.useState(!1),[l,i]=c.useState(""),[n,o]=c.useState({email:"",password:"",full_name:"",phone:"",school_name:"",school_address:"",school_registration_number:"",contact_phone:"",contact_email:""}),[x,m]=c.useState(!1),[g,w]=c.useState(""),r=async a=>{var b;a.preventDefault(),d(!0),i("");try{const f=await fetch(`${L}/auth/signup-principal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),h=await f.json();if(!f.ok)throw new Error(h.error||"Signup failed");h.session&&await P.auth.setSession(h.session),(b=h.school)!=null&&b.join_code?(w(h.school.join_code),m(!0)):t("/login")}catch(f){i(f.message)}finally{d(!1)}},p=async()=>{if(g)try{await navigator.clipboard.writeText(g),alert("Join code copied to clipboard!")}catch(a){console.error("Failed to copy:",a)}};return x&&g?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"inline-block bg-white/80 backdrop-blur-sm px-6 py-4 rounded-2xl shadow-lg border border-white/20",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-800 italic",children:'"The roots of education are bitter, but the fruit is sweet."'}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"â€” Aristotle"})]})}),e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border border-gray-100 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-3",children:"School Created Successfully!"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Your school has been created. Here is your join code to share with teachers, students, and parents:"}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 mb-6 text-white shadow-lg",children:[e.jsx("p",{className:"text-sm opacity-90 mb-3 font-medium",children:"School Join Code"}),e.jsx("code",{className:"text-4xl font-bold font-mono block mb-6 tracking-wider",children:g}),e.jsx("button",{onClick:p,className:"bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-50 transition transform hover:scale-105 shadow-md",children:e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Join Code"]})})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Please log in with your credentials to access your dashboard."}),e.jsx(C,{to:"/login",className:"inline-block bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Go to Login"}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("p",{className:"text-xs text-blue-800 flex items-center justify-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Tip: Save this join code! You can also find it in your dashboard after logging in."]})})]})]})}):x?null:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"inline-block bg-white/80 backdrop-blur-sm px-6 py-4 rounded-2xl shadow-lg border border-white/20",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-800 italic",children:'"The function of education is to teach one to think intensively and to think critically."'}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"â€” Martin Luther King Jr."})]})}),e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Create Your School"}),e.jsx("p",{className:"text-gray-600",children:"Set up your school management system"})]}),l&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-red-700 text-sm font-medium",children:l})]})}),e.jsxs("form",{onSubmit:r,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",required:!0,value:n.full_name,onChange:a=>o({...n,full_name:a.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",required:!0,value:n.email,onChange:a=>o({...n,email:a.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",required:!0,minLength:8,value:n.password,onChange:a=>o({...n,password:a.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Minimum 8 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",required:!0,value:n.phone,onChange:a=>o({...n,phone:a.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter your phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"School Name"}),e.jsx("input",{type:"text",required:!0,value:n.school_name,onChange:a=>o({...n,school_name:a.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter school name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"School Registration Number"}),e.jsx("input",{type:"text",required:!0,value:n.school_registration_number,onChange:a=>o({...n,school_registration_number:a.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter school registration number (unique)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This must be unique for each school"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"School Address"}),e.jsx("textarea",{value:n.school_address,onChange:a=>o({...n,school_address:a.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none resize-none",rows:3,placeholder:"Enter school address"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl",children:s?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create School"})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:["Already have an account?"," ",e.jsx(C,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold hover:underline transition",children:"Login"})]})})]})]})})}function ie(){const t=B(),[s,d]=c.useState("email"),[l,i]=c.useState(""),[n,o]=c.useState(""),[x,m]=c.useState(""),[g,w]=c.useState(!1),[r,p]=c.useState(""),[a,b]=c.useState(!1),[f,h]=c.useState(""),_=async j=>{var T,O,M,F;j.preventDefault(),b(!0),h("");try{let S,q;if(s==="username"){if(!n||!r||!x)throw new Error("Username, password, and school code are required");const k={username:n,password:r};g?k.registration_number=x:k.join_code=x;const W=await fetch(`${L}/auth/login-username`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),E=await W.json();if(!W.ok)throw new Error(E.error||"Invalid username or password");if(E.session&&await P.auth.setSession(E.session),S={user:E.user,session:E.session},E.password_reset_required){t("/reset-password");return}}else{const k=await P.auth.signInWithPassword({email:l,password:r});if(S=k.data,q=k.error,q)throw(T=q.message)!=null&&T.toLowerCase().includes("email")&&((O=q.message)!=null&&O.toLowerCase().includes("confirm"))?new Error("Email not confirmed. Please check your email for a confirmation link, or contact your administrator."):q}if(!S.user)throw new Error("Login failed");let N=null,V=null;const{data:y,error:v}=await P.from("profiles").select("id, role, approval_status, school_id, full_name, email, password_reset_required").eq("id",S.user.id).single();if(v?(console.error("[Login] Direct profile fetch error:",v),V=v):N=y,V||!N){console.log("[Login] Trying backend API to fetch profile...");try{const k=(M=S.session)==null?void 0:M.access_token;if(k){const W=await fetch(`${L}/auth/profile`,{headers:{Authorization:`Bearer ${k}`}});if(W.ok)N=(await W.json()).profile,console.log("[Login] Profile fetched from backend API:",N);else if(((F=S.user.user_metadata)==null?void 0:F.role)==="student"){const E=await fetch(`${L}/students/profile`,{headers:{Authorization:`Bearer ${k}`}});if(E.ok){const Ce=await E.json();console.log("[Login] Student profile found via API, redirecting to dashboard"),t("/student/home");return}}}}catch(k){console.error("[Login] Error fetching profile from API:",k)}}if(!N)throw new Error("Failed to load user profile. Please contact support or try logging in again.");if(console.log("[Login] User profile loaded:",{id:N.id,role:N.role,approval_status:N.approval_status,school_id:N.school_id,password_reset_required:N.password_reset_required}),N.password_reset_required){t("/reset-password");return}if(N.role==="admin"){t("/admin/dashboard");return}const z={principal:"/principal/dashboard",clerk:"/clerk/fees",teacher:"/teacher/classes",student:"/student/home",parent:"/parent/home"}[N.role]||"/";t(z)}catch(S){h(S.message||"Login failed")}finally{b(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"inline-block bg-white/80 backdrop-blur-sm px-6 py-4 rounded-2xl shadow-lg border border-white/20",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-800 italic",children:'"Education is the most powerful weapon which you can use to change the world."'}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"â€” Nelson Mandela"})]})}),e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your school account"})]}),f&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-red-700 text-sm font-medium",children:f})]})}),e.jsxs("div",{className:"mb-6 flex gap-2 bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>{d("email"),h("")},className:`flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all ${s==="email"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Principal/Staff Login"}),e.jsx("button",{type:"button",onClick:()=>{d("username"),h("")},className:`flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all ${s==="username"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Student Login"})]}),e.jsxs("form",{onSubmit:_,className:"space-y-5",children:[s==="email"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),e.jsx("input",{type:"email",required:!0,value:l,onChange:j=>i(j.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter your email"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("input",{type:"text",required:!0,value:n,onChange:j=>o(j.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter your username"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"School Code"}),e.jsxs("button",{type:"button",onClick:()=>{w(!g),m("")},className:"text-xs text-blue-600 hover:text-blue-700 underline",children:["Use ",g?"Join Code":"Registration Number"," instead"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("input",{type:"text",required:!0,value:x,onChange:j=>m(j.target.value.toUpperCase()),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:g?"Enter school registration number":"Enter school join code"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:g?"Enter your school's registration number":"Enter your school's join code (usually provided by your administrator)"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Password"}),e.jsx(C,{to:"/forgot-password",className:"text-xs text-blue-600 hover:text-blue-700 font-medium hover:underline transition",children:"Forgot Password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{type:"password",required:!0,value:r,onChange:j=>p(j.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter your password"})]})]}),e.jsx("button",{type:"submit",disabled:a,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl",children:a?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Logging in..."]}):"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:["Don't have an account?"," ",e.jsx(C,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-semibold hover:underline transition",children:"Sign up"})]})})]})]})})}function ce(){const t=B(),[s,d]=c.useState(""),[l,i]=c.useState(""),[n,o]=c.useState(!1),[x,m]=c.useState(""),[g,w]=c.useState(!1);c.useEffect(()=>{(async()=>{const{data:{session:a}}=await P.auth.getSession();a||t("/login")})()},[t]);const r=async p=>{if(p.preventDefault(),o(!0),m(""),s.length<8){m("Password must be at least 8 characters long"),o(!1);return}if(s!==l){m("Passwords do not match"),o(!1);return}try{const{data:{session:a}}=await P.auth.getSession();if(!a)throw new Error("Session expired. Please log in again.");const b=await fetch(`${L}/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.access_token}`},body:JSON.stringify({new_password:s})}),f=await b.json();if(!b.ok)throw new Error(f.error||"Failed to reset password");w(!0),setTimeout(async()=>{try{const{data:h}=await P.from("profiles").select("role").eq("id",a.user.id).single(),_={principal:"/principal/dashboard",clerk:"/clerk/fees",teacher:"/teacher/classes",student:"/student/home",parent:"/parent/home"},j=h?h.role:"student";t(_[j]||"/student/home")}catch{t("/student/home")}},2e3)}catch(a){m(a.message||"Failed to reset password")}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Set Your New Password"}),e.jsx("p",{className:"text-gray-600",children:"Please create a new password to continue"})]}),g?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-gray-600",children:"Redirecting to your dashboard..."})]}):e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-red-700 text-sm font-medium",children:x})]})}),e.jsxs("form",{onSubmit:r,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{type:"password",required:!0,value:s,onChange:p=>d(p.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter new password (min. 8 characters)",minLength:8})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 8 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{type:"password",required:!0,value:l,onChange:p=>i(p.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Confirm new password",minLength:8})]})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl",children:n?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting Password..."]}):"Set New Password"})]})]})]})})})}function de(){const t=B(),[s,d]=c.useState("student"),[l,i]=c.useState(1),[n,o]=c.useState(!1),[x,m]=c.useState(""),[g,w]=c.useState(""),[r,p]=c.useState(""),[a,b]=c.useState(""),[f,h]=c.useState(!1),[_,j]=c.useState(""),[T,O]=c.useState(""),[M,F]=c.useState(""),[S,q]=c.useState(""),N=async y=>{y.preventDefault(),o(!0),m(""),w("");try{let v="",A={};if(s==="student"){if(!r.trim()||!a.trim())throw new Error("Username and school code are required");v=`${L}/auth/forgot-password-request`,A={username:r.trim()},f?A.registration_number=a:A.join_code=a.toUpperCase()}else{if(!_.trim())throw new Error("Email is required");v=`${L}/auth/forgot-password-request-email`,A={email:_.trim()}}const z=await fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)}),k=await z.json();if(!z.ok)throw new Error(k.error||"Failed to request OTP");w(k.message),i(2)}catch(v){m(v.message||"Failed to request OTP")}finally{o(!1)}},V=async y=>{if(y.preventDefault(),o(!0),m(""),M.length<8){m("Password must be at least 8 characters long"),o(!1);return}if(M!==S){m("Passwords do not match"),o(!1);return}if(T.length!==6){m("OTP must be 6 digits"),o(!1);return}try{const v={otp:T.trim(),new_password:M};s==="student"?(v.username=r.trim(),f?v.registration_number=a:v.join_code=a.toUpperCase()):v.email=_.trim();const A=await fetch(`${L}/auth/forgot-password-verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),z=await A.json();if(!A.ok)throw new Error(z.error||"Failed to reset password");w("Password reset successfully! Redirecting to login..."),setTimeout(()=>{t("/login")},2e3)}catch(v){m(v.message||"Failed to reset password")}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600",children:l===1?s==="student"?"Enter your username and school code to receive an OTP":"Enter your email to receive an OTP":"Enter the OTP sent to your email and set a new password"})]}),l===1&&e.jsxs("div",{className:"mb-6 flex gap-2 bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>{d("student"),p(""),b(""),j(""),m(""),w("")},className:`flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all ${s==="student"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Student"}),e.jsx("button",{type:"button",onClick:()=>{d("email"),p(""),b(""),j(""),m(""),w("")},className:`flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all ${s==="email"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Principal/Teacher"})]}),x&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-red-700 text-sm font-medium",children:x})]})}),g&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-green-700 text-sm font-medium",children:g})]})}),l===1?e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[s==="student"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("input",{type:"text",required:!0,value:r,onChange:y=>p(y.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter your username"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"School Code"}),e.jsxs("button",{type:"button",onClick:()=>{h(!f),b("")},className:"text-xs text-blue-600 hover:text-blue-700 underline",children:["Use ",f?"Join Code":"Registration Number"," instead"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("input",{type:"text",required:!0,value:a,onChange:y=>b(y.target.value.toUpperCase()),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:f?"Enter school registration number":"Enter school join code"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:f?"Enter your school's registration number":"Enter your school's join code"})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),e.jsx("input",{type:"email",required:!0,value:_,onChange:y=>j(y.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter your email address"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the email address associated with your principal or teacher account"})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl",children:n?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending OTP..."]}):"Send OTP"})]}):e.jsxs("form",{onSubmit:V,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"OTP Code"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{type:"text",required:!0,maxLength:6,value:T,onChange:y=>O(y.target.value.replace(/\D/g,"")),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none text-center text-2xl font-mono tracking-widest",placeholder:"000000"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the 6-digit code sent to your email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{type:"password",required:!0,value:M,onChange:y=>F(y.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Enter new password (min. 8 characters)",minLength:8})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 8 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{type:"password",required:!0,value:S,onChange:y=>q(y.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none",placeholder:"Confirm new password",minLength:8})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{i(1),O(""),F(""),q(""),m(""),w("")},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-3 rounded-lg font-semibold hover:bg-gray-400 transition-all",children:"Back"}),e.jsx("button",{type:"submit",disabled:n,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl",children:n?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting Password..."]}):"Reset Password"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(C,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold hover:underline transition text-sm",children:"â† Back to Login"})})]})})})}function me(){const t=B(),s=async()=>{await P.auth.signOut(),t("/login")};return e.jsxs("div",{className:"w-64 bg-gray-900 text-white min-h-screen fixed left-0 top-0",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-8",children:"Admin Panel"}),e.jsx("nav",{className:"space-y-2",children:e.jsx("button",{onClick:()=>t("/admin/dashboard"),className:"w-full text-left px-4 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition",children:"ðŸ“Š All Schools"})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:e.jsx("button",{onClick:s,className:"w-full px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition",children:"Logout"})})]})}function J(){const t=B(),[s,d]=c.useState([]),[l,i]=c.useState(!0),[n,o]=c.useState(""),[x,m]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const{data:{session:p}}=await P.auth.getSession();if(!p){t("/login");return}const a=p.access_token;if(!a){t("/login");return}const b=await fetch(`${L}/auth/profile`,{headers:{Authorization:`Bearer ${a}`}});if(!b.ok){console.error("[AdminDashboard] Failed to fetch profile"),t("/login");return}const h=(await b.json()).profile;if((h==null?void 0:h.role)!=="admin"){console.warn("[AdminDashboard] User is not an admin, role:",h==null?void 0:h.role);const j={principal:"/principal/dashboard",clerk:"/clerk/fees",teacher:"/teacher/classes",student:"/student/home",parent:"/parent"}[h==null?void 0:h.role]||"/login";t(j);return}m(!1),g()}catch(p){console.error("Error verifying role:",p),t("/login")}})()},[t]);const g=async()=>{try{i(!0);const{data:{session:r}}=await P.auth.getSession();if(!r){t("/login");return}const p=r.access_token,a=await fetch(`${L}/admin/schools`,{headers:{Authorization:`Bearer ${p}`}});if(!a.ok){const f=await a.json();throw new Error(f.error||"Failed to load schools")}const b=await a.json();d(b.schools||[])}catch(r){console.error("Error loading schools:",r),o(r.message||"Failed to load schools")}finally{i(!1)}},w=async(r,p)=>{try{const{data:{session:a}}=await P.auth.getSession();if(!a)return;const b=a.access_token,f=await fetch(`${L}/admin/schools/${r}/payment-status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({payment_status:p})});if(!f.ok){const h=await f.json();throw new Error(h.error||"Failed to update payment status")}await g(),alert("Payment status updated successfully")}catch(a){console.error("Error updating payment status:",a),alert(a.message||"Failed to update payment status")}};return x?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:"Loading..."})})}):e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsx(me,{}),e.jsx("div",{className:"ml-64 flex-1 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"All Schools"}),n&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:n}),l?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-gray-600",children:"Loading schools..."})}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"School Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Principal"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Students"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No schools found"})}):s.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.name}),r.registration_number&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Reg: ",r.registration_number]}),r.join_code&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",r.join_code]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.principal?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.principal.name}),e.jsx("div",{className:"text-sm text-gray-500",children:r.principal.email}),r.principal.phone&&e.jsx("div",{className:"text-sm text-gray-500",children:r.principal.phone})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"No principal found"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.total_students})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${r.payment_status==="paid"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r.payment_status==="paid"?"Paid":"Unpaid"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[r.contact_email&&e.jsx("div",{children:r.contact_email}),r.contact_phone&&e.jsx("div",{children:r.contact_phone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>w(r.id,r.payment_status==="paid"?"unpaid":"paid"),className:`mr-2 px-3 py-1 rounded ${r.payment_status==="paid"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:r.payment_status==="paid"?"Mark Unpaid":"Mark Paid"})})]},r.id))})]})})}),!l&&s.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Total Schools: ",s.length]})]})})]})}const U=(t,s=3)=>c.lazy(async()=>{for(let d=0;d<s;d++)try{return await t()}catch(l){if(d===s-1)throw console.error("Failed to load component after retries:",l),l;await new Promise(i=>setTimeout(i,1e3*(d+1)))}throw new Error("Failed to load component")}),R=U(()=>$(()=>import("./PrincipalDashboard-DgC3az13.js").then(t=>t.a8),__vite__mapDeps([0,1,2,3,4,5]))),Y=U(()=>$(()=>import("./StudentDashboard-CptCGrWS.js"),__vite__mapDeps([6,1,2,3]))),Q=U(()=>$(()=>import("./TeacherDashboard-DPL4FiLg.js").then(t=>t.T),__vite__mapDeps([7,1,2,3]))),D=U(()=>$(()=>import("./ClerkDashboard-24YugXKi.js"),__vite__mapDeps([8,1,2,3,5,4])));function he(){const t=(s,d)=>{s.preventDefault();const l=document.getElementById(d);if(l){const o=l.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:o,behavior:"smooth"})}};return e.jsx("nav",{className:"bg-white shadow-sm border-b fixed w-full top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(C,{to:"/",className:"text-2xl font-bold text-blue-600",children:"JhelumVerse"})}),e.jsxs("div",{className:"hidden md:flex space-x-8",children:[e.jsx("a",{href:"#features",onClick:s=>t(s,"features"),className:"text-gray-700 hover:text-blue-600 cursor-pointer",children:"Features"}),e.jsx("a",{href:"#demo",onClick:s=>t(s,"demo"),className:"text-gray-700 hover:text-blue-600 cursor-pointer",children:"Demo"}),e.jsx("a",{href:"#testimonials",onClick:s=>t(s,"testimonials"),className:"text-gray-700 hover:text-blue-600 cursor-pointer",children:"Testimonials"}),e.jsx("a",{href:"#faq",onClick:s=>t(s,"faq"),className:"text-gray-700 hover:text-blue-600 cursor-pointer",children:"FAQ"}),e.jsx(C,{to:"/login",className:"text-gray-700 hover:text-blue-600",children:"Login"}),e.jsx(C,{to:"/signup",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Sign Up"})]})]})})})}function ue(){return e.jsx("section",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:"All-In-One Cloud School Management System"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Manage attendance, fees, exams, reporting & more â€” in one place."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(C,{to:"/login",className:"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold border-2 border-blue-600 hover:bg-blue-50 transition",children:"Login"}),e.jsx(C,{to:"/signup",className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition",children:"Create School Now"})]}),e.jsx("div",{className:"mt-12 px-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6 max-w-6xl mx-auto",children:e.jsx("div",{className:"relative w-full overflow-hidden rounded-lg",style:{minHeight:"400px"},children:e.jsx("img",{src:"https://res.cloudinary.com/dv0l9h188/image/upload/v1763540151/jhelumVerse_fuvbtt.png",alt:"JhelumVerse Dashboard Preview",className:"w-full h-auto rounded-lg",style:{display:"block",maxWidth:"100%",height:"auto"},crossOrigin:"anonymous"})})})})]})})})}function xe(){const t=[{icon:"ðŸ«",title:"Multi-Tenant for Multiple Schools",desc:"Each school operates independently with complete data isolation"},{icon:"ðŸ‘¥",title:"Role-Based Dashboards",desc:"Principal, Clerk, Teacher, Student, Parent â€” each with tailored views"},{icon:"ðŸ“Š",title:"Attendance, Homework, Exams",desc:"Track attendance, manage assignments, and generate report cards"},{icon:"ðŸ’³",title:"Fee Collection with UPI/Paytm/Razorpay",desc:"Accept payments online with integrated payment gateways"},{icon:"ðŸ’¬",title:"WhatsApp Chatbot for Parents",desc:"Automated communication and updates via WhatsApp"},{icon:"ðŸ“±",title:"Mobile-First Design",desc:"Fully responsive web app and native mobile apps"}];return e.jsx("section",{id:"features",className:"py-20 bg-white scroll-mt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Key Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((s,d)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-lg transition",children:[e.jsx("div",{className:"text-4xl mb-4",children:s.icon}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600",children:s.desc})]},d))})]})})}function pe(){const t=[{title:"Principal Dashboard",desc:"Control everything",items:["Manage staff & users","Create classes & sections","View analytics & reports","Configure school settings"]},{title:"Clerk Panel",desc:"Fees and Marks Verification",items:["Record fee payments","Issue receipts","Verify exam marks","Generate financial reports"]},{title:"Teacher Workspace",desc:"Attendance + Lesson Plans",items:["Mark daily attendance","Upload exam marks","View assigned classes","Track student progress"]},{title:"Student & Parent Apps",desc:"Mobile first",items:["View timetable & marks","Check fee status","Track attendance","Receive notifications"]}];return e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Powerful Features for Every Role"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.map((s,d)=>e.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-md",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:s.desc}),e.jsx("ul",{className:"space-y-2",children:s.items.map((l,i)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"âœ“"}),e.jsx("span",{children:l})]},i))})]},d))})]})})}function ge(){const t=[{quote:"Made our school fully digital in 48 hours.",author:"Principal, ABC School",rating:5},{quote:"The fee collection feature saved us hours every week.",author:"Clerk, XYZ Academy",rating:5},{quote:"Parents love the WhatsApp notifications!",author:"Teacher, Sunshine School",rating:5}];return e.jsx("section",{id:"testimonials",className:"py-20 bg-white scroll-mt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"What Our Users Say"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((s,d)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("div",{className:"flex mb-4",children:[...Array(s.rating)].map((l,i)=>e.jsx("span",{className:"text-yellow-400 text-xl",children:"â­"},i))}),e.jsxs("p",{className:"text-gray-700 mb-4 italic",children:['"',s.quote,'"']}),e.jsxs("p",{className:"text-gray-600 font-semibold",children:["â€” ",s.author]})]},d))})]})})}function fe(){const[t,s]=c.useState({name:"",email:"",phone:"",schoolName:"",message:""}),d=l=>{l.preventDefault();const n=`https://wa.me/916005568502?text=${encodeURIComponent(`Hello! I would like to request a demo of JhelumVerse.

Name: ${t.name}
Email: ${t.email}
Phone: ${t.phone}
School Name: ${t.schoolName}
Message: ${t.message||"I am interested in learning more about JhelumVerse."}`)}`;window.open(n,"_blank"),s({name:"",email:"",phone:"",schoolName:"",message:""})};return e.jsx("section",{id:"demo",className:"py-20 bg-white scroll-mt-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-center mb-4",children:"Request a Demo"}),e.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Fill out the form below and we'll contact you on WhatsApp to schedule a personalized demo."}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-8 shadow-md",children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name *"}),e.jsx("input",{type:"text",required:!0,value:t.name,onChange:l=>s({...t,name:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:t.email,onChange:l=>s({...t,email:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",required:!0,value:t.phone,onChange:l=>s({...t,phone:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+91 1234567890"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Name *"}),e.jsx("input",{type:"text",required:!0,value:t.schoolName,onChange:l=>s({...t,schoolName:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ABC School"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Message (Optional)"}),e.jsx("textarea",{value:t.message,onChange:l=>s({...t,message:l.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tell us more about your requirements..."})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("button",{type:"submit",className:"bg-green-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-700 transition inline-flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“±"}),"Send via WhatsApp"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Clicking this button will open WhatsApp with your message pre-filled"})]})]})})]})})}function be(){const t=[{q:"Is it multi-branch?",a:"Yes! Each school operates as an independent tenant with complete data isolation. You can manage multiple schools from a single platform."},{q:"How is data secured?",a:"We use Supabase with Row Level Security (RLS) policies. Each school's data is isolated, and users can only access data within their school and role permissions."},{q:"Can teachers use via phone?",a:"Absolutely! We have a React Native mobile app (Expo) that works on both iOS and Android. Teachers can mark attendance, upload marks, and more on the go."}];return e.jsx("section",{id:"faq",className:"py-20 bg-gray-50 scroll-mt-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Frequently Asked Questions"}),e.jsx("div",{className:"space-y-6",children:t.map((s,d)=>e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.q}),e.jsx("p",{className:"text-gray-600",children:s.a})]},d))})]})})}function je(){const t=(s,d)=>{s.preventDefault();const l=document.getElementById(d);if(l){const o=l.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:o,behavior:"smooth"})}};return e.jsx("footer",{className:"bg-gray-900 text-white py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"JhelumVerse"}),e.jsx("p",{className:"text-gray-400",children:"All-in-one school management platform"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Product"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",onClick:s=>t(s,"features"),className:"hover:text-white cursor-pointer",children:"Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#testimonials",onClick:s=>t(s,"testimonials"),className:"hover:text-white cursor-pointer",children:"Testimonials"})}),e.jsx("li",{children:e.jsx("a",{href:"#faq",onClick:s=>t(s,"faq"),className:"hover:text-white cursor-pointer",children:"FAQ"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx(C,{to:"/terms",className:"hover:text-white",children:"Terms"})}),e.jsx("li",{children:e.jsx(C,{to:"/privacy",className:"hover:text-white",children:"Privacy Policy"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"https://wa.me/916005568502",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white",children:"WhatsApp Support"})}),e.jsx("li",{children:e.jsx("a",{href:"mailto:ayoob324005@gmail.com",className:"hover:text-white",children:"Contact Us"})})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-gray-800 text-center text-gray-400",children:e.jsx("p",{children:"Â© 2024 JhelumVerse. All rights reserved."})})]})})}function ye(){return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(he,{}),e.jsxs("div",{className:"pt-16",children:[e.jsx(ue,{}),e.jsx(xe,{}),e.jsx(pe,{}),e.jsx(ge,{}),e.jsx(fe,{}),e.jsx(be,{}),e.jsx(je,{})]})]})}function ve(){return e.jsx("div",{className:"p-6",children:"Parent: child progress, payments"})}function we(){return e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:"Loading..."})})}),children:e.jsxs(K,{children:[e.jsx(u,{path:"/",element:e.jsx(ye,{})}),e.jsx(u,{path:"/login",element:e.jsx(ie,{})}),e.jsx(u,{path:"/signup",element:e.jsx(le,{})}),e.jsx(u,{path:"/reset-password",element:e.jsx(ce,{})}),e.jsx(u,{path:"/forgot-password",element:e.jsx(de,{})}),e.jsx(u,{path:"/principal/dashboard",element:e.jsx(R,{})}),e.jsx(u,{path:"/principal/staff",element:e.jsx(R,{})}),e.jsx(u,{path:"/principal/classifications",element:e.jsx(R,{})}),e.jsx(u,{path:"/principal/classes",element:e.jsx(R,{})}),e.jsx(u,{path:"/principal/subjects",element:e.jsx(R,{})}),e.jsx(u,{path:"/principal/students",element:e.jsx(R,{})}),e.jsx(u,{path:"/principal/exams",element:e.jsx(R,{})}),e.jsx(u,{path:"/principal/salary",element:e.jsx(R,{})}),e.jsx(u,{path:"/principal/fees",element:e.jsx(R,{})}),e.jsx(u,{path:"/clerk",element:e.jsx(D,{})}),e.jsx(u,{path:"/clerk/fees",element:e.jsx(D,{})}),e.jsx(u,{path:"/clerk/payments",element:e.jsx(D,{})}),e.jsx(u,{path:"/clerk/salary",element:e.jsx(D,{})}),e.jsx(u,{path:"/clerk/marks",element:e.jsx(D,{})}),e.jsx(u,{path:"/teacher/classes",element:e.jsx(Q,{})}),e.jsx(u,{path:"/teacher",element:e.jsx(Q,{})}),e.jsx(u,{path:"/student/home",element:e.jsx(Y,{})}),e.jsx(u,{path:"/student",element:e.jsx(Y,{})}),e.jsx(u,{path:"/parent",element:e.jsx(ve,{})}),e.jsx(u,{path:"/admin/dashboard",element:e.jsx(J,{})}),e.jsx(u,{path:"/admin",element:e.jsx(J,{})})]})})}class Ne extends c.Component{constructor(s){super(s),this.handleReset=()=>{this.setState({hasError:!1,error:null})},this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,d){console.error("ErrorBoundary caught an error:",s,d)}render(){var s;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:((s=this.state.error)==null?void 0:s.message)||"An unexpected error occurred"}),e.jsx("button",{onClick:this.handleReset,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition font-semibold",children:"Try Again"})]})}):this.props.children}}const ke=new te({defaultOptions:{queries:{staleTime:2*60*1e3,gcTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1}}});G.createRoot(document.getElementById("root")).render(e.jsx(X.StrictMode,{children:e.jsx(Ne,{children:e.jsx(Z,{client:ke,children:e.jsx(ee,{children:e.jsx(we,{})})})})}));export{L as A,Ne as E,$ as _,P as s};
