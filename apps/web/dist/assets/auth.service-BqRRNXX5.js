import{j as r,r as o}from"./vendor-react-Cwbq-Nll.js";import{A as a}from"./index-BLS27RO3.js";class n extends o.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("LazyLoader error:",e,t)}render(){var e;return this.state.hasError?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center p-6",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"⚠️ Failed to load component"}),r.jsx("p",{className:"text-gray-600 mb-4",children:((e=this.state.error)==null?void 0:e.message)||"An error occurred while loading this section."}),r.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}function c({children:s,fallback:e}){const t=r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});return r.jsx(n,{children:r.jsx(o.Suspense,{fallback:e||t,children:s})})}async function d(s){const e=await fetch(`${a}/auth/profile`,{headers:{Authorization:`Bearer ${s}`,"Cache-Control":"no-cache"}});if(e.ok||e.status===304)if(e.status===304){const t=await fetch(`${a}/auth/profile?t=${Date.now()}`,{headers:{Authorization:`Bearer ${s}`,"Cache-Control":"no-cache"}});if(t.ok)return await t.json();throw new Error("Failed to fetch profile")}else return await e.json();else throw new Error(`Failed to get profile: ${e.status}`)}export{c as L,d as g};
